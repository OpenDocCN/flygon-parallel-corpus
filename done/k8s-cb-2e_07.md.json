["```\n$ curl https://sdk.cloud.google.com | bash\n```", "```\nInstallation directory (this will create a google-cloud-sdk subdirectory) (/Users/saito):\n```", "```\nDo you want to help improve the Google Cloud SDK (Y/n)? n\n```", "```\nModify profile to update your $PATH and enable shell command\ncompletion?\nDo you want to continue (Y/n)?  y\nThe Google Cloud SDK installer will now prompt you to update an rc\nfile to bring the Google Cloud CLIs into your environment.\nEnter a path to an rc file to update, or leave blank to use\n[/Users/saito/.bash_profile]:\n```", "```\n//reload .bash_profile\n$ exec -l $SHELL\n\n//check gcloud command is in your search path\n$ which gcloud\n/Users/saito/google-cloud-sdk/bin/gcloud\n```", "```\n$ gcloud info\nGoogle Cloud SDK [187.0.0]\nPlatform: [Mac OS X, x86_64] ('Darwin', 'Hideto-Saito-no-MacBook.local', '17.4.0', 'Darwin Kernel Version 17.4.0: Sun Dec 17 09:19:54 PST 2017; root:xnu-4570.41.2~1/RELEASE_X86_64', 'x86_64', 'i386')\nPython Version: [2.7.14 (default, Jan 21 2018, 12:22:04)  [GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.38)]]\nPython Location: [/usr/local/Cellar/python/2.7.14_2/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python]\n```", "```\nYou must log in to continue. Would you like to log in (Y/n)? y\n```", "```\nPick cloud project to use:\n [1] my-first-project-194302\n [2] kubernetes-cookbook\n [3] Create a new project\nPlease enter numeric choice or text value (must exactly match list item):  2\n```", "```\nDo you want to configure Google Compute Engine\n(https://cloud.google.com/compute) settings (Y/n)?  n\n```", "```\n$ gcloud compute networks create chap7 --subnet-mode=custom\n```", "```\n$ gcloud compute networks list\nNAME     SUBNET_MODE  BGP_ROUTING_MODE  IPV4_RANGE  GATEWAY_IPV4 **chap7    CUSTOM       REGIONAL** default  AUTO         REGIONAL\n```", "```\n$ gcloud compute networks subnets create chap7-us-central1 --network=chap7 --range=192.168.1.0/24 --region us-central1\n\n$ gcloud compute networks subnets create chap7-us-east1 --network=chap7 --range=192.168.2.0/24 --region us-east1\n```", "```\n$ gcloud compute networks subnets list --network=chap7\nNAME               REGION       NETWORK  RANGE chap7-us-east1     us-east1     chap7    192.168.2.0/24 chap7-us-central1  us-central1  chap7    192.168.1.0/24\n```", "```\n$ gcloud compute firewall-rules create public-ssh --network=chap7 --allow=\"tcp:22\" --source-ranges=\"0.0.0.0/0\" --target-tags=\"public\"\n```", "```\n$ gcloud compute firewall-rules create public-http --network=chap7 --allow=\"tcp:80\" --source-ranges=\"0.0.0.0/0\" --target-tags=\"public\"\n```", "```\n$ gcloud compute firewall-rules create private-ssh --network=chap7 --allow=\"tcp:22\" --source-tags=\"public\" --target-tags=\"private\"\n```", "```\n$ gcloud compute firewall-rules list --filter='NETWORK=chap7'\nNAME         NETWORK  DIRECTION  PRIORITY  ALLOW   DENY private-ssh  chap7    INGRESS    1000      tcp:22 public-http  chap7    INGRESS    1000      tcp:80 public-ssh   chap7    INGRESS    1000      tcp:22\n```", "```\n$ whoami\nsaito\n\n$ gcloud compute config-ssh --ssh-key-file=~/.ssh/id_rsa\n```", "```\n$ gcloud compute project-info describe --format=json\n{\n \"commonInstanceMetadata\": { \"fingerprint\": \"fAqDGp0oSMs=\", \"items\": [ { \"key\": \"**ssh-keys**\", \"value\": \"**saito**:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDAr1cHrrONuaPgN20sXCPH8uT2lOjWRB3zEncOTxOI2lCW6DM6Mr31boboDe0kAtUMdoDU43yyMe4r734SmtMuh... \n```", "```\n$ gcloud compute zones list --filter='name:(us-east1,us-central1)'\nNAME           REGION       STATUS  NEXT_MAINTENANCE  TURNDOWN_DATE **us-east1-b**     us-east1     UP us-east1-c     us-east1     UP us-east1-d     us-east1     UP us-central1-c  us-central1  UP **us-central1-a**  us-central1  UP us-central1-f  us-central1  UP us-central1-b  us-central1  UP\n```", "```\n$ gcloud compute instances create chap7-public --network=chap7 --subnet=chap7-us-central1 --zone=us-central1-a --tags=public --machine-type=f1-micro\n\n$ gcloud compute instances create chap7-private --network=chap7 --subnet=chap7-us-east1 --zone=us-east1-b --tags=private --machine-type=f1-micro\n```", "```\n$ gcloud compute instances list\nNAME           ZONE           MACHINE_TYPE  PREEMPTIBLE  INTERNAL_IP  EXTERNAL_IP    STATUS chap7-public   us-central1-a  f1-micro                   192.168.1.2  **35.224.14.45**   RUNNING chap7-private  us-east1-b     f1-micro                   **192.168.2.2**  35.229.95.179  RUNNING\n```", "```\n$ ssh-add ~/.ssh/id_rsa\n```", "```\n$ sudo systemctl start nginx\n```", "```\ngcloud container [builds|clusters|images|node-pools|operations] | $COMMAND $FLAG\u2026\n```", "```\n// create GCP VPC, it might take few minutes.\n# gcloud compute networks create k8s-network\nCreated [https://www.googleapis.com/compute/v1/projects/kubernetes-cookbook/global/networks/k8s-network].\nNAME         SUBNET_MODE  BGP_ROUTING_MODE  IPV4_RANGE  GATEWAY_IPV4\nk8s-network  AUTO         REGIONAL\n```", "```\n$ gcloud compute firewall-rules create <FIREWALL_NAME> --network k8s-network --allow tcp,udp,icmp --source-ranges <IP_RANGE>\n$ gcloud compute firewall-rules create <FIREWALL_NAME> --network k8s-network --allow tcp:22,tcp:3389,icmp\n```", "```\n// gcloud compute networks describe <VPC name>\n# gcloud compute networks describe k8s-network\nautoCreateSubnetworks: true\ncreationTimestamp: '2018-02-25T13:54:28.867-08:00'\nid: '1580862590680993403'\nkind: compute#network\nname: k8s-network\nroutingConfig:\n  routingMode: REGIONAL\nselfLink: https://www.googleapis.com/compute/v1/projects/kubernetes-cookbook/global/networks/k8s-network\nsubnetworks:\n- https://www.googleapis.com/compute/v1/projects/kubernetes-cookbook/regions/australia-southeast1/subnetworks/k8s-network\n- https://www.googleapis.com/compute/v1/projects/kubernetes-cookbook/regions/europe-west4/subnetworks/k8s-network\n- https://www.googleapis.com/compute/v1/projects/kubernetes-cookbook/regions/northamerica-northeast1/subnetworks/k8s-network\n- https://www.googleapis.com/compute/v1/projects/kubernetes-cookbook/regions/europe-west1/subnetworks/k8s-network\n- https://www.googleapis.com/compute/v1/projects/kubernetes-cookbook/regions/southamerica-east1/subnetworks/k8s-network\n- https://www.googleapis.com/compute/v1/projects/kubernetes-cookbook/regions/us-central1/subnetworks/k8s-network\n- https://www.googleapis.com/compute/v1/projects/kubernetes-cookbook/regions/us-east1/subnetworks/k8s-network\n- https://www.googleapis.com/compute/v1/projects/kubernetes-cookbook/regions/asia-east1/subnetworks/k8s-network\n- https://www.googleapis.com/compute/v1/projects/kubernetes-cookbook/regions/us-west1/subnetworks/k8s-network\n- https://www.googleapis.com/compute/v1/projects/kubernetes-cookbook/regions/europe-west3/subnetworks/k8s-network\n- https://www.googleapis.com/compute/v1/projects/kubernetes-cookbook/regions/asia-southeast1/subnetworks/k8s-network\n- https://www.googleapis.com/compute/v1/projects/kubernetes-cookbook/regions/us-east4/subnetworks/k8s-network\n- https://www.googleapis.com/compute/v1/projects/kubernetes-cookbook/regions/europe-west2/subnetworks/k8s-network\n- https://www.googleapis.com/compute/v1/projects/kubernetes-cookbook/regions/asia-northeast1/subnetworks/k8s-network\n- https://www.googleapis.com/compute/v1/projects/kubernetes-cookbook/regions/asia-south1/subnetworks/k8s-network\nx_gcloud_bgp_routing_mode: REGIONAL\nx_gcloud_subnet_mode: AUTO\n```", "```\n// create GKE cluster\n$ gcloud container clusters create my-k8s-cluster --cluster-version 1.9.2-gke.1 --machine-type f1-micro --num-nodes 3 --network k8s-network --zone us-central1-a --tags private --scopes=storage-rw,compute-ro\nWARNING: The behavior of --scopes will change in a future gcloud release: service-control and service-management scopes will no longer be added to what is specified in --scopes. To use these scopes, add them explicitly to --scopes. To use the new behavior, set container/new_scopes_behavior property (gcloud config set container/new_scopes_behavior true).\nWARNING: Starting in Kubernetes v1.10, new clusters will no longer get compute-rw and storage-ro scopes added to what is specified in --scopes (though the latter will remain included in the default --scopes). To use these scopes, add them explicitly to --scopes. To use the new behavior, set container/new_scopes_behavior property (gcloud config set container/new_scopes_behavior true).\nCreating cluster my-k8s-cluster...done.\nCreated [https://container.googleapis.com/v1/projects/kubernetes-cookbook/zones/us-central1-a/clusters/my-k8s-cluster].\nTo inspect the contents of your cluster, go to: https://console.cloud.google.com/kubernetes/workload_/gcloud/us-central1-a/my-k8s-cluster?project=kubernetes-cookbook\nkubeconfig entry generated for my-k8s-cluster.\nNAME            LOCATION       MASTER_VERSION  MASTER_IP    MACHINE_TYPE  NODE_VERSION  NUM_NODES  STATUS\nmy-k8s-cluster  us-central1-a  1.9.2-gke.1     35.225.24.4  f1-micro      1.9.2-gke.1   3          RUNNING\n```", "```\n# gcloud container clusters get-credentials my-k8s-cluster --zone us-central1-a --project kubernetes-cookbook\nFetching cluster endpoint and auth data.\nkubeconfig entry generated for my-k8s-cluster.\n```", "```\n// list cluster components\n# kubectl get componentstatuses\nNAME                 STATUS    MESSAGE              ERROR\ncontroller-manager   Healthy   ok\nscheduler            Healthy   ok\netcd-0               Healthy   {\"health\": \"true\"}\netcd-1               Healthy   {\"health\": \"true\"}\n```", "```\n// list the nodes in cluster\n# kubectl get nodes\nNAME                                            STATUS    ROLES     AGE       VERSION\ngke-my-k8s-cluster-default-pool-7d0359ed-0rl8   Ready     <none>    21m       v1.9.2-gke.1\ngke-my-k8s-cluster-default-pool-7d0359ed-1s2v   Ready     <none>    21m       v1.9.2-gke.1\ngke-my-k8s-cluster-default-pool-7d0359ed-61px   Ready     <none>    21m       v1.9.2-gke.1\n```", "```\n// list cluster info\n# kubectl cluster-info\nKubernetes master is running at https://35.225.24.4\nGLBCDefaultBackend is running at https://35.225.24.4/api/v1/namespaces/kube-system/services/default-http-backend:http/proxy\nHeapster is running at https://35.225.24.4/api/v1/namespaces/kube-system/services/heapster/proxy\nKubeDNS is running at https://35.225.24.4/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy\nkubernetes-dashboard is running at https://35.225.24.4/api/v1/namespaces/kube-system/services/https:kubernetes-dashboard:/proxy\nMetrics-server is running at https://35.225.24.4/api/v1/namespaces/kube-system/services/https:metrics-server:/proxy\n```", "```\n# kubectl proxy\nStarting to serve on 127.0.0.1:8001\n```", "```\n// check our current context name\n# kubectl config current-context\ngke_kubernetes-cookbook_us-central1-a_my-k8s-cluster\n```", "```\n// kubectl config view $CONTEXT_NAME\n# kubectl config view gke_kubernetes-cookbook_us-central1-a_my-k8s-cluster\ncurrent-context: gke_kubernetes-cookbook_us-central1-a_my-k8s-cluster\nkind: Config\npreferences: {}\nusers:\n- name: gke_kubernetes-cookbook_us-central1-a_my-k8s-cluster\n  user:\n    auth-provider:\n      config:\n        access-token: $ACCESS_TOKEN\n        cmd-args: config config-helper --format=json\n        cmd-path: /Users/chloelee/Downloads/google-cloud-sdk-2/bin/gcloud\n        expiry: 2018-02-27T03:46:57Z\n        expiry-key: '{.credential.token_expiry}'\n        token-key: '{.credential.access_token}'\n      name: gcp\n```", "```\n# kubectl run nginx --image nginx --replicas=2\ndeployment \"nginx\" created\n# kubectl get pods\nNAME                   READY     STATUS    RESTARTS   AGE\nnginx-8586cf59-x27bj   1/1       Running   0          12s\nnginx-8586cf59-zkl8j   1/1       Running   0          12s\n```", "```\n# kubectl get storageclasses\nNAME                 PROVISIONER            AGE\nstandard (default)   kubernetes.io/gce-pd   1h\n```", "```\n# cat gke-pvc.yaml\napiVersion: v1\nkind: PersistentVolumeClaim\nmetadata:\n    name: pvc-example-pv\nspec:\n  storageClassName: standard\n  accessModes:\n    - ReadWriteOnce\n  resources:\n    requests:\n      storage: 10Gi\n\n// create resources\n# kubectl create -f gke-pvc.yaml\npersistentvolumeclaim \"pvc-example-pv\" created\n```", "```\n// check pvc status\n# kubectl get pvc\nNAME              STATUS    VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   AGE\npvc-example-pv    Bound     pvc-1491b08e-1cfc-11e8-8589-42010a800360   10Gi       RWO            standard       12m\n\n// describe the details of created PVC\n# kubectl describe pvc pvc-example-pv\nName:          pvc-example-pv\nNamespace:     default\nStorageClass:  standard\nStatus:        Bound\nVolume:        pvc-1491b08e-1cfc-11e8-8589-42010a800360\nLabels:        <none>\nAnnotations:   pv.kubernetes.io/bind-completed=yes\n               pv.kubernetes.io/bound-by-controller=yes\n               volume.beta.kubernetes.io/storage-provisioner=kubernetes.io/gce-pd\nFinalizers:    []\nCapacity:      10Gi\nAccess Modes:  RWO\nEvents:\n  Type    Reason                 Age   From                         Message\n  ----    ------                 ----  ----                         -------\n  Normal  ProvisioningSucceeded  12m   persistentvolume-controller  Successfully provisioned volume pvc-1491b08e-1cfc-11e8-8589-42010a800360 using kubernetes.io/gce-pd\n```", "```\n# gcloud compute disks list\nNAME                                                             ZONE           SIZE_GB  TYPE         STATUS\ngke-my-k8s-cluster-5ef-pvc-1491b08e-1cfc-11e8-8589-42010a800360  us-central1-a  10       pd-standard  READY\n```", "```\n// leveraging LoadBalancer service\n# cat gke-service.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: nginx\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      run: nginx\n  template:\n    metadata:\n      labels:\n        run: nginx\n    spec:\n      containers:\n        - image: nginx\n          name: nginx\n          ports:\n            - containerPort: 80\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: nginx\nspec:\n  ports:\n    - port: 80\n      targetPort: 80\n  type: LoadBalancer\n  selector:\n    run: nginx\n\n// create resources\n# kubectl create -f gke-service.yaml\ndeployment \"nginx\" created\nservice \"nginx\" created\n```", "```\n# kubectl get svc nginx\nNAME      TYPE           CLUSTER-IP      EXTERNAL-IP      PORT(S)        AGE\nnginx     LoadBalancer   10.35.250.183   35.225.223.151   80:30383/TCP   11m\n```", "```\n# curl -I 35.225.223.151\nHTTP/1.1 200 OK\nServer: nginx/1.13.9\nDate: Thu, 01 Mar 2018 03:57:05 GMT\nContent-Type: text/html\nContent-Length: 612\nLast-Modified: Tue, 20 Feb 2018 12:21:20 GMT\nConnection: keep-alive\nETag: \"5a8c12c0-264\"\nAccept-Ranges: bytes\n```", "```\n# gcloud compute forwarding-rules list\nNAME                              REGION       IP_ADDRESS      IP_PROTOCOL  TARGET\nae1f2ad0c1d0211e8858942010a80036  us-central1  35.225.223.151  TCP          us-central1/targetPools/ae1f2ad0c1d0211e8858942010a80036\n```", "```\n// list target pools\n# gcloud compute target-pools list\nNAME                              REGION       SESSION_AFFINITY  BACKUP  HEALTH_CHECKS\nae1f2ad0c1d0211e8858942010a80036  us-central1  NONE                      k8s-1a4c86537c370d21-node\n\n// check target pools info, replace $GCP_REGION as your default region.\n# gcloud compute target-pools describe ae1f2ad0c1d0211e8858942010a80036 --region=$GCP_REGION\ncreationTimestamp: '2018-02-28T19:45:46.052-08:00'\ndescription: '{\"kubernetes.io/service-name\":\"default/nginx\"}'\nhealthChecks:\n- https://www.googleapis.com/compute/v1/projects/kubernetes-cookbook/global/httpHealthChecks/k8s-1a4c86537c370d21-node\nid: '3515096241941432709'\ninstances:\n- https://www.googleapis.com/compute/v1/projects/kubernetes-cookbook/zones/us-central1-a/instances/gke-my-k8s-cluster-default-pool-36121894-71wg\n- https://www.googleapis.com/compute/v1/projects/kubernetes-cookbook/zones/us-central1-a/instances/gke-my-k8s-cluster-default-pool-36121894-04rv\n- https://www.googleapis.com/compute/v1/projects/kubernetes-cookbook/zones/us-central1-a/instances/gke-my-k8s-cluster-default-pool-36121894-3mxm\nkind: compute#targetPool\nname: ae1f2ad0c1d0211e8858942010a80036\nregion: https://www.googleapis.com/compute/v1/projects/kubernetes-cookbook/regions/us-central1\nselfLink: https://www.googleapis.com/compute/v1/projects/kubernetes-cookbook/regions/us-central1/targetPools/ae1f2ad0c1d0211e8858942010a80036\nsessionAffinity: NONE\n```", "```\n# cat INGRESS.yaml\napiVersion: extensions/v1beta1\nkind: INGRESS\nmetadata:\n  name: my-INGRESS\n  annotations:\n    INGRESS.kubernetes.io/rewrite-target: /\nspec:\n  rules:\n    - http:\n        paths:\n          - path: /\n            # default backend\n            backend:\n              serviceName: nodeport-svc\n              servicePort: 8080\n          - path: /nginx\n            # nginx service\n            backend:\n              serviceName: nodeport-svc\n              servicePort: 8080\n          - path: /echoserver\n            # echoserver service\n            backend:\n              serviceName: echoserver-svc\n              servicePort: 8080\n\n// create nodeport-svc (nginx) service\n# kubectl create -f nodeport-deployment.yaml\ndeployment \"nodeport-deploy\" created\nservice \"nodeport-svc\" created\n\n// create echoserver-svc (echoserver) service\n# kubectl create -f echoserver.yaml\ndeployment \"echoserver-deploy\" created\nservice \"echoserver-svc\" created\n\n// create INGRESS\n# kubectl create -f INGRESS.yaml\nINGRESS \"my-INGRESS\" created\n```", "```\n// kubectl describe INGRESS $INGRESS_name\n# kubectl describe INGRESS my-INGRESS\n\ncurl Name:             my-INGRESS\nNamespace:        default\nAddress:          35.190.46.137\nDefault backend:  default-http-backend:80 (10.32.2.3:8080)\nRules:\n  Host  Path  Backends\n  ----  ----  --------\n  *\n        /             nodeport-svc:8080 (<none>)\n        /nginx        nodeport-svc:8080 (<none>)\n        /echoserver   echoserver-svc:8080 (<none>)\nAnnotations:\n  backends:         {\"k8s-be-31513--91cf30ccf285becb\":\"HEALTHY\",\"k8s-be-31780--91cf30ccf285becb\":\"HEALTHY\",\"k8s-be-32691--91cf30ccf285becb\":\"HEALTHY\"}\n  forwarding-rule:  k8s-fw-default-my-INGRESS--91cf30ccf285becb\n  rewrite-target:   /\n  target-proxy:     k8s-tp-default-my-INGRESS--91cf30ccf285becb\n  url-map:          k8s-um-default-my-INGRESS--91cf30ccf285becb\nEvents:\n  Type    Reason   Age               From                     Message\n  ----    ------   ----              ----                     -------\n  Normal  Service  2m (x11 over 1h)  loadbalancer-controller  no user specified default backend, using system default\n```", "```\n// allocate static IP as my-external-ip\n# gcloud compute addresses create my-external-ip \u2013global\n\n// check external-ip\n# gcloud compute addresses list\nNAME            REGION  ADDRESS        STATUS\nmy-external-ip          130.211.37.61  RESERVED\nAfter external IP is prepared, we could start launching our INGRESS now.\n# cat INGRESS-static-ip.yaml\napiVersion: extensions/v1beta1\nkind: INGRESS\nmetadata:\n  name: my-INGRESS-static-ip\n  annotations:\n    INGRESS.kubernetes.io/rewrite-target: /\n    kubernetes.io/INGRESS.global-static-ip-name: my-external-ip\nspec:\n  rules:\n    - http:\n        paths:\n          - path: /\n            # default backend\n            backend:\n              serviceName: nodeport-svc\n              servicePort: 8080\n          - path: /nginx\n            # nginx service\n            backend:\n              serviceName: nodeport-svc\n              servicePort: 8080\n          - path: /echoserver\n            # echoserver service\n            backend:\n              serviceName: echoserver-svc\n              servicePort: 8080\n\n# kubectl create -f INGRESS-static-ip.yaml\nINGRESS \"my-INGRESS-stati-ip\" created\n```", "```\n# kubectl describe INGRESS my-INGRESS\nName:             my-INGRESS\nNamespace:        default\nAddress:          130.211.37.61\nDefault backend:  default-http-backend:80 (10.32.2.3:8080)\nRules:\n  Host  Path  Backends\n  ----  ----  --------\n  *        /             nodeport-svc:8080 (<none>)\n        /nginx        nodeport-svc:8080 (<none>)        /echoserver   echoserver-svc:8080 (<none>)Annotations:\n  backends:         {\"k8s-be-31108--91cf30ccf285becb\":\"HEALTHY\",\"k8s-be-31250--91cf30ccf285becb\":\"HEALTHY\",\"k8s-be-32691--91cf30ccf285becb\":\"HEALTHY\"}  forwarding-rule:  k8s-fw-default-my-INGRESS--91cf30ccf285becb  rewrite-target:   /  target-proxy:     k8s-tp-default-my-INGRESS--91cf30ccf285becb  url-map:          k8s-um-default-my-INGRESS--91cf30ccf285becbEvents:  Type    Reason   Age               From                     Message  ----    ------   ----              ----                     -------  Normal  ADD      27m               loadbalancer-controller  default/my-INGRESS  Normal  CREATE   25m               loadbalancer-controller  ip: 130.211.37.61\n  Normal  Service  4m (x6 over 25m)  loadbalancer-controller  no user specified default backend, using system default\n```", "```\n# gcloud compute instance-groups list NAME LOCATION SCOPE NETWORK MANAGED INSTANCES gke-my-k8s-cluster-default-pool-36121894-grp us-central1-a zone k8s-network Yes 3 \n```", "```\n# gcloud container clusters resize my-k8s-cluster --size 5 --zone us-central1-a --node-pool default-pool\nPool [default-pool] for [my-k8s-cluster] will be resized to 5.\nDo you want to continue (Y/n)?  y\nResizing my-k8s-cluster...done.\nUpdated [https://container.googleapis.com/v1/projects/kubernetes-cookbook/zones/us-central1-a/clusters/my-k8s-cluster].\n# kubectl get nodes\nNAME                                               STATUS    ROLES     AGE       VERSION\ngke-my-k8s-cluster-default-pool-36121894-04rv      Ready     <none>    6h        v1.9.2-gke.1\ngke-my-k8s-cluster-default-pool-36121894-71wg      Ready     <none>    6h        v1.9.2-gke.1\ngke-my-k8s-cluster-default-pool-36121894-8km3      Ready     <none>    39s       v1.9.2-gke.1\ngke-my-k8s-cluster-default-pool-36121894-9j9p      Ready     <none>    31m       v1.9.2-gke.1\ngke-my-k8s-cluster-default-pool-36121894-9jmv      Ready     <none>    36s       v1.9.2-gke.1\n```", "```\n# cat super-nginx.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: super-nginx\n  labels:\n    app: nginx\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: nginx\n  template:\n    metadata:\n      labels:\n        app: nginx\n    spec:\n      containers:\n      - name: nginx\n        image: nginx\n        resources:\n          requests:\n            memory: 1024Mi \n\n// create super nginx deployment\n# kubectl create -f super-nginx.yaml\ndeployment \"super-nginx\" created\n\n# kubectl get pods\nNAME                           READY     STATUS    RESTARTS   AGE\nsuper-nginx-df79db98-5vfmv      0/1       Pending   0          10s\n# kubectl describe po super-nginx-779494d88f-74xjp\nName:           super-nginx-df79db98-5vfmv\nNamespace:      default\nNode:           <none>\nLabels:         app=nginx\n                pod-template-hash=89358654\nAnnotations:    kubernetes.io/limit-ranger=LimitRanger plugin set: cpu request for container nginx\nStatus:         PendingIP:\nControlled By:  ReplicaSet/super-nginx-df79db98\n...\nEvents:\n  Type     Reason            Age                From               Message\n  ----     ------            ----               ----               -------\n  Warning  FailedScheduling  11s (x5 over 18s)  default-scheduler  0/5 nodes are available: 5 Insufficient memory.\n```", "```\n// create a node pool named larger-mem-pool with n1-standard-1 instance type\n# gcloud container node-pools create larger-mem-pool --cluster my-k8s-cluster --machine-type n1-standard-1 --num-nodes 2 --tags private --zone us-central1-a --scopes=storage-rw,compute-ro\n...\nCreating node pool larger-mem-pool...done.\nCreated [https://container.googleapis.com/v1/projects/kubernetes-cookbook/zones/us-central1-a/clusters/my-k8s-cluster/nodePools/larger-mem-pool].\nNAME             MACHINE_TYPE   DISK_SIZE_GB  NODE_VERSION\nlarger-mem-pool  n1-standard-1  100           1.9.2-gke.1\n\n// check node pools\n# gcloud container node-pools list --cluster my-k8s-cluster --zone us-central1-a\nNAME             MACHINE_TYPE   DISK_SIZE_GB  NODE_VERSION\ndefault-pool     f1-micro       100           1.9.2-gke.1\nlarger-mem-pool  n1-standard-1  100           1.9.2-gke.1\n\n// check current nodes\n# kubectl get nodes\nNAME                                               STATUS    ROLES     AGE       VERSION\ngke-my-k8s-cluster-default-pool-36121894-04rv      Ready     <none>    7h        v1.9.2-gke.1\ngke-my-k8s-cluster-default-pool-36121894-71wg      Ready     <none>    7h        v1.9.2-gke.1\ngke-my-k8s-cluster-default-pool-36121894-8km3      Ready     <none>    9m        v1.9.2-gke.1\ngke-my-k8s-cluster-default-pool-36121894-9j9p      Ready     <none>    40m       v1.9.2-gke.1\ngke-my-k8s-cluster-default-pool-36121894-9jmv      Ready     <none>    9m        v1.9.2-gke.1\ngke-my-k8s-cluster-larger-mem-pool-a51c8da3-f1tb   Ready     <none>    1m        v1.9.2-gke.1\ngke-my-k8s-cluster-larger-mem-pool-a51c8da3-scw1   Ready     <none>    1m        v1.9.2-gke.1\n```", "```\n# kubectl get pods\nNAME                         READY     STATUS    RESTARTS   AGE\nsuper-nginx-df79db98-5vfmv   1/1       Running   0          23m\n```", "```\n// check the event of super nginx\n# kubectl describe pods super-nginx-df79db98-5vfmv\n...\nEvents:\n  Warning  FailedScheduling       3m (x7 over 4m)     default-scheduler                                          0/5 nodes are available: 5 Insufficient memory.\n  Normal   Scheduled              1m                  default-scheduler                                          Successfully assigned super-nginx-df79db98-5vfmv to gke-my-k8s-cluster-larger-mem-pool-a51c8da3-scw1\n  Normal   SuccessfulMountVolume  1m                  kubelet, gke-my-k8s-cluster-larger-mem-pool-a51c8da3-scw1  MountVolume.SetUp succeeded for volume \"default-token-bk8p2\"\n  Normal   Pulling                1m                  kubelet, gke-my-k8s-cluster-larger-mem-pool-a51c8da3-scw1  pulling image \"nginx\"\n  Normal   Pulled                 1m                  kubelet, gke-my-k8s-cluster-larger-mem-pool-a51c8da3-scw1  Successfully pulled image \"nginx\"\n  Normal   Created                1m                  kubelet, gke-my-k8s-cluster-larger-mem-pool-a51c8da3-scw1  Created container\n  Normal   Started                1m                  kubelet, gke-my-k8s-cluster-larger-mem-pool-a51c8da3-scw1  Started container\n```", "```\n# cloud container node-pools create larger-mem-pool --cluster my-k8s-cluster --machine-type n1-standard-1 --tags private --zone us-central1-a --scopes=storage-rw,compute-ro --enable-autoscaling --min-nodes 1 --max-nodes 5\n...\nCreating node pool larger-mem-pool...done.\nCreated [https://container.googleapis.com/v1/projects/kubernetes-cookbook/zones/us-central1-a/clusters/my-k8s-cluster/nodePools/larger-mem-pool].\nNAME             MACHINE_TYPE   DISK_SIZE_GB  NODE_VERSION\nlarger-mem-pool  n1-standard-1  100           1.9.2-gke.1\n```", "```\n#  kubectl get nodes\nNAME                                               STATUS    ROLES     AGE       VERSION\ngke-my-k8s-cluster-default-pool-36121894-04rv      Ready     <none>    8h        v1.9.2-gke.1\ngke-my-k8s-cluster-default-pool-36121894-71wg      Ready     <none>    8h        v1.9.2-gke.1\ngke-my-k8s-cluster-default-pool-36121894-8km3      Ready     <none>    1h        v1.9.2-gke.1\ngke-my-k8s-cluster-default-pool-36121894-9j9p      Ready     <none>    1h        v1.9.2-gke.1\ngke-my-k8s-cluster-default-pool-36121894-9jmv      Ready     <none>    1h        v1.9.2-gke.1\ngke-my-k8s-cluster-larger-mem-pool-a51c8da3-s6s6   Ready     <none>    15m       v1.9.2-gke.1\n```", "```\n// check current pods\n# kubectl get pods\nNAME                         READY     STATUS    RESTARTS   AGE\nsuper-nginx-df79db98-5q9mj   0/1       Pending   0          3m\nsuper-nginx-df79db98-72fcz   1/1       Running   0          3m\nsuper-nginx-df79db98-78lbr   0/1       Pending   0          3m\nsuper-nginx-df79db98-fngp2   1/1       Running   0          3m\n```", "```\n// check nodes status\n# kubectl get nodes\nNAME                                               STATUS     ROLES     AGE       VERSION\ngke-my-k8s-cluster-default-pool-36121894-04rv      Ready   <none>    8h        v1.9.2-gke.1\ngke-my-k8s-cluster-default-pool-36121894-71wg      Ready      <none>    8h        v1.9.2-gke.1\ngke-my-k8s-cluster-default-pool-36121894-9j9p      Ready      <none>    2h        v1.9.2-gke.1\ngke-my-k8s-cluster-larger-mem-pool-a51c8da3-d766   Ready      <none>    4m        v1.9.2-gke.1\ngke-my-k8s-cluster-larger-mem-pool-a51c8da3-gtsn   Ready      <none>    3m        v1.9.2-gke.1\ngke-my-k8s-cluster-larger-mem-pool-a51c8da3-s6s6   Ready      <none>    25m       v1.9.2-gke.1\n```", "```\n// check pods status\n# kubectl get pods\nNAME                         READY     STATUS    RESTARTS   AGE\nsuper-nginx-df79db98-5q9mj   1/1       Running   0          3m\nsuper-nginx-df79db98-72fcz   1/1       Running   0          3m\nsuper-nginx-df79db98-78lbr   1/1       Running   0          3m\nsuper-nginx-df79db98-fngp2   1/1       Running   0          3m\n```", "```\n// launch a multi-zone cluster with 2 nodes per zone.\n# gcloud container clusters create my-k8s-cluster --cluster-version 1.9.2-gke.1 --machine-type f1-micro --num-nodes 2 --network k8s-network --tags private --scopes=storage-rw,compute-ro --zone us-central1-a --additional-zones us-central1-b,us-central1-c\nCreating cluster my-k8s-cluster...done.\nCreated [https://container.googleapis.com/v1/projects/kubernetes-cookbook/zones/us-central1-a/clusters/my-k8s-cluster].\nTo inspect the contents of your cluster, go to: https://console.cloud.google.com/kubernetes/workload_/gcloud/us-central1-a/my-k8s-cluster?project=kubernetes-cookbook\nkubeconfig entry generated for my-k8s-cluster.\nNAME            LOCATION       MASTER_VERSION  MASTER_IP      MACHINE_TYPE  NODE_VERSION  NUM_NODES  STATUS\nmy-k8s-cluster  us-central1-a  1.9.2-gke.1     35.226.67.179  f1-micro      1.9.2-gke.1   6          RUNNING\n```", "```\n# kubectl get nodes\nNAME                                            STATUS    ROLES     AGE       VERSION\ngke-my-k8s-cluster-default-pool-068d31a2-q909   Ready     <none>    8m        v1.9.2-gke.1\ngke-my-k8s-cluster-default-pool-068d31a2-rqzw   Ready     <none>    8m        v1.9.2-gke.1\ngke-my-k8s-cluster-default-pool-64a6ead8-qf6z   Ready     <none>    8m        v1.9.2-gke.1\ngke-my-k8s-cluster-default-pool-64a6ead8-x8cc   Ready     <none>    8m        v1.9.2-gke.1\ngke-my-k8s-cluster-default-pool-798c4248-2r4p   Ready     <none>    8m        v1.9.2-gke.1\ngke-my-k8s-cluster-default-pool-798c4248-skdn   Ready     <none>    8m        v1.9.2-gke.1\n```", "```\n# gcloud compute instance-groups list NAME LOCATION SCOPE NETWORK MANAGED INSTANCES gke-my-k8s-cluster-default-pool-068d31a2-grp us-central1-a zone k8s-network Yes 2 gke-my-k8s-cluster-default-pool-64a6ead8-grp us-central1-c zone k8s-network Yes 2 gke-my-k8s-cluster-default-pool-798c4248-grp us-central1-b zone k8s-network Yes 2 \n```", "```\n# export CLOUDSDK_CONTAINER_USE_V1_API_CLIENT=false # gcloud config set container/use_v1_api false \nUpdated property [container/use_v1_api].\n```", "```\n# gcloud beta container clusters create my-k8s-cluster --cluster-version 1.9.2-gke.1 --machine-type f1-micro --num-nodes 2 --network k8s-network --tags private --scopes=storage-rw,compute-ro --region us-central1 \n\nCreating cluster my-k8s-cluster...done. Created [https://container.googleapis.com/v1beta1/projects/kubernetes-cookbook/zones/us-central1/clusters/my-k8s-cluster]. To inspect the contents of your cluster, go to: https://console.cloud.google.com/kubernetes/workload_/gcloud/us-central1/my-k8s-cluster?project=kubernetes-cookbook \n\nkubeconfig entry generated for my-k8s-cluster. NAME LOCATION MASTER_VERSION MASTER_IP MACHINE_TYPE NODE_VERSION NUM_NODES STATUS my-k8s-cluster us-central1 1.9.2-gke.1 35.225.71.127 f1-micro 1.9.2-gke.1 6 RUNNING\n```", "```\n// list instance groups\n# gcloud compute instance-groups list\nNAME                                          LOCATION       SCOPE  NETWORK      MANAGED  INSTANCES\ngke-my-k8s-cluster-default-pool-074ab64e-grp  us-central1-a  zone   k8s-network  Yes      2\ngke-my-k8s-cluster-default-pool-11492dfc-grp  us-central1-c  zone   k8s-network  Yes      2\ngke-my-k8s-cluster-default-pool-f2c90100-grp  us-central1-b  zone   k8s-network  Yes      2\n```", "```\n# gcloud container clusters upgrade my-k8s-cluster --zone us-central1-a --cluster-version 1.9.3-gke.0 \u2013master\nMaster of cluster [my-k8s-cluster] will be upgraded from version\n[1.9.2-gke.1] to version [1.9.3-gke.0]. This operation is long-running\n and will block other operations on the cluster (including delete)\nuntil it has run to completion.\nDo you want to continue (Y/n)?  y\nUpgrading my-k8s-cluster...done.\nUpdated [https://container.googleapis.com/v1/projects/kubernetes-cookbook/zones/us-central1-a/clusters/my-k8s-cluster].\n```", "```\n# kubectl version\n...\nServer Version: version.Info{Major:\"1\", Minor:\"9+\", GitVersion:\"v1.9.3-gke.0\", GitCommit:\"a7b719f7d3463eb5431cf8a3caf5d485827b4210\", GitTreeState:\"clean\", BuildDate:\"2018-02-16T18:26:01Z\", GoVersion:\"go1.9.2b4\", Compiler:\"gc\", Platform:\"linux/amd64\"}\n```", "```\n# kubectl get nodes\nNAME                                            STATUS    ROLES     AGE       VERSION\ngke-my-k8s-cluster-default-pool-978ca614-3jxx   Ready     <none>    8m        v1.9.2-gke.1\ngke-my-k8s-cluster-default-pool-978ca614-njrs   Ready     <none>    8m        v1.9.2-gke.1\ngke-my-k8s-cluster-default-pool-978ca614-xmlw   Ready     <none>    8m        v1.9.2-gke.1\n```", "```\n// perform node upgrades.\n# gcloud container clusters upgrade my-k8s-cluster --zone us-central1-a --cluster-version 1.9.3-gke.0\nAll nodes (3 nodes) of cluster [my-k8s-cluster] will be upgraded from\nversion [1.9.2-gke.1] to version [1.9.3-gke.0]. This operation is\nlong-running and will block other operations on the cluster (including\n delete) until it has run to completion.\nDo you want to continue (Y/n)?  y\nUpgrading my-k8s-cluster...done.\nUpdated [https://container.googleapis.com/v1/projects/kubernetes-cookbook/zones/us-central1-a/clusters/my-k8s-cluster].\n```"]
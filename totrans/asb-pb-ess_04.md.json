["```\n        {{ nginx_port }}\n    ```", "```\n**$ ansible -i customhosts www -m setup | less**\n192.168.61.12 | success >> {\n  \"ansible_facts\": {\n    \"ansible_all_ipv4_addresses\": [\n      \"10.0.2.15\",\n      \"192.168.61.12\"\n    ],\n    \"ansible_architecture\": \"i386\",\n    \"ansible_bios_date\": \"12/01/2006\",\n    \"ansible_cmdline\": {\n      \"BOOT_IMAGE\": \"/vmlinuz-3.5.0-23-generic\",\n      \"quiet\": true,\n      \"ro\": true,\n      \"root\": \"/dev/mapper/vagrant-root\"\n    },\n    \"ansible_distribution\": \"Ubuntu\",\n    \"ansible_distribution_major_version\": \"12\",\n    \"ansible_distribution_version\": \"12.04\",\n    \"ansible_domain\": \"vm\",\n    \"ansible_fqdn\": \"vagrant.vm\",\n    \"ansible_hostname\": \"vagrant\",\n    \"ansible_nodename\": \"vagrant\",\n    \"ansible_os_family\": \"Debian\",\n    \"ansible_pkg_mgr\": \"apt\",\n    \"ansible_processor\": [\n      \"GenuineIntel\",\n      \"Intel(R) Core(TM) i5-3210M CPU @ 2.50GHz\"\n    ],\n    \"ansible_processor_cores\": 1,\n    \"ansible_processor_count\": 2,\n    \"ansible_processor_threads_per_core\": 1,\n    \"ansible_processor_vcpus\": 2,\n    \"ansible_product_name\": \"VirtualBox\",\n  }\n}\n```", "```\n**$ ansible -i customhosts www -m facter | less**\n\n```", "```\n      nginx_port: 80\n```", "```\n       port: 80\n       user: www-data\n```", "```\n    nginx_listners:\n      - '127.0.0.1:80'\n      - '192.168.4.5:80'\n```", "```\n    **$ mkdir roles/nginx/templates**\n    **$ mkdir roles/nginx/defaults**\n\n    ```", "```\n            server {\n                     listen       80;\n                     server_name  localhost; \n                     location / {\n                        root   /usr/share/nginx/html;\n                        index  index.html;\n                   }\n             }\n    ```", "```\n        Template Snippets:\n          listen {{ nginx_port }} ;\n          root   {{ nginx_root }};\n          index  {{ nginx_index }};\n\n        Variables:\n          nginx_port: 80\n          nginx_root: /usr/share/nginx/html\n          nginx_index: index.html\n    ```", "```\n    **$ ansible -i customhosts www -m setup | less**\n\n    ```", "```\n    **$ ansible -i customhosts www -m setup | grep -i hostname**\n\n      \"ansible_hostname\": \"vagrant\",\n      \"ohai_hostname\": \"vagrant\",\n    ```", "```\n      server_name  {{ ansible_hostname }},\n    ```", "```\n    #roles/nginx/templates/default.conf.j2\n    server {\n        listen       {{ nginx_port }};\n        server_name  {{ ansible_hostname }};\n\n        location / {\n            root   {{ nginx_root }};\n            index  {{ nginx_index }};\n        }\n    }\n    ```", "```\n    ---\n    #file: roles/nginx/defaults/main.yml\n    nginx_port: 80\n    nginx_root: /usr/share/nginx/html\n    nginx_index: index.html\n    ```", "```\n    **$ rm roles/nginx/files/default.conf**\n\n    ```", "```\n    **$ ansible-playbook -i customhosts site.yml**\n\n    ```", "```\n**$ ansible-galaxy init --init-path roles/ mysql**\n\n```", "```\n---\ngalaxy_info:\n  author: Gourav Shah\n  description: MySQL Database Role\n  company: PACKT\n  min_ansible_version: 1.4\n  platforms:\n  - name: EL\n    versions:\n      - all\n  - name: Ubuntu\n    versions:\n      - all\n  categories:\n  - database:sql\n```", "```\n---\n#roles/mysql/defaults/main.yml\nmysql_user: mysql\nmysql_port: 3306\nmysql_datadir: /var/lib/mysql\nmysql_bind: 127.0.0.1\nmysql_pkg: mysql-server\nmysql_pid: /var/run/mysqld/mysqld.pid\nmysql_socket: /var/run/mysqld/mysqld.sock\nmysql_cnfpath: /etc/mysql/my.cnf\nmysql_service: mysql\n```", "```\n---\n# RedHat Specific Configs.\n# roles/mysql/vars/RedHat.yml\nmysql_socket: /var/lib/mysql/mysql.sock\nmysql_cnfpath: /etc/my.cnf\nmysql_service: mysqld\nmysql_bind: 0.0.0.0\n```", "```\n**# From our top level dir, which also holds site.yml**\n**$ mkdir group_vars**\n**$ touch group_vars/all**\n\n```", "```\nmysql_bind: \"{{ ansible_eth0.ipv4.address }}\"\n```", "```\n---\n# This is main tasks file for mysql role\n# filename: roles/mysql/tasks/main.yml\n# Load vars specific to OS Family. \n- include_vars: \"{{ ansible_os_family }}.yml\"\n  when: ansible_os_family != 'Debian'\n\n- include: install_RedHat.yml\n  when: ansible_os_family == 'RedHat'\n\n- include: install_Debian.yml\n  when: ansible_os_family == 'Debian'\n\n- include: configure.yml\n- include: service.yml\n```", "```\n**$ vim roles/mysql/tasks/install_Debian.yml**\n\n```", "```\n---\n# filename: roles/mysql/tasks/install_Debian.yml\n  - name: install mysql server\n    apt:\n      name:\"{{ mysql_pkg }}\"\n      update_cache:yes\n\n**$ vim roles/mysql/tasks/install_Redhat.yml**\n\n```", "```\n---\n# filename: roles/mysql/tasks/install_RedHat.yml\n- name: install mysql server\n   yum:\n     name:\"{{ mysql_pkg }}\"\n     update_cache:yes\n```", "```\n    **$ touch roles/mysql/templates/my.cnf.j2**\n\n    ```", "```\n    # Notice:This file is being managed by Ansible\n    # Any manual updates will be overwritten\n    # filename: roles/mysql/templates/my.cnf.j2\n    [mysqld]\n    user = {{ mysql_user | default(\"mysql\") }}\n    pid-file\t = {{ mysql_pid }}\n    socket = {{ mysql_socket }}\n    port = {{ mysql_port }}\n    datadir = {{ mysql_datadir }}\n    bind-address = {{ mysql_bind }}\n    ```", "```\n---\n# filename: roles/mysql/tasks/configure.yml\n - name: create mysql config\n   template: src=\"my.cnf\" dest=\"{{ mysql_cnfpath }}\" mode=0644\n   notify:\n    - restart mysql service\n```", "```\n**$ touch roles/mysql/tasks/service.yml**\n\n```", "```\n---\n# filename: roles/mysql/tasks/service.yml\n - name: start mysql server\n   service: name=\"{{ mysql_service }}\" state=started\n```", "```\n**$ touch roles/mysql/handlers/main.yml**\n\n```", "```\n---\n# handlers file for mysql\n# filename: roles/mysql/handlers/main.yml\n- name: restart mysql service\n  service: name=\"{{ mysql_service }}\" state=restarted\n```", "```\n**$ touch db.yml**\n\n```", "```\n---\n# Playbook for Database Servers\n# filename: db.yml\n- hosts: db\n  remote_user: vagrant\n  sudo: yes\n  roles:\n    - { role: mysql, mysql_bind: \"{{ ansible_eth1.ipv4.address }}\" }\n```", "```\n[db]\n192.168.61.11 ansible_ssh_user=vagrant ansible_ssh_private_key_file=/vagrant/insecure_private_key\n192.168.61.14 ansible_ssh_user=vagrant ansible_ssh_private_key_file=/vagrant/insecure_private_key\n```", "```\n---\n# This is a sitewide playbook\n# filename: site.yml\n- include: www.yml \n- include: db.yml\n```", "```\n**$ ansible-playbook -i customhosts site.yml**\n\n```", "```\n**ansible-playbook -i customhosts db.yml  -e mysql_bind=127.0.0.1**\n\n```"]
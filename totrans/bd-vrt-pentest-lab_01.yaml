- en: Chapter 1. Introducing Penetration Testing
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第1章 渗透测试简介
- en: 'In this chapter, we will discuss the role that pen testing plays in the professional
    security testing framework. We will discuss the following topics:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将讨论渗透测试在专业安全测试框架中的作用。我们将讨论以下主题：
- en: Define security testing
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 定义安全测试
- en: An abstract security testing methodology
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个抽象的安全测试方法论
- en: Myths and misconceptions about pen testing
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 关于渗透测试的神话和误解
- en: If you have been doing penetration testing for some time and are very familiar
    with the methodology and concept of professional security testing, you can skip
    this chapter, or just skim it, but you might learn something new or at least a
    different approach to penetration testing. We will establish some fundamental
    concepts in this chapter.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您已经进行了一段时间的渗透测试，并且对专业安全测试的方法和概念非常熟悉，您可以跳过本章，或者只是粗略地看一下，但您可能会学到一些新东西，或者至少对渗透测试有不同的看法。我们将在本章建立一些基本概念。
- en: Security testing
  id: totrans-6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安全测试
- en: 'If you ask 10 consultants to define what security testing is today, you are
    more than likely to get a variety of responses. If we refer to Wikipedia, their
    definition states:'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您询问10位顾问今天如何定义安全测试，您很可能会得到各种回答。如果我们参考维基百科，他们的定义是：
- en: '*"Security testing is a process to determine that an information system protects
    and maintains functionality as intended."*'
  id: totrans-8
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: “安全测试是一个确定信息系统是否按预期保护和维护功能的过程。”
- en: In my opinion, this is the most important aspect of penetration testing. Security
    is a process and not a product. I would also like to add that it is a methodology
    and not a product.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 在我看来，这是渗透测试中最重要的方面。安全是一个过程，而不是一个产品。我还想补充一点，它是一种方法论，而不是一个产品。
- en: 'Another component to add to our discussion is the point that security testing
    takes into account the main areas of a security model; a sample of this is as
    follows:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 我们讨论的另一个组成部分是，安全测试考虑了安全模型的主要领域；以下是一个示例：
- en: Authentication
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 认证
- en: Authorization
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 授权
- en: Confidentiality
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 保密性
- en: Integrity
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 完整性
- en: Availability
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可用性
- en: Non-repudiation
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不可否认
- en: Each one of these components has to be considered when an organization is in
    the process of securing their environment. Each one of these areas in itself has
    many subareas that also have to be considered when it comes to building a secure
    architecture. The takeaway is that when we are testing security, we have to address
    each of these areas.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 在组织进行环境安全保护的过程中，每个组成部分都必须被考虑。每个领域本身都有许多子领域，在构建安全架构时也必须考虑到。重点是，当我们测试安全性时，我们必须处理这些领域中的每一个。
- en: Authentication
  id: totrans-18
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 认证
- en: It is important to note that almost all systems and/or networks of today have
    some form of authentication and as such this is usually the first area we secure.
    This could be something as simple as users selecting a complex password or adding
    additional factors to the authentication such as a token, biometric, or certificates.
    No single factor of authentication is considered to be secure in today's networks.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 需要注意的是，今天几乎所有的系统和/或网络都具有某种形式的认证，因此这通常是我们首先保护的领域。这可能是用户选择复杂密码或添加额外因素到认证中，比如令牌、生物特征或证书等。在今天的网络中，没有单一的认证因素被认为是安全的。
- en: Authorization
  id: totrans-20
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 授权
- en: The concept of authorization is often overlooked as it is assumed and is not
    a component of some security models. This is one approach to take, but it is preferred
    to include it in most testing models. The concept of authorization is essential
    as it is how we assign the rights and permissions to access a resource, and we
    would want to ensure its security. Authorization allows us to have different types
    of users with separate privilege levels to coexist within a system.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 授权的概念经常被忽视，因为它被假定为某些安全模型的组成部分。这是一种方法，但更倾向于在大多数测试模型中包含它。授权的概念是至关重要的，因为这是我们分配访问资源的权利和权限的方式，我们希望确保其安全性。授权允许我们在系统中存在不同类型的用户，并具有不同的特权级别。
- en: Confidentiality
  id: totrans-22
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 保密性
- en: The concept of confidentiality is the assurance that something we want to be
    protected on the machine or network is safe and not at the risk of being compromised.
    This is made harder by the fact that the protocol (TCP/IP) running the Internet
    today was developed in the early 1970s. At that time, the Internet was used on
    just a few computers, and now that the Internet has grown to the size it is today
    and as we are still running the same protocol from those early days, it makes
    it more difficult to preserve confidentiality.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 保密性的概念是我们希望在计算机或网络上受到保护的东西是安全的，不会有被破坏的风险。由于今天运行互联网的协议（TCP/IP）是在20世纪70年代初开发的，这使得保密性变得更加困难。那时，互联网只在少数计算机上使用，现在互联网已经发展到今天的规模，而我们仍在使用那些早期的协议，这使得保密性变得更加困难。
- en: It is important to note that when the developers created the protocol, the network
    was very small and there was an inherent sense of trust with the person you potentially
    could be communicating. This sense of trust is what we continue to fight from
    a security standpoint today. The concept from that early creation was, and still
    is, that you could trust data when it is received from a reliable source. We know
    that the Internet is now of a huge size. However, this is definitely not the case.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 需要注意的是，当开发人员创建协议时，网络规模很小，并且与潜在通信对象存在固有的信任感。这种信任感是我们今天从安全角度继续对抗的。从早期的创造中得出的概念是，当数据来自可靠来源时，你可以信任数据。我们知道现在互联网规模很大。然而，情况绝对不是这样。
- en: Integrity
  id: totrans-25
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 完整性
- en: Integrity is similar to confidentiality. Here, we are concerned with the compromise
    of the information and with the accuracy of the data and the fact that it is not
    modified in transit or from its original form. A common way of doing this is to
    use a hashing algorithm to validate that the file is unaltered.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
- en: Availability
  id: totrans-27
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: One of the most difficult things to secure is the availability, that is, the
    right to have a service when required. The irony about "availability" is that
    when a particular resource is available to one user, then it is available to all.
    Everything seems perfect from the perspective of an honest/legitimate user; however,
    not all users are honest/legitimate due to the sheer fact that resources are finite
    and they can be flooded or exhausted. Hence, it is all the more difficult to protect
    this area.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
- en: Non-repudiation
  id: totrans-29
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The non-repudiation statement makes the claim that a sender cannot deny sending
    something; consequently, this is the one I usually have the most trouble with.
    We know that a computer system can be and/or has been compromised many times and
    also the art of spoofing is not a new concept. With these facts in our minds,
    the claim that "we can guarantee the origin of a transmission by a particular
    person from a particular computer" is not entirely accurate.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
- en: As we do not know the state of the machine, whether the machine is secure and
    not compromised, this might be an accurate claim. However, to make this claim
    in the networks that we have today would be a very difficult thing to do.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
- en: All it takes is one compromised machine and then the theory that "you can guarantee
    the sender" goes out the window. We will not cover each of the components of security
    testing in detail here because this is beyond the scope of what we are trying
    to achieve. The point we want to get across in this section is that security testing
    is the concept of looking at each and every component of security and addressing
    them by determining the amount of risk an organization has from them and then
    mitigating that risk.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
- en: Abstract testing methodology
  id: totrans-33
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: As mentioned previously, we concentrate on a process and apply that to our security
    components when we go about security testing. For this, we describe an abstract
    methodology here. We shall cover a number of methodologies and their components
    in great detail in [Chapter 4](ch04.html "Chapter 4. Identifying Range Architecture"),
    *Identifying Range Architecture*, where we will identify a methodology by exploring
    the available references for testing.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
- en: 'We will define our testing methodology, which consists of the following steps:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
- en: Planning
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Nonintrusive target search
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Intrusive target search
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Data analysis
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Report
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Planning
  id: totrans-41
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'This is a crucial step for professional testing, but unfortunately, it is one
    of the steps that is rarely given the time that is essentially required. There
    are a number of reasons for this; however, the most common one is the budget.
    Clients do not want to provide much time to a consultant to plan their testing.
    In fact, planning is usually given a very small portion of the time in the contract
    due to this reason. Another important point to note on planning is that a potential
    adversary will spend a lot of time on it. There are two things that a tester should
    tell clients with respect to this step, and that is there are two things that
    a professional tester cannot do that an attacker can, and they are as follows:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
- en: Six to nine months of planning
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Break the law
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: I could break the law I suppose and go to jail but it is not something that
    I find appealing and as such am not going to do it. Additionally, being a certified
    hacker and licensed penetration tester you are bound to an oath of ethics and
    I am not sure but I believe that breaking the law while testing is a violation
    of this code of ethics.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
- en: Nonintrusive target search
  id: totrans-46
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'There are many names that you will hear for nonintrusive target search. Some
    of these are open source intelligence, public information search, and cyber intelligence.
    Regardless of the name you use, they all come down to the same thing, that is,
    using public resources to extract information about the target or company you
    are researching. There are a plethora of tools that are available for this. We
    will briefly discuss the following tools to get an idea of the concept and those
    who are not familiar with them can try them out on their own:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 非侵入式目标搜索有许多名字。其中一些是开源情报、公共信息搜索和网络情报。无论你使用什么名字，它们都归结为同一件事，即使用公共资源来提取有关你正在研究的目标或公司的信息。有大量的工具可用于此。我们将简要讨论以下工具，以了解概念，那些不熟悉它们的人可以自行尝试：
- en: 'NsLookup:'
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'NsLookup:'
- en: 'The NsLookup tool is found as a standard program in the majority of the operating
    systems we encounter. It is a method of querying DNS servers to determine information
    about a potential target. It is very simple to use and provides a great deal of
    information. Open a **Command Prompt** window on your machine and enter `nslookup
    www.packt.net`. This will result in an output similar to that shown in the following
    screenshot:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: NsLookup工具在我们遇到的大多数操作系统中都作为标准程序存在。这是一种查询DNS服务器以确定有关潜在目标信息的方法。它非常简单易用，并提供大量信息。在您的计算机上打开一个**命令提示符**窗口，输入`nslookup
    www.packt.net`。这将导致类似于下面屏幕截图所示的输出：
- en: '![Nonintrusive target search](img/477-1_01_01.jpg)'
  id: totrans-50
  prefs: []
  type: TYPE_IMG
  zh: '![非侵入式目标搜索](img/477-1_01_01.jpg)'
- en: You can see in the preceding screenshot that the response to our command is
    the IP address of the DNS server for the domain **www.packt.net**. You can also
    see that their DNS has an IPv6 address configured. If we were testing this site,
    we would explore this further. Alternatively, we may also use another great DNS
    lookup tool called **dig.** For now, we will leave it alone and move to the next
    resource.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在上面的屏幕截图中看到我们的命令的响应是**www.packt.net**域的DNS服务器的IP地址。你还可以看到他们的DNS配置了IPv6地址。如果我们正在测试这个站点，我们会进一步探索这一点。或者，我们也可以使用另一个名为**dig**的出色的DNS查找工具。现在，我们将把它留下，转到下一个资源。
- en: 'Serversniff:'
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Serversniff:'
- en: 'The [www.serversniff.net](http://www.serversniff.net) website has a number
    of tools that we can use to gather information about a potential target. There
    are tools for **IP**, **Crypto**, **Nameserver**, **Webserver**, and so on. An
    example of the home page for this site is shown in the following screenshot:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: '[www.serversniff.net](http://www.serversniff.net)网站有许多工具，我们可以用来收集关于潜在目标的信息。有关**IP**、**加密**、**域名服务器**、**Web服务器**等工具。该站点的主页示例如下所示：'
- en: '![Nonintrusive target search](img/477-1_01_08.jpg)'
  id: totrans-54
  prefs: []
  type: TYPE_IMG
  zh: '![非侵入式目标搜索](img/477-1_01_08.jpg)'
- en: 'There are many tools we could show, but again we just want to briefly introduce
    tools for each area of our security testing. Open a **Command Prompt** window
    and enter `tracert www.microsoft.com`. In case you are using Microsoft Windows
    OS, you will observe that the command fails, as indicated in the following screenshot:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 有许多工具我们可以展示，但我们只想简要介绍我们安全测试的每个领域的工具。打开一个**命令提示符**窗口，输入`tracert www.microsoft.com`。如果你使用的是Microsoft
    Windows操作系统，你会发现命令失败，如下面的屏幕截图所示：
- en: '![Nonintrusive target search](img/477-1_01_09.jpg)'
  id: totrans-56
  prefs: []
  type: TYPE_IMG
  zh: '![非侵入式目标搜索](img/477-1_01_09.jpg)'
- en: 'The majority of you reading this book probably know why this is blocked, and
    for those of you who do not, it is because Microsoft has blocked the ICMP protocol
    and this is what the `tracert` command uses by default. It is simple to get past
    this because the server is running services and we can use that particular protocol
    to reach it, and in this case, that protocol is TCP. Go to the Serversniff page
    and navigate to **IP Tools** | **TCP Traceroute**. Then, enter `www.microsoft.com`
    in the **IP Address** or **Hostname box** field and conduct the traceroute. You
    will see it will now be successful, as shown in the following screenshot:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 阅读本书的大多数人可能知道为什么会被阻止，对于那些不知道的人，这是因为Microsoft已经阻止了ICMP协议，这是`tracert`命令默认使用的协议。很容易绕过这个问题，因为服务器正在运行服务，我们可以使用特定的协议来到达它，而在这种情况下，该协议是TCP。转到Serversniff页面，导航到**IP工具**
    | **TCP Traceroute**。然后，在**IP地址**或**主机名框**字段中输入`www.microsoft.com`并进行traceroute。你会看到现在它会成功，如下面的屏幕截图所示：
- en: '![Nonintrusive target search](img/477-1_01_19.jpg)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![非侵入式目标搜索](img/477-1_01_19.jpg)'
- en: 'Way Back Machine ([www.archive.org](http://www.archive.org)):'
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Way Back Machine ([www.archive.org](http://www.archive.org)):'
- en: 'This site is proof that anything that is ever on the Internet never leaves!
    There have been many assessments when a client will inform the team that they
    are testing a web server that is not placed into production, and when they are
    shown that the site has already been copied and stored, they are amazed to know
    that this actually does happen. I like to use the site to download some of my
    favorite presentations, tools, and so on that have been removed from a site and
    in some cases, the site no longer exists. As an example, one of the tools that
    is used to show a student the concept of steganography is the tool *Infostego*.
    This tool was released by Antiy Labs and it provided the student an easy-to-use
    tool to understand the concepts. Well if you go to their site at [www.antiy.net](http://www.antiy.net),
    you will discover that there is no mention of the tool. In fact, it will not be
    found in any of their pages. They now concentrate more on the antivirus market.
    A portion from their page is shown in the following screenshot:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 这个网站证明了互联网上的任何东西都不会消失！有许多评估中，客户会告诉团队他们正在测试一个尚未投入生产的Web服务器，当他们被告知该站点已经被复制和存储时，他们会惊讶地知道这实际上是发生了的。我喜欢使用该站点下载一些我喜欢的演示文稿、工具等，这些东西已经从一个站点上删除，有时甚至该站点已经不存在了。例如，用于向学生展示隐写术概念的工具之一是*Infostego*。这个工具是由Antiy
    Labs发布的，它为学生提供了一个易于使用的工具来理解这些概念。如果你去他们的网站[www.antiy.net](http://www.antiy.net)，你会发现根本没有提到这个工具。事实上，在他们的任何页面中都找不到它。他们现在更专注于防病毒市场。他们网站的一部分如下图所示：
- en: '![Nonintrusive target search](img/477-1_01_02.jpg)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![非侵入式目标搜索](img/477-1_01_02.jpg)'
- en: 'Now let''s use the power of the **Way Back Machine** to find our software.
    Open a browser of your choice and enter `www.archive.org`. The Way Back Machine
    is hosted here, and a sample of this site can be seen in the following screenshot:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们利用**Way Back Machine**的力量来找到我们的软件。打开你选择的浏览器，输入`www.archive.org`。Way Back
    Machine就托管在这里，这个站点的一个示例可以在下面的截图中看到：
- en: '![Nonintrusive target search](img/477-1_01_03.jpg)'
  id: totrans-63
  prefs: []
  type: TYPE_IMG
  zh: '![非侵入式目标搜索](img/477-1_01_03.jpg)'
- en: 'As indicated, there are 366 billion pages archived at the time this book was
    written. In the URL section, enter `www.antiy.net` and click on **Browse History**.
    This will result in the site searching its archives for the entered URL, and after
    a few moments, the results of the search will be displayed. An example of this
    is shown in the following screenshot:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 如所示，在撰写本书时，有3660亿个页面被归档。在URL部分输入`www.antiy.net`，然后点击**浏览历史**。这将导致该站点搜索其存档以查找输入的URL，几秒钟后，搜索结果将显示出来。下面的截图显示了一个示例：
- en: '![Nonintrusive target search](img/477-1_01_04.jpg)'
  id: totrans-65
  prefs: []
  type: TYPE_IMG
  zh: '![非侵入式目标搜索](img/477-1_01_04.jpg)'
- en: We know we do not want to access a page that has been recently archived, so
    to be safe, click on **2008**. This will result in the calendar being displayed,
    showing all of the dates in **2008** the site was archived. You can select any
    one that you want. An example of the archived site from December 18 is shown in
    the following screenshot. As you can see, the *Infostego* tool is available and
    you can even download it! Feel free to download and experiment with the tool if
    you like.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 我们知道我们不想访问最近归档的页面，所以为了安全起见，点击**2008**。这将导致显示日历，显示站点在**2008**年归档的所有日期。你可以选择任何一个你想要的。下面的截图显示了从12月18日归档的站点的示例。你可以看到*Infostego*工具是可用的，你甚至可以下载它！如果你愿意，可以随意下载并尝试使用这个工具。
- en: '![Nonintrusive target search](img/477-1_01_05.jpg)'
  id: totrans-67
  prefs: []
  type: TYPE_IMG
  zh: '![非侵入式目标搜索](img/477-1_01_05.jpg)'
- en: 'Shodanhq:'
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Shodanhq：
- en: 'The Shodan site is one of the most powerful cloud scanners we can use. You
    are required to register with the site to be able to perform the more advanced
    types of queries. It is highly recommended that you register at the site as the
    power of the scanner and the information you can discover is quite impressive,
    especially after the registration. The page that is presented once you log in
    is shown in the following screenshot:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: Shodan站点是我们可以使用的最强大的云扫描仪之一。你需要在该站点注册才能执行更高级的查询。强烈建议你在该站点注册，因为扫描仪的功能和你可以发现的信息相当令人印象深刻，特别是在注册后。登录后呈现的页面如下截图所示：
- en: '![Nonintrusive target search](img/477-1_01_06.jpg)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![非侵入式目标搜索](img/477-1_01_06.jpg)'
- en: 'The preceding screenshot shows the recently shared search queries as well as
    the most recent searches the logged-in user has conducted. This is another tool
    you should explore deeply if you are performing professional security testing.
    For now, we will look at one example and move on as we could write an entire book
    just on this tool. If you are logged in as a registered user, you can enter `iphone
    ru` in the search query window. This will return pages with iPhone in the query
    and mostly in Russia, but as with any tool, there will be some hits on other sites
    as well. An example of the results of this search is shown in the following screenshot:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的截图显示了最近共享的搜索查询，以及已登录用户进行的最近搜索。如果你正在进行专业安全测试，这是另一个你应该深入探索的工具。现在，我们将看一个例子，然后继续，因为我们可以写一本完整的书来介绍这个工具。如果你以注册用户身份登录，你可以在搜索查询窗口中输入`iphone
    ru`。这将返回包含iPhone的页面，大部分在俄罗斯，但像任何工具一样，也会在其他站点上有一些命中。下面的截图显示了这次搜索的结果示例：
- en: '![Nonintrusive target search](img/477-1_01_07.jpg)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
  zh: '![非侵入式目标搜索](img/477-1_01_07.jpg)'
- en: An example of the results of this search is shown
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 这次搜索的结果示例如下
- en: Intrusive target search
  id: totrans-74
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 侵入式目标搜索
- en: Intrusive target search is the step that starts the true hacker type activity.
    This is when you probe and explore the target network; consequently, ensure that
    you have the explicitly written permission to carry out this activity with you.
    Never perform an intrusive target search without permission as this written authorization
    is the only aspect which differentiates you from the malicious hacker. Without
    it, you are considered a criminal.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 侵入式目标搜索是开始真正的黑客活动的步骤。这是当你探测和探索目标网络的时候；因此，请确保你有明确书面的许可来进行这项活动。未经许可进行侵入式目标搜索是不允许的，因为这份书面授权是区分你和恶意黑客的唯一因素。没有它，你会被视为犯罪分子。
- en: 'Within this step, there are a number of components that further define the
    methodology, which are shown as follows:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一步中，有一些组成部分进一步定义了方法论，如下所示：
- en: 'Find live systems:'
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 查找活跃系统：
- en: No matter how good our skills are, we need to find systems that we can attack.
    This is accomplished by probing the network and looking for a response. One of
    the most popular tools to do this is the excellent open source tool nmap written
    by Fyodor. You can download nmap from [www.nmap.org](http://www.nmap.org) or you
    can use any number of toolkit distributions for the tool. We will use the exceptional
    penetration testing framework Kali Linux. You can download the distro from [www.kali.org](http://www.kali.org).
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 无论我们的技能有多好，我们都需要找到可以攻击的系统。这可以通过探测网络并寻找响应来实现。其中一个最流行的工具是由Fyodor编写的优秀的开源工具nmap。你可以从[www.nmap.org](http://www.nmap.org)下载nmap，或者你可以使用任何数量的工具包分发工具。我们将使用出色的渗透测试框架Kali
    Linux。你可以从[www.kali.org](http://www.kali.org)下载这个发行版。
- en: 'Regardless of which version of nmap you explore with, they all have similar,
    if not the same, command syntax. In a terminal or a command prompt window if you
    are running it on Windows OS, enter `nmap –sP <insert network IP address>`. The
    network we are scanning is the 192.168.177.0/24 network; yours most likely will
    be different. An example of this ping sweep command is shown in the following
    screenshot:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 无论你使用哪个版本的nmap，它们的命令语法都是相似的，如果不是完全相同的。在终端或命令提示符窗口（如果你在Windows OS上运行它）中，输入 `nmap
    –sP <插入网络IP地址>`。我们正在扫描的网络是192.168.177.0/24网络；你的可能会不同。这个ping扫描命令的示例显示在以下截图中：
- en: '![Intrusive target search](img/477-1_01_10.jpg)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![侵入式目标搜索](img/477-1_01_10.jpg)'
- en: We now have live systems on the network that we can investigate further.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在有了网络上的实时系统，可以进一步调查。
- en: 'Discover open ports:'
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 发现开放端口：
- en: Along the same lines that we have live systems, we next want to see what is
    open on these machines. A good analogy to a port is a door, that is, if the door
    is open, then I can approach the open door. There might be things that I have
    to do once I get to the door to gain access, but if it is open, then I know it
    is possible to get access, and if it is closed, then I know I cannot go through
    that door. This is the same as ports; if they are closed, then we cannot go into
    that machine using that door. We have a number of ways to check whether there
    are any open ports, and we will continue with the same theme and use nmap. We
    have machines that we have identified, so we do not have to scan the entire network
    as we did previously. We will only scan the machines that are currently in use.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 与我们有实时系统的情况类似，我们接下来想看看这些机器上有什么开放。端口的一个很好的类比是门，也就是说，如果门是开着的，那么我可以走向这扇开着的门。一旦我到达门口，可能还有一些事情要做才能进入，但如果门是开着的，那么我知道可以进入，如果门是关着的，那么我知道我不能通过那扇门。端口也是一样的；如果它们关闭了，那么我们就不能通过那个门进入那台机器。我们有很多种方法来检查是否有任何开放的端口，我们将继续使用相同的主题并使用nmap。我们已经确定了一些机器，所以不必像之前那样扫描整个网络。我们只扫描当前正在使用的机器。
- en: 'Additionally, one of those machines that is found is our own machine; therefore,
    we will not scan ourselves, we could, but it is not the best plan. The targets
    that are live on our network are 1, 2, and 254\. We can scan these by entering
    `nmap –sS 192.168.177.1,2,254`. For those of you who want to learn more about
    the different types of scans, you can refer to [http://nmap.org/book/man-port-scanning-techniques.html](http://nmap.org/book/man-port-scanning-techniques.html).
    Alternatively, you can use the `nmap –h` option to display a listing of options.
    The first portion of the scan result is shown in the following screenshot:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 另外，我们找到的其中一台机器是我们自己的机器；因此，我们不会扫描自己，虽然我们可以，但这不是最好的计划。我们网络上活跃的目标是1、2和254。我们可以通过输入
    `nmap –sS 192.168.177.1,2,254` 来扫描这些目标。对于那些想了解更多不同类型扫描的人，可以参考[http://nmap.org/book/man-port-scanning-techniques.html](http://nmap.org/book/man-port-scanning-techniques.html)。或者，你可以使用
    `nmap –h` 选项来显示选项列表。扫描结果的第一部分显示在以下截图中：
- en: '![Intrusive target search](img/477-1_01_11.jpg)'
  id: totrans-85
  prefs: []
  type: TYPE_IMG
  zh: '![侵入式目标搜索](img/477-1_01_11.jpg)'
- en: 'Discover services:'
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 发现服务：
- en: 'We now have live systems and openings that are on the machine. The next step
    is to determine what is running on these ports we have discovered. It is imperative
    that we identify what is running on the machine so that we can use it as we progress
    deeper into our methodology. We once again turn to nmap. In most command and terminal
    windows, there is a history available. Hopefully, this is the case for you and
    you access it with the arrow keys of the keyboard. For our network, we will enter
    `nmap –sV 192.168.177.1`. From our previous scan, we determined that the other
    machines have closed all their scanned ports; so to save time, we will not scan
    them again. An example of this scan can be seen in the following screenshot:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在有了在机器上运行的实时系统和开放端口。下一步是确定我们发现的这些端口上运行的是什么。必须确定机器上正在运行什么，以便在我们深入方法论时使用它。我们再次转向nmap。在大多数命令和终端窗口中，都有历史记录可用。希望你也是这样，你可以用键盘的箭头键访问它。对于我们的网络，我们将输入
    `nmap –sV 192.168.177.1`。根据我们之前的扫描，我们确定其他机器已关闭了所有扫描的端口；为了节省时间，我们将不再对它们进行扫描。这种扫描的示例可以在以下截图中看到：
- en: '![Intrusive target search](img/477-1_01_12.jpg)'
  id: totrans-88
  prefs: []
  type: TYPE_IMG
  zh: '![侵入式目标搜索](img/477-1_01_12.jpg)'
- en: An example of this scan can be seen
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 这种扫描的示例可以看到
- en: From the results, you can now see that we have additional information about
    the ports that are open on the target. We could use this information to search
    the Internet using some of the tools we covered earlier, or we could let a tool
    do it for us.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 从结果中，你现在可以看到我们对目标上开放的端口有更多的信息。我们可以使用这些信息来使用我们之前介绍的一些工具在互联网上搜索，或者我们可以让一个工具为我们做这件事。
- en: 'Enumeration:'
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 枚举：
- en: 'This is the process of extracting more information about the potential target
    to include the OS, usernames, machine names, and other details that we can discover.
    The latest release of nmap has a scripting engine that will attempt to discover
    a number of details and in fact, enumerate the system to some aspect. To process
    the enumeration with nmap, we use the `–A` option. Enter `nmap –A 192.168.177.1`
    in the command prompt. A reminder that you will have to enter your target address
    if it is different from ours. Also, this scan will take some time to complete
    and will generate a lot of traffic on the network. If you want an update, you
    can receive one at any time by pressing the Space bar. This command output is
    quite extensive, so a truncated version is shown in the following screenshot:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 这是提取有关潜在目标的更多信息的过程，包括操作系统、用户名、机器名称和其他我们可以发现的细节。nmap的最新版本有一个脚本引擎，将尝试发现许多细节，并实际上对系统进行枚举。要使用nmap进行枚举，我们使用
    `–A` 选项。在命令提示符中输入 `nmap –A 192.168.177.1`。提醒一下，如果你的目标地址与我们的不同，你将不得不输入你的目标地址。此外，这个扫描将需要一些时间来完成，并会在网络上产生大量的流量。如果你想要更新，你可以随时按空格键来获得更新。这个命令的输出非常广泛，所以以下截图显示了一个缩短版本：
- en: '![Intrusive target search](img/477-1_01_13.jpg)'
  id: totrans-93
  prefs: []
  type: TYPE_IMG
  zh: '![侵入式目标搜索](img/477-1_01_13.jpg)'
- en: As the screenshot shows, you have a great deal of information about the target,
    and you are quite ready to start the next phase of testing. Additionally, we have
    the OS correctly identified; we did not have that until this step.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 正如截图所示，你对目标有大量的信息，并且已经准备好开始测试的下一个阶段。此外，我们已经正确识别了操作系统；在这一步之前我们还没有。
- en: 'Identify vulnerabilities:'
  id: totrans-95
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 识别漏洞：
- en: After we have processed the steps to this point, we have information about the
    services and versions of the software that are running on the machine. We could
    take each version and search the Internet for vulnerabilities or we could use
    a tool. For our purposes, we will choose the latter. There are numerous vulnerability
    scanners out there in the market, and the one you select is largely a matter of
    personal preference. The commercial tools for the most part have a lot more information
    than the free and open source ones, so you will have to experiment and see which
    one you prefer.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们完成了到这一点的步骤之后，我们获得了有关机器上正在运行的软件的服务和版本的信息。我们可以针对每个版本搜索互联网上的漏洞，或者我们可以使用工具。对于我们的目的，我们将选择后者。市场上有许多漏洞扫描工具，你选择的工具在很大程度上取决于个人偏好。商业工具大多具有比免费和开源工具更多的信息，因此你需要进行实验，看看你更喜欢哪一个。
- en: 'We will be using Nexpose vulnerability scanner from Rapid7\. There is a community
    version of their tool that scans only a limited number of targets, but it is worth
    looking into. You can download Nexpose from [www.rapid7.com](http://www.rapid7.com).
    Once you have downloaded it, you will have to register and receive a key by e-mail
    to activate it. We will leave out the details on this and let you experience them
    on your own. Nexpose has a web interface, so once you have installed and started
    the tool, you have to access it. You access it by entering `https://localhost:3780`.
    It seems to take an extraordinary amount of time to initialize, but eventually,
    it will present you with a login page as shown in the following screenshot:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用Rapid7的Nexpose漏洞扫描工具。他们的工具有一个社区版本，只能扫描有限数量的目标，但是值得一试。你可以从[www.rapid7.com](http://www.rapid7.com)下载Nexpose。一旦你下载了它，你就必须注册并通过电子邮件接收一个密钥来激活它。我们将略过这些细节，让你自己去体验。Nexpose有一个Web界面，所以一旦你安装并启动了工具，你就必须访问它。你可以通过输入`https://localhost:3780`来访问它。它似乎需要很长时间来初始化，但最终，它会呈现给你一个登录页面，如下截图所示：
- en: '![Intrusive target search](img/477-1_01_14.jpg)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
  zh: '![侵入式目标搜索](img/477-1_01_14.jpg)'
- en: 'The credentials required for login would have been created during the installation.
    It is quite involved to set up a scan, and as we are just detailing the process
    and there is an excellent quick start guide, we will just move on to the results
    of the scan. We will have plenty of time to explore this area as the book progresses.
    A result of a typical scan is shown in the following screenshot:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 登录所需的凭证应该在安装过程中创建。设置扫描是相当复杂的，因为我们只是详细介绍了这个过程，并且有一个很好的快速入门指南，所以我们将直接转到扫描的结果。随着书的进展，我们将有足够的时间来探索这个领域。典型扫描的结果如下截图所示：
- en: '![Intrusive target search](img/477-1_01_15.jpg)'
  id: totrans-100
  prefs: []
  type: TYPE_IMG
  zh: '![侵入式目标搜索](img/477-1_01_15.jpg)'
- en: A result of a typical scan is shown
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 典型扫描的结果如下所示
- en: As you can see, the target machine is in a bad shape. One nice thing about Nexpose
    is the fact that as they also own metasploit; they will list the vulnerabilities
    that have a known exploit within metasploit.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 正如你所看到的，目标机器的情况很糟糕。Nexpose的一个好处是，由于他们也拥有metasploit；他们将列出在metasploit中已知的漏洞。
- en: 'Exploitation:'
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 利用：
- en: This is the step of security testing that gets all the press, and it is, in
    simple terms, the process of validating a discovered vulnerability. It is important
    to note that it is not an entirely successful process, some vulnerabilities will
    not have exploits and some will have exploits for a certain patch level of the
    OS but not for others. As we like to say, it is not an exact science, and in reality,
    it is a very minor part of professional security testing, but it is fun so we
    will briefly look at the process. We also like to say in security testing that
    we have to validate and verify everything a tool reports to you and this is what
    we try to do with exploitation. The point is that you are executing a piece of
    code on a client's machine and this code could cause damage. The most popular
    free tool for exploitation is metasploit, now owned by Rapid7\. There are entire
    books written on this tool, so we will just show the results of running the tools
    and exploiting a machine here.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 这是安全测试中备受关注的一步，简单来说，这是验证发现的漏洞的过程。需要注意的是，这并不是一个完全成功的过程，有些漏洞没有利用，有些漏洞只有针对某个补丁级别的操作系统才有利用。正如我们所说，这不是一门精确的科学，在现实中，这只是专业安全测试的一个非常小的部分，但它很有趣，所以我们将简要地看一下这个过程。我们在安全测试中还喜欢说，我们必须验证和核实工具向你报告的一切，这就是我们在利用中尝试做的。关键是你在客户的机器上执行了一段代码，这段代码可能会造成损害。最受欢迎的免费利用工具是metasploit，现在由Rapid7拥有。关于这个工具有整整一本书的内容，所以我们只会展示运行工具和利用机器的结果。
- en: 'The options that are available are shown in the following screenshot:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 可用的选项如下截图所示：
- en: '![Intrusive target search](img/477-1_01_16.jpg)'
  id: totrans-106
  prefs: []
  type: TYPE_IMG
  zh: '![侵入式目标搜索](img/477-1_01_16.jpg)'
- en: 'There is quite a bit of information in the options, but the option we need
    to cover is due to the fact that we are using the exploit for the vulnerability
    MS08-067, which is a vulnerability in the server service. It is one of the better
    options to use as it almost always works and you can exploit it over and over
    again. If you want to know more about this vulnerability, you can check it out
    at [http://technet.microsoft.com/en-us/security/bulletin/ms08-067](http://technet.microsoft.com/en-us/security/bulletin/ms08-067).
    As the options are set, we are ready to attempt the exploit and as indicated in
    the following screenshot, we are successful and have gained a shell on the target
    machine:'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 选项中有相当多的信息，但我们需要涵盖的选项是因为我们正在利用漏洞MS08-067，这是服务器服务中的一个漏洞。这是一个很好的选项，因为它几乎总是有效的，你可以一次又一次地利用它。如果你想了解更多关于这个漏洞的信息，你可以在[http://technet.microsoft.com/en-us/security/bulletin/ms08-067](http://technet.microsoft.com/en-us/security/bulletin/ms08-067)上查看。选项设置好后，我们准备尝试利用漏洞，如下一张截图所示，我们成功地在目标机器上获得了一个shell：
- en: '![Intrusive target search](img/477-1_01_17.jpg)'
  id: totrans-108
  prefs: []
  type: TYPE_IMG
  zh: '![侵入式目标搜索](img/477-1_01_17.jpg)'
- en: Data analysis
  id: totrans-109
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 数据分析
- en: 'Data analysis is often overlooked and can be a time-consuming process. This
    is the process that takes the most time to develop. Most testers can run tools,
    perform manual testing and exploitation, but the real challenge is taking all
    of the results and analyzing them. We will look at one example of this in the
    next screenshot. Take a moment and review the protocol analysis capture from the
    Wireskark tool. As an analyst, you need to know what the protocol analyzer is
    showing you. Do you know what exactly is happening? Do not worry, we will tell
    you after the screenshot. Take a minute and see if you can determine what the
    tool is reporting with the packets that are shown in the following screenshot:'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 数据分析经常被忽视，可能是一个耗时的过程。这是需要最多时间来开发的过程。大多数测试人员可以运行工具，进行手动测试和利用，但真正的挑战在于将所有结果进行分析。我们将在下一张截图中看一个例子。花点时间来审查Wireskark工具的协议分析捕获。作为分析师，你需要知道协议分析器正在向你展示什么。你知道到底发生了什么吗？不用担心，截图后我们会告诉你。花一分钟时间，看看你能否确定工具报告的是下一张截图中显示的数据包：
- en: '![Data analysis](img/477-1_01_18.jpg)'
  id: totrans-111
  prefs: []
  type: TYPE_IMG
  zh: '![数据分析](img/477-1_01_18.jpg)'
- en: See if you can determine what the tool is reporting with the packets that are
    shown
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 看看你能否确定工具报告的是显示的数据包
- en: From the previous screenshot, we observe that the machine at IP address **192.168.3.10**
    replies with an **ICMP** packet that is type 3, code 13\. In other words, the
    reason the packet is being rejected is because the communication is administratively
    filtered; furthermore, this tells us that there is a router in place, and it has
    an **Access Control List** (**ACL**) that is blocking the packet. Moreover, it
    tells us that the administrator is not following best practices to absorb packets
    and does not reply with any error messages as that can assist an attacker. This
    is just one small example of the data analysis step; there are many things you
    will encounter and many more that you will have to analyze to determine what is
    taking place in the tested environment. Remember that the smarter the administrator,
    the more challenging pen testing can become. This is actually a good thing for
    security!
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 从前面的截图中，我们观察到IP地址为**192.168.3.10**的机器回复了一个类型为3，代码为13的**ICMP**数据包。换句话说，数据包被拒绝是因为通信被行政过滤；此外，这告诉我们有一个路由器，并且它有一个阻止数据包的**访问控制列表**（**ACL**）。此外，这告诉我们管理员没有遵循最佳实践来吸收数据包，并且没有回复任何错误消息，因为那可能会帮助攻击者。这只是数据分析步骤的一个小例子；你将遇到许多事情，还有更多需要分析以确定在测试环境中发生了什么。记住，管理员越聪明，渗透测试就会变得更具挑战性。这对安全性来说实际上是一件好事！
- en: Reporting
  id: totrans-114
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 报告
- en: This is another area in testing that is often overlooked in training classes.
    This is unfortunate as it is one of the most important things you need to master.
    You have to be able to present a report of your findings to the client. These
    findings will assist them in improving their security posture and if they like
    the report, it is what they will most often share with partners and other colleagues.
    This is your advertisement for what separates you from the others. It showcases
    that not only do you know how to follow a systematic process and methodology of
    professional testing but also know how to put it into an output form that can
    serve as a reference for the clients.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: '这是培训课程中经常被忽视的另一个测试领域。这是不幸的，因为这是你需要掌握的最重要的事情之一。你必须能够向客户呈现你的发现报告。这些发现将帮助他们改善他们的安全状况，如果他们喜欢这份报告，这通常是他们与合作伙伴和其他同事分享的内容。这是你与其他人的区别的广告。它展示了你不仅知道如何遵循专业测试的系统化过程和方法论，还知道如何将其转化为可以作为客户参考的输出形式。 '
- en: 'At the end of the day, as professional security testers, we want to help our
    clients improve their security posture and this is where reporting comes in. There
    are many references for reports, so the only thing we will cover here is the handling
    of findings. There are two components we use when it comes to findings; the first
    is we provide a summary of findings in a table format so that the client can reference
    the findings early on in the report. The second is the detailed findings section.
    This is where we put all of the information about the finding. We rate it according
    to the severity, and we include the following data:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 最终，作为专业的安全测试人员，我们希望帮助客户改善他们的安全状况，这就是报告的作用。有许多关于报告的参考资料，所以我们在这里要涵盖的是发现的处理。在处理发现时，我们使用了两个组件；第一个是以表格形式提供发现摘要，以便客户可以在报告的早期参考发现。第二个是详细的发现部分。这是我们放置有关发现的所有信息的地方。我们根据严重程度对其进行评级，并包括以下数据：
- en: '**Description**: This is where we provide the description of the vulnerability,
    specifically what it is and what is affected.'
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**描述**：这是我们提供漏洞描述的地方，具体描述了漏洞是什么以及受到了什么影响。'
- en: '**Analysis/Exposure**: For this section, you want to show the client that you
    have done your research and not just repeating what the scanning tool told you.
    It is very important that you research a number of resources and write a good
    analysis of what the vulnerability is and an explanation of the exposure it poses
    to the client''s site.'
  id: totrans-118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**分析/暴露**：对于这一部分，您希望向客户展示您已经进行了研究，而不仅仅是重复扫描工具告诉您的内容。非常重要的是，您要研究多种资源，并对漏洞是什么以及对客户站点构成的威胁进行良好的分析和解释。'
- en: '**Recommendations**: We want to provide the client a reference to the patch
    that will help to mitigate the risk of this vulnerability. We never tell the client
    *not* to use it. We do not know what their policy is, and it might be something
    they have to have, to support their business. In these situations, it is our job
    as consultants to recommend and help the client determine the best way to either
    mitigate the risk or remove it. When a patch is not available, we provide a reference
    to potential workarounds until the patch is available.'
  id: totrans-119
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**建议**：我们希望为客户提供一个可以帮助减轻这种漏洞风险的补丁的参考。我们从不告诉客户*不*使用它。我们不知道他们的政策是什么，这可能是他们必须要支持他们的业务。在这些情况下，作为顾问，我们的工作是推荐并帮助客户确定减轻风险或消除风险的最佳方式。当补丁不可用时，我们提供潜在的解决方法的参考。'
- en: '**References**: If there are references such as a Microsoft bulletin number,
    CVE number, and so on, then this is where we would place it.'
  id: totrans-120
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**参考资料**：如果有微软公告编号、CVE编号等参考资料，那么这就是我们放置它的地方。'
- en: Myths and misconceptions of pen testing
  id: totrans-121
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 渗透测试的神话和误解
- en: After more than twenty years of performing professional security testing, I
    find it is amazing to know how many are confused about what a penetration test
    is. I have, on many occasions, been to a meeting and the client is convinced that
    they want a penetration test. However, when I explain exactly what one is, they
    look at me with a shocked look. So, what exactly is a penetration test? Remember
    our abstract methodology had a step for intrusive target search and part of that
    step was another methodology for scanning? Well, the last item in the scanning
    methodology, that being exploitation, is the step that is indicative of a penetration
    test. That one step is the validation of vulnerabilities, and this is what defines
    penetration testing. Again, it is not what most clients think when they bring
    a team in. The majority of them in reality want a vulnerability assessment. When
    you start explaining to them that you are going to run some exploit code and all
    these really cool things on their systems and/or networks, they usually are quite
    surprised. Most often, the client will want you to stop at the validation step.
    On some occasions, they will ask you to prove what you have found and then you
    might get to show the validation. I once was in a meeting with the stock market
    IT department of a foreign country, and when I explained what we were about to
    do with validation of vulnerabilities, the IT Director's reaction was "that is
    my stock broker records, and if we lose them, we lose a lot of money!". Hence,
    we did not perform the validation step in that test.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 在进行了二十多年的专业安全测试后，我发现很多人对渗透测试是什么感到困惑，这真是令人惊讶。我曾多次参加会议，客户坚信他们想要进行渗透测试。然而，当我准确解释了渗透测试是什么时，他们都震惊地看着我。那么，渗透测试到底是什么呢？还记得我们的抽象方法论中有一个侵入式目标搜索的步骤，而这一步骤的一部分是扫描的另一个方法论吗？嗯，扫描方法论的最后一项，也就是利用，就是渗透测试的标志性步骤。这一步就是漏洞验证，这就是渗透测试的定义。再次强调，这并不是大多数客户在引入团队时所想的。实际上，他们大多数想要的是漏洞评估。当您开始向他们解释您将在他们的系统和/或网络上运行一些利用代码和所有这些非常酷的东西时，他们通常会感到惊讶。大多数情况下，客户会要求您停在验证步骤。在某些情况下，他们会要求您证明您所发现的内容，然后您可能会展示验证。我曾经在一个外国国家的股票市场IT部门的会议上，当我解释我们将要进行的漏洞验证时，IT主管的反应是“那是我的股票经纪人记录，如果我们丢失了它们，我们将损失很多钱！”。因此，我们没有在那次测试中执行验证步骤。
- en: Summary
  id: totrans-123
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: 'In this chapter, we have defined security testing as it relates to this book,
    and we identified an abstract methodology that consists of the following steps:
    planning, nonintrusive target search, intrusive target search, data analysis,
    and reporting. More importantly, we expanded the abstract model when it came to
    the intrusive target search, and we defined within that a methodology for scanning.
    This consisted of identifying live systems, looking at the open ports, recovering
    the services, enumeration, identifying vulnerabilities, and finally exploitation.'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们已经定义了安全测试与本书的关系，并确定了一个包括以下步骤的抽象方法论：规划、非侵入式目标搜索、侵入式目标搜索、数据分析和报告。更重要的是，当涉及到侵入式目标搜索时，我们扩展了抽象模型，并在其中定义了一种扫描方法论。这包括识别活动系统、查看开放端口、恢复服务、枚举、识别漏洞，最后是利用。
- en: Furthermore, we discussed what a penetration test is and that it is a validation
    of vulnerabilities and that it is identified with one step in our scanning methodology.
    Unfortunately, most clients do not understand that when you validate vulnerabilities,
    it requires you to run code that could potentially damage a machine or even worse,
    damage their data. Due to this, most clients ask that not be a part of the test.
    We have created a baseline for what penetration testing is in this chapter, and
    we will use this definition throughout this book. In the next chapter, we will
    discuss the process of choosing your virtual environment.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，我们讨论了渗透测试是什么，以及它是漏洞验证的一部分，并且在我们的扫描方法论中有一个步骤来识别它。不幸的是，大多数客户并不理解，当您验证漏洞时，需要运行可能会损坏机器甚至更糟的数据的代码。由于这个原因，大多数客户要求不要参与测试。在本章中，我们已经为渗透测试创建了一个基准，并将在本书中使用这个定义。在下一章中，我们将讨论选择虚拟环境的过程。

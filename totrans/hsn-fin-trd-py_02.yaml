- en: '*Chapter 1*: Introduction to Algorithmic Trading'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '*第1章*：算法交易简介'
- en: In this chapter, we will take you through a brief history of trading and explain
    in which situations manual and algorithmic trading each make sense. Additionally,
    we will discuss financial asset classes, which are a categorization of the different
    types of financial assets. You will learn about the components of the modern electronic
    trading exchange, and, finally, we will outline the key components of an algorithmic
    trading system.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将带您简要了解交易的历史，并解释手动交易和算法交易在哪些情况下都是合理的。此外，我们将讨论金融资产类别，这是对不同类型的金融资产进行分类。您将了解现代电子交易交换的组成部分，最后，我们将概述算法交易系统的关键组成部分。
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下主题：
- en: Walking through the evolution of algorithmic trading
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 走过算法交易的演变
- en: Understanding financial asset classes
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 了解金融资产类别
- en: Going through the modern electronic trading exchange
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过现代电子交易交换
- en: Understanding the components of an algorithmic trading system
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 了解算法交易系统的组成部分
- en: Walking through the evolution of algorithmic trading
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 走过算法交易的演变
- en: The concept of trading one possession for another has been around since the
    beginning of time. In its earliest form, trading was useful for exchanging a less
    desirable possession for a more desirable possession. Eventually, with the passage
    of time, trading has evolved into participants trying to find a way to buy and
    hold trading instruments (that is, products) at prices perceived as lower than
    fair value in the hopes of being able to sell them in the future at a price higher
    than the purchase price. This **buy-low-and-sell-high principle** serves as the
    basis for all profitable trading to date; of course, how to achieve this is where
    the complexity and competition lies.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 自古以来，交易一种财产换取另一种财产的概念就存在。最早期，交易对于交换一个不太理想的财产换取一个更理想的财产是有用的。随着时间的推移，交易逐渐演变为参与者试图以低于公平价值的价格购买和持有交易工具（即产品），希望能够在未来以高于购买价格的价格出售它们。这种**低买高卖的原则**是迄今为止所有盈利交易的基础；当然，如何实现这一点是复杂和竞争的关键所在。
- en: Markets are driven by the **fundamental economic forces of supply and demand**.
    As demand increases without a commensurate increase in supply, or supply decreases
    without a decrease in demand, a commodity becomes scarce and increases in value
    (that is, its market price). Conversely, if demand drops without a decrease in
    supply, or supply increases without an increase in demand, a commodity becomes
    more easily available and less valuable (a lower market price). Therefore, the
    market price of a commodity should reflect the equilibrium price based on available
    supply (sellers) and available demand (buyers).
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 市场受到**供求基本经济力量**的驱动。如果需求增加而供应没有相应增加，或者供应减少而需求没有减少，一种商品就会变得稀缺并增值（即其市场价格）。相反，如果需求下降而供应没有减少，或者供应增加而需求没有增加，一种商品就会变得更容易获得并减值（即较低的市场价格）。因此，一种商品的市场价格应该反映出基于可用供应（卖方）和可用需求（买方）的均衡价格。
- en: 'There are many drawbacks to the **manual trading approach**, as follows:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: '**手动交易方法**存在许多缺点，如下：'
- en: Human traders are inherently slow at processing new market information, making
    them likely to miss information or to make errors in interpreting updated market
    data. This leads to bad trading decisions.
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 人类交易员在处理新的市场信息时本质上较慢，使他们可能会错过信息或在解释更新的市场数据时出错。这导致糟糕的交易决策。
- en: Humans, in general, are also prone to distractions and biases that reduce profits
    and/or generate losses. For example, the fear of losing money and the joy of making
    money also causes us to deviate from the optimal systematic trading approach,
    which we understand in theory but fail to execute in practice. In addition, people
    are also naturally and non-uniformly biased against profitable trades versus losing
    trades; for instance, human traders are quick to increase the amount of risk after
    profitable trades and slow down to decrease the amount of risk after losing trades.
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一般来说，人类也容易受到分心和偏见的影响，从而减少利润和/或产生损失。例如，对于失去金钱的恐惧和赚钱的喜悦也会导致我们偏离最佳的系统化交易方法，尽管我们在理论上理解，但在实践中却无法执行。此外，人们对盈利交易与亏损交易也天生具有不均匀的偏见；例如，人类交易员在盈利交易后很快增加风险的数量，而在亏损交易后减缓减少风险的数量。
- en: Human traders learn by experiencing market conditions, for example, by being
    present and trading live markets. So, they cannot learn from and **backtest**
    over historical market data conditions – an important advantage of automated strategies,
    as we will see later.
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 人类交易员通过经历市场条件来学习，例如，通过参与和交易实时市场。因此，他们无法从历史市场数据条件中学习和**回测**——这是自动化策略的一个重要优势，我们稍后将会看到。
- en: With the advent of technology, trading has evolved from pit trading carried
    out by yelling and signaling buy and sell orders all the way to using sophisticated,
    efficient, and fast computer hardware and software to execute trades, often without
    much human intervention. Sophisticated algorithmic trading software systems have
    replaced human traders and engineers, and mathematicians who build, operate, and
    improve these systems, known as **quants**, have risen to power.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 随着技术的发展，交易已经从通过大声呼喊和示意买卖订单进行的坑口交易演变为使用复杂、高效和快速的计算机硬件和软件执行交易，通常几乎没有太多人为干预。复杂的算法交易软件系统已经取代了人类交易员和工程师，而构建、运营和改进这些系统的数学家，被称为**量化交易员**，已经崛起。
- en: 'In particular, the key advantages of an **automated, computer-driven systematic/algorithmic
    trading approach** are as follows:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 特别是，**自动化、计算机驱动的系统/算法交易方法**的关键优势如下：
- en: Computers are extremely good at performing clearly defined and repetitive rule-based
    tasks. They can perform these tasks extremely quickly and can handle massive throughputs.
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 计算机非常擅长执行明确定义和重复的基于规则的任务。它们可以非常快速地执行这些任务，并且可以处理大规模的吞吐量。
- en: Additionally, computers do not get distracted, tired, or make mistakes (unless
    there is a software bug, which, technically, counts as a software developer error).
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 此外，计算机不会分心、疲倦或犯错（除非有软件错误，从技术上讲，这算作软件开发人员的错误）。
- en: Algorithmic trading strategies also have no emotions as far as trading through
    losses or profits; therefore, they can stick to a systematic trading plan no matter
    what.
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 算法交易策略在交易亏损或盈利时也没有情绪；因此，无论如何都可以坚持系统化的交易计划。
- en: All of these advantages make systematic algorithmic trading the perfect candidate
    to set up low-latency, high-throughput, scalable, and robust trading businesses.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 所有这些优势使系统算法交易成为建立低延迟、高吞吐量、可扩展和强大交易业务的完美候选者。
- en: 'However, algorithmic trading is not always better than manual trading:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，算法交易并不总是优于手动交易：
- en: Manual trading is better at dealing with significantly complex ideas and the
    complexities of real-world trading operations that are, sometimes, difficult to
    express as an automated software solution.
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 手动交易更擅长处理复杂的想法和真实世界交易操作的复杂性，有时很难用自动化软件解决。
- en: Automated trading systems require significant investments in time and R&D costs,
    while manual trading strategies are often significantly faster to get to market.
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 自动交易系统需要大量的时间和研发成本投入，而手动交易策略通常更快地进入市场。
- en: Algorithmic trading strategies are also prone to software development/operation
    bugs, which can have a significant impact on a trading business. Entire automated
    trading operations being wiped out in a matter of a few minutes is not unheard
    of.
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 算法交易策略也容易受到软件开发/操作错误的影响，这可能对交易业务产生重大影响。整个自动交易操作在几分钟内被清空并不罕见。
- en: Often, automated quantitative trading systems are not good at dealing with extremely
    unlikely events termed as **black swan** events, such as the LTCM crash, the 2010
    flash crash, the Knight Capital crash, and more.
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通常，自动量化交易系统不擅长处理极不可能事件，称为**黑天鹅**事件，例如LTCM崩盘、2010年闪崩、Knight Capital崩盘等。
- en: In this section, we learned about the history of trading and when automated/algorithmic
    is better than manual trading. Now, let's proceed toward the next section, where
    we will learn about the actual subject of trading categorized into financial asset
    classes.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们了解了交易的历史以及自动化/算法交易何时优于手动交易。现在，让我们继续前往下一节，在那里我们将了解交易的实际主题，分为金融资产类别。
- en: Understanding financial asset classes
  id: totrans-26
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 了解金融资产类别
- en: Algorithmic trading deals with the trading of financial assets. A financial
    asset is a non-physical asset whose value arises from contractual agreements.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 算法交易涉及金融资产的交易。金融资产是一种价值来源于合同协议的非实物资产。
- en: 'The major financial asset classes are as follows:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 主要的金融资产类别如下：
- en: '**Equities** (**stocks**): These allow market participants to invest directly
    in the company and become owners of the company.'
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**股票**（**股票**）：这允许市场参与者直接投资于公司并成为公司的所有者。'
- en: '**Fixed income** (**bonds**): These represent a loan made by the investor to
    a borrower (for instance, a government or a firm). Each bond has its end date
    when the principal of the loan is due to be paid back and, usually, either fixed
    or variable interest payments made by the borrower over the lifetime of the bond.'
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**固定收益**（**债券**）：这些代表投资者向借款人（例如政府或公司）提供的贷款。每张债券都有其到期日，到期时借款本金应偿还，并且通常由借款人在债券寿命期间支付固定或浮动的利息。'
- en: '**Real Estate Investment Trusts** (**REITs**): These are publicly traded companies
    that own or operate or finance income-producing real estate. These can be used
    as a proxy to directly invest in the housing market, say, by purchasing a property.'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**房地产投资信托基金**（**REITs**）：这些是上市公司，拥有、经营或融资产生收入的房地产。这可以用作直接投资于住房市场的代理，比如购买房产。'
- en: '**Commodities**: Examples include metals (silver, gold, copper, and more) and
    agricultural produce (wheat, corn, milk, and more). They are financial assets
    tracking the price of the underlying commodities.'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**大宗商品**：例如金属（银、金、铜等）和农产品（小麦、玉米、牛奶等）。它们是跟踪基础商品价格的金融资产。'
- en: '**Exchange-Traded Funds** (**ETFs**): An EFT is an exchange-listed security
    that tracks a collection of other securities. ETFs, such as SPY, DIA, and QQQ,
    hold equity stocks to track the larger well-known S&P 500, Dow Jones Industrial
    Average, and Nasdaq stock indices. ETFs such as **United States Oil Fund** (**USO**)
    track oil prices by investing in short-term WTI crude oil futures. ETFs are a
    convenient investment vehicle for investors to invest in a wide range of asset
    classes at relatively lower costs.'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**交易所交易基金**（**ETFs**）：ETF是一种上市证券，跟踪其他证券的集合。ETF，如SPY，DIA和QQQ，持有股票以跟踪更大的知名标普500，道琼斯工业平均和纳斯达克股票指数。像**美国石油基金**（**USO**）这样的ETF通过投资短期WTI原油期货来跟踪石油价格。ETF是投资者以相对较低的成本投资于各种资产类别的便利投资工具。'
- en: '**Foreign Exchange** (**FX**) between different currency pairs, the major ones
    being the **US Dollar** (**USD**), **Euro** (**EUR**), **Pound Sterling** (**GBP**),
    **Japanese Yen** (**JPY**), **Australian Dollar** (**AUD**), **New Zealand Dollar**
    (**NZD**), **Canadian Dollar** (**CAD**), **Swiss Franc** (**CHF**), **Norwegian
    Krone** (**NOK**), and **Swedish Krona** (**SEK**). These are often referred to
    as the G10 currencies.'
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**外汇**（**FX**）是不同货币对之间的交易，主要货币对包括**美元**（**USD**）、**欧元**（**EUR**）、**英镑**（**GBP**）、**日元**（**JPY**）、**澳大利亚元**（**AUD**）、**新西兰元**（**NZD**）、**加拿大元**（**CAD**）、**瑞士法郎**（**CHF**）、**挪威克朗**（**NOK**）和**瑞典克朗**（**SEK**）。这些通常被称为G10货币。'
- en: 'The key **Financial derivatives** are options and futures – these are complex
    leveraged derivative products that can magnify the risk as well as the reward:'
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 关键的**金融衍生品**是期权和期货 - 这些是复杂的杠杆衍生产品，可以放大风险和回报：
- en: a) **Futures** are financial contracts to buy or sell an asset at a predetermined
    future date and price.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: a) **期货**是在预定的未来日期和价格购买或出售资产的金融合同。
- en: b) **Options** are financial contracts giving their owner the right, but not
    the obligation, to buy or sell an underlying asset at a stated price (strike price)
    prior to or on a specified date.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: b) **期权**是金融合同，赋予其所有者在指定日期之前或之日有权利，但不是义务，以规定价格（行权价格）买入或卖出基础资产。
- en: In this section, we learned about the financial asset classes and their unique
    properties. Now, let's discuss the order types and exchange matching algorithms
    of modern electronic trading exchanges.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们了解了金融资产类别及其独特属性。现在，让我们讨论现代电子交易所的订单类型和交易所匹配算法。
- en: Going through the modern electronic trading exchange
  id: totrans-39
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 通过现代电子交易所
- en: The first trading exchange was the Amsterdam Stock Exchange, which began in
    1602\. Here, the trading happened in person. The applications of technology to
    trading included using pigeons, telegraph systems, Morse code, telephones, computer
    terminals, and nowadays, high-speed computer networks and state-of-the-art computers.
    With the passage of time, the trading microstructure has evolved into the order
    types and matching algorithms that we are used to today.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 第一个交易所是阿姆斯特丹证券交易所，始于1602年。在这里，交易是亲自进行的。将技术应用于交易的方式包括使用信鸽、电报系统、摩尔斯电码、电话、计算机终端，以及现在的高速计算机网络和最先进的计算机。随着时间的推移，交易微观结构已经演变成我们今天所熟悉的订单类型和匹配算法。
- en: Knowledge of the modern electronic trading exchange microstructure is important
    for the design of algorithmic strategies.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 对现代电子交易所微观结构的了解对于算法策略的设计非常重要。
- en: Order types
  id: totrans-42
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 订单类型
- en: Financial trading strategies employ a variety of different order types, and
    some of the most common ones include Market orders, Market with Price Protection
    orders, **Immediate-Or-Cancel** (**IOC**) orders, **Fill and Kill** (**FAK**)
    orders, **Good-'Till-Day** (**GTD**) orders, **Good-'Till-Canceled** (**GTC**)
    orders, Stop orders, and Iceberg orders.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 金融交易策略采用各种不同的订单类型，其中一些最常见的包括市价订单、带价格保护的市价订单、**立即执行或取消**（**IOC**）订单、**成交即止**（**FAK**）订单、**当日有效**（**GTD**）订单、**长期有效**（**GTC**）订单、止损订单和冰山订单。
- en: For the strategies that we will be exploring in this book, we will focus on
    Market orders, IOC, and GTC.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书中我们将重点关注市价订单、IOC和GTC的策略。
- en: Market orders
  id: totrans-45
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 市价订单
- en: Market orders are buy-or-sell orders that need to be executed instantly at the
    current market price and are used when the immediacy of execution is preferred
    to the execution price.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 市价订单是需要立即以当前市场价格执行的买入或卖出订单，当执行的即时性优于执行价格时使用。
- en: These orders will execute against all available orders on the opposite side
    at the order's price until all the quantity asked for is executed. If it runs
    out of available liquidity to match against, it can be configured to **sit in
    the order book** or **expire**. Sitting in the book means the order becomes a
    resting order that is added to the book for other participants to trade against.
    To expire means that the remaining order quantity is canceled instead of being
    added to the book so that new orders cannot match against the remaining quantity.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 这些订单将以订单价格执行，直到要求的所有数量都被执行。如果没有足够的流动性可匹配，它可以配置为**停留在订单簿中**或**到期**。停留在订单簿中意味着订单变成了一个休眠订单，被添加到订单簿中供其他参与者交易。到期意味着剩余订单数量被取消，而不是被添加到订单簿中，以便新订单不能与剩余数量匹配。
- en: So, for instance, a buy market order will match against all sell orders sitting
    in the book from the best price to the worst price until the entire market order
    is executed.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，例如，买入市价订单将与订单簿中的所有卖出订单匹配，从最佳价格到最差价格，直到整个市价订单被执行。
- en: These orders may suffer from extreme **slippage**, which is defined as the difference
    in the executed order's price and the market price at the time the order was sent.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 这些订单可能会遭受极端的**滑点**，即执行订单价格与发送订单时的市场价格之间的差异。
- en: IOC orders
  id: totrans-50
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: IOC订单
- en: IOC orders cannot execute at prices worse than what they were sent for, which
    means buy orders cannot execute higher than the order's price, and sell orders
    cannot execute lower than the order's price. This concept is known as **limit
    price** since that price is limited to the worst price the order can execute at.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: IOC订单不能以比其发送价格更差的价格执行，这意味着买单不能以高于订单价格的价格执行，卖单也不能以低于订单价格的价格执行。这个概念被称为**限价**，因为该价格受限于订单可以执行的最差价格。
- en: 'An IOC order will continue matching against orders on the order side until
    one of the following happens:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: IOC订单将继续与订单簿中的订单匹配，直到发生以下情况之一：
- en: The entire quantity on the IOC order is executed.
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: IOC订单的全部数量被执行。
- en: The price of the passive order on the other side is worse than the IOC order's
    price.
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 另一方面，被动订单的价格比IOC订单的价格差。
- en: The IOC order is partially executed, and the remaining quantity expires.
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: IOC订单部分执行，剩余数量到期。
- en: An IOC order that is sent at a price better than the best available order on
    the other side (that is, the buy order is lower than the best offer price, or
    the sell order is higher than the best bid price) does not execute at all and
    just expires.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 以比对面最佳可用订单更好的价格发送的IOC订单（即，买单低于最佳报价价格，或卖单高于最佳买价价格）根本不执行，只是到期。
- en: GTC orders
  id: totrans-57
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: GTC订单
- en: GTC orders can persist indefinitely and require a specific cancellation order.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: GTC订单可以持续存在，并需要特定的取消订单。
- en: Limit order books
  id: totrans-59
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 限价订单簿
- en: The exchange accepts order requests from all market participants and maintains
    them in a **limit order book**. Limit order books are a view into all the market
    participant's visible orders available at the exchange at any point in time.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 该交易所接受来自所有市场参与者的订单请求，并将它们保存在**限价订单簿**中。限价订单簿是对交易所任何时刻可见的所有市场参与者可见订单的一种视图。
- en: '**Buy orders** (or **bids**) are arranged from the highest price (that is,
    the best price) to the lowest price (that is, the worst price), and **Ask orders**
    (that is, **asks** or **offers**) are arranged from the lowest price (that is,
    the best price) to the highest price (that is, the lowest price).'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: '**买入订单**（或**竞价**）按照从最高价格（即最佳价格）到最低价格（即最差价格）的顺序排列，而**要价订单**（即**要价**或**报价**）按照从最低价格（即最佳价格）到最高价格（即最低价格）的顺序排列。'
- en: The highest bid prices are considered the best bid prices because buy orders
    with the highest buy prices are the first to be matched, and the reverse is true
    for ask prices, that is, sell orders with the lowest sell prices match first.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 最高的竞价价格被认为是最佳的竞价价格，因为具有最高买入价格的买入订单首先匹配，而对于要价价格来说，具有最低卖出价格的卖出订单首先匹配。
- en: Orders on the same side and at the same price level are arranged in the **First-In-First-Out**
    (**FIFO**) order, which is also known as priority order – orders with better priority
    are ahead of orders with lower priority because the better priority orders have
    reached the exchange before the others. All else being equal (that is, the same
    order side, price, and quantity), orders with better priority will execute before
    orders with worse priority.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 相同方向和相同价格水平的订单按照**先进先出**（**FIFO**）顺序排列，也称为优先顺序——具有更高优先级的订单优先于具有较低优先级的订单，因为更高优先级的订单先于其他订单到达交易所。其他条件相同（即相同的订单方向、价格和数量），具有更高优先级的订单将在具有较低优先级的订单之前执行。
- en: The exchange matching engine
  id: totrans-64
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 交易匹配引擎
- en: The matching engine at the electronic trading exchange performs the **matching
    of orders** using **exchange matching algorithms**. The process of matching entails
    checking all active orders entered by market participants and matching the orders
    that cross each other in price until there are no unmatched orders that could
    be matched – so, buy orders with prices at or above other sell orders match against
    them, and the converse is true as well, that is, sell orders with prices at or
    below other buy orders match against them. The remaining orders remain in the
    exchange matching book until a new order flow comes in, leading to new matches
    if possible.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 电子交易所的匹配引擎使用**交易匹配算法**执行**订单匹配**。匹配的过程包括检查市场参与者输入的所有活动订单，并匹配价格相交的订单，直到没有未匹配的订单可以匹配为止——因此，价格等于或高于其他卖出订单的买入订单与它们匹配，反之亦然，即价格等于或低于其他买入订单的卖出订单与它们匹配。剩下的订单将保留在交易匹配簿中，直到新的订单流进来，如果可能的话，会导致新的匹配。
- en: In the FIFO matching algorithm, orders are matched first – from the best price
    to the worst price. So, an incoming buy order tries to match against resting sell
    orders (that is, asks/offers) from the lowest price to the highest price, and
    an incoming sell order tries to match against resting buy orders (that is, bids)
    from the highest price to the lowest price. New incoming orders are matched with
    a specific sequence of rules. For incoming aggressive orders (orders with prices
    better than the best price level on the other side), they are matched on a first-come-first-serve
    basis, that is, orders that show up first, take out liquidity and, therefore,
    match first. For passive resting orders that sit in the book, since they do not
    execute immediately, they are assigned based on priority on a first-come-first-serve
    basis. That means orders on the same side and at the same price are arranged based
    on the time it takes them to reach the matching engine; orders with earlier times
    are assigned better priority and, therefore, are eligible to be matched first.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 在FIFO匹配算法中，订单首先按照价格从最好到最差进行匹配。因此，买入订单首先尝试与摆放在最低价格到最高价格的卖出订单（即要价/报价）匹配，而卖出订单则尝试与摆放在最高价格到最低价格的买入订单（即竞价）匹配。新的买卖订单会根据特定的规则进行匹配。对于主动的买卖订单（价格优于另一方最佳价格水平的订单），它们将按照先到先服务的原则进行匹配，即首先出现的订单会先消耗流动性，因此会先匹配。对于挂单在订单簿中的被动订单，由于它们不会立即执行，它们将根据先到先服务的原则进行分配。这意味着相同价格和相同方向的订单将根据它们到达匹配引擎的时间进行排列；较早到达的订单将获得更高的优先级，因此有资格首先匹配。
- en: In this section, we learned about the order types and exchange matching engine
    of the modern electronic trading exchange. Now, let's proceed toward the next
    section, where we will learn about the components of an algorithmic trading system.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们了解了现代电子交易所的订单类型和交易匹配引擎。现在，让我们继续前往下一节，在那里我们将了解算法交易系统的组件。
- en: Understanding the components of an algorithmic trading system
  id: totrans-68
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 了解算法交易系统的组件
- en: 'A client-side algorithmic trading infrastructure can be broken down broadly
    into two categories: **core infrastructure** and **quantitative infrastructure**.'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 客户端算法交易基础设施可以大致分为两类：**核心基础设施**和**量化基础设施**。
- en: The core infrastructure of an algorithmic trading system
  id: totrans-70
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 算法交易系统的核心基础设施
- en: A core infrastructure handles communication with the exchange using market data
    and order entry protocols. It is responsible for relaying information between
    the exchange and the algorithmic trading strategy.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 核心基础设施通过市场数据和订单输入协议与交易所进行通信。它负责在交易所和算法交易策略之间传递信息。
- en: Its components are also responsible for capturing, timestamping, and recording
    historical market data, which is one of the top priorities for algorithmic trading
    strategy research and development.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 其组件还负责捕获、时间戳和记录历史市场数据，这是算法交易策略研究和开发的首要任务之一。
- en: The core infrastructure also includes a layer of risk management components
    to guard the trading system against erroneous or runaway trading strategies to
    prevent catastrophic outcomes.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 核心基础设施还包括一层风险管理组件，以防止交易系统出现错误或失控的交易策略，以防止灾难性结果发生。
- en: Finally, some of the less glamorous tasks involved in the algorithmic trading
    business, such as back-office reconciliation tasks, compliance, and more, are
    also addressed by the core infrastructure.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，算法交易业务中涉及的一些不那么光彩的任务，如后台对账任务、合规性等，也由核心基础设施来处理。
- en: Trading servers
  id: totrans-75
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 交易服务器
- en: The trading server involves one or more computers receiving and processing market
    and other relevant data, and trading exchange information (for example, an order
    book), and issuing trading orders.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 交易服务器涉及一个或多个计算机接收和处理市场和其他相关数据，以及交易所信息（例如订单簿），并发出交易订单。
- en: From the limit order book, updates to the exchange matching book are disseminated
    to all market participants over **market data protocols**.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 从限价订单簿中，对交易所撮合簿的更新通过**市场数据协议**传播给所有市场参与者。
- en: Market participants have **trading servers** that receive these market data
    updates. While, technically, these trading servers can be anywhere in the world,
    modern algorithmic trading participants have their trading servers placed in a
    data center very close to the exchange matching engine. This is called a **colocated**
    or **Direct Market Access** (**DMA**) setup, which guarantees that participants
    receive market data updates as fast as possible by being as close to the matching
    engine as possible.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 市场参与者拥有接收这些市场数据更新的交易服务器。虽然从技术上讲，这些交易服务器可以位于世界任何地方，但现代算法交易参与者将其交易服务器放置在离交易所撮合引擎非常近的数据中心。这被称为**共同定位**或**直接市场访问**（**DMA**）设置，可以保证参与者尽可能快地接收市场数据更新，因为它们离撮合引擎越近越好。
- en: Once the market data update, which is communicated via exchange-provided market
    data protocols, is received by each market participant, they use software applications
    known as **market data feed handlers** to decode the market data updates and feed
    it to the algorithmic trading strategy on the client side.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦通过交易所提供的市场数据协议传达的市场数据更新被每个市场参与者接收，他们使用称为**市场数据提供处理程序**的软件应用程序来解码市场数据更新，并将其传送到客户端上的算法交易策略。
- en: Once the algorithmic trading strategy has digested the market data update, based
    on the intelligence developed in the strategy, it generates outgoing order flow.
    This can be the addition, modification, or cancellation of orders at specific
    prices and quantities.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦算法交易策略消化了市场数据更新，基于策略中开发的智能，它会生成外向订单流。这可以是在特定价格和数量上添加、修改或取消订单。
- en: The order requests are picked up by an, often, separate client component known
    as the **order entry gateway**. The order entry gateway component communicates
    with the exchange using **order entry protocols** to translate this request from
    the strategy to the exchange. Notifications in response to these order requests
    are sent by the electronic exchange back to the order entry gateway. Again, in
    response to this order flow by a specific market participant, the matching engine
    generates market data updates, therefore going back to the beginning of this information
    flow loop.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 订单请求由一个通常单独的客户端组件（称为订单录入网关）接收。订单录入网关组件使用订单录入协议与交易所通信，将这个请求从策略翻译到交易所。对这些订单请求的响应通知由电子交易所发送回订单录入网关。再次，作为对特定市场参与者的订单流的响应，撮合引擎生成市场数据更新，因此回到这个信息流循环的开始。
- en: The quantitative infrastructure of an algorithmic trading system
  id: totrans-82
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 算法交易系统的量化基础设施
- en: A quantitative infrastructure builds on top of the platform provided by the
    core infrastructure and, essentially, tries to build components on top to research,
    develop, and effectively leverage the platform to generate revenue.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 量化基础设施建立在核心基础设施提供的平台之上，并且基本上试图在平台上构建组件，以研究、开发和有效利用平台来产生收入。
- en: The research framework includes components such as backtesting, **Post-Trade
    Analytics** (**PTA**), and signal research components.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 研究框架包括回测、**交易后分析**（**PTA**）和信号研究组件等组件。
- en: Other components that are used in research as well as deployed to live markets
    would be limit order books, predictive signals, and signal aggregators, which
    combine individual signals into a composite signal.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 在研究中使用的其他组件以及部署到实时市场的组件将包括限价订单簿、预测信号和信号聚合器，将个别信号组合成一个综合信号。
- en: Execution logic components use trading signals and do the heavy lifting of managing
    live orders, positions, and **Profit And Loss** (**PnL**) across different strategies
    and trading instruments.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 执行逻辑组件使用交易信号，并且在不同策略和交易工具之间进行管理活跃订单、头寸和**损益**（**PnL**）的繁重工作。
- en: Finally, trading strategies themselves have a risk management component to manage
    and mitigate risk across different strategies and instruments.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，交易策略本身具有风险管理组件，用于管理和减轻不同策略和工具之间的风险。
- en: Trading strategies
  id: totrans-88
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 交易策略
- en: Profitable trading ideas have always been driven by human intuition developed
    from observing the patterns of market conditions and the outcomes of various strategies
    under different market conditions.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 盈利的交易理念一直是由人类直觉驱动的，这些直觉是从观察市场条件的模式和不同市场条件下各种策略的结果中发展出来的。
- en: For example, historically, it has been observed that large market rallies generate
    investor confidence, causing more market participants to jump in and buy more;
    therefore, recursively causing larger rallies. Conversely, large drops in market
    prices scare off participants invested in the trading instrument, causing them
    to sell their holdings and exacerbate the drop in prices. These intuitive ideas
    backed by observations in markets led to the idea of **trend-following strategies**.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，历史上观察到大规模市场上涨会增加投资者信心，导致更多市场参与者加入并购买更多；因此，反复导致更大的涨势。相反，市场价格大幅下跌会吓跑投资于交易工具的参与者，导致他们出售持有的股份并加剧价格下跌。这些直觉理念以市场观察为基础，导致了**趋势跟随策略**的想法。
- en: It has also been observed that short-term volatile moves in either direction
    often tend to revert to their previous market price, leading to **mean reversion-based
    speculators and trading strategies**. Similarly, historical observations that
    similar product prices move together, which also makes intuitive sense have led
    to the generation of correlation and collinearity-based trading strategies such
    as **statistical arbitrage** and **pairs trading** strategies.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 还观察到短期波动通常倾向于恢复到其先前的市场价格，导致**均值回归为基础的投机者和交易策略**。同样，历史观察到类似产品价格的联动，这也是直观的，导致了相关性和共线性为基础的交易策略，如**统计套利**和**配对交易**策略。
- en: Since every market participant uses different trading strategies, the final
    market prices reflect the majority of market participants. Trading strategies
    whose views align with the majority of market participants are profitable under
    those conditions. A single trading strategy generally cannot be profitable 100
    percent of the time, so sophisticated participants have a portfolio of trading
    strategies.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 由于每个市场参与者使用不同的交易策略，最终的市场价格反映了大多数市场参与者。与大多数市场参与者的观点一致的交易策略在这些条件下是有利可图的。单一的交易策略通常不能100%地盈利，因此复杂的参与者拥有一系列交易策略。
- en: Trading signals
  id: totrans-93
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 交易信号
- en: Trading signals are also referred to as features, calculators, indicators, predictors,
    or alpha.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 交易信号也被称为特征、计算器、指标、预测器或alpha。
- en: Trading signals are what drive algorithmic trading strategy decisions. Signals
    are well-defined pieces of intelligence derived from market data, alternative
    data (such as news, social media feeds, and more), and even our own order flow,
    which is designed to predict certain market conditions in the future.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 交易信号是驱动算法交易策略决策的因素。信号是从市场数据、替代数据（如新闻、社交媒体信息等）甚至我们自己的订单流中提取的明确定义的情报，旨在预测未来某些市场条件。
- en: Signals almost always originate from some intuitive idea and observation of
    certain market conditions and/or strategy performance. Often, most quantitative
    developers spend most of their time researching and developing new trading signals
    to improve profitability under different market conditions and to improve the
    algorithmic trading strategy overall.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 信号几乎总是源自某种直观的想法和对某些市场条件和/或策略绩效的观察。通常，大多数量化开发者花费大部分时间研究和开发新的交易信号，以提高在不同市场条件下的盈利能力，并改善整体算法交易策略。
- en: The trading signal research framework
  id: totrans-97
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 交易信号研究框架
- en: A lot of man-hours are invested in researching and discovering new signals to
    improve trading performance. To do that in a systematic, efficient, scalable,
    and scientific manner, often, the first step is to build a good **signal research
    framework**.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 大量的人力投入到研究和发现新信号以提高交易绩效。为了以系统化、高效、可扩展和科学的方式进行，通常，第一步是建立一个良好的**信号研究框架**。
- en: 'This framework has subcomponents for the following:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 该框架有以下子组件：
- en: Data generation is based on the signal we are trying to build and the market
    conditions/objectives we are trying to capture/predict. In most real-world algorithmic
    trading, we use tick data, which is data that represents every single event in
    the market. As you might imagine, there are a lot of events every day and this
    leads to massive amounts of data, so you also need to think about subsampling
    the data received. **Subsampling** has several advantages, such as reducing the
    scale of data, eliminating the noise/spurious patches of data, and highlighting
    interesting/important data.
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据生成基于我们试图构建的信号和我们试图捕捉/预测的市场条件/目标。在大多数现实世界的算法交易中，我们使用tick数据，这是代表市场上每一个事件的数据。你可以想象，每天都有很多事件，这导致了大量的数据，因此你还需要考虑对接收到的数据进行子采样。**子采样**有几个优点，比如减少数据规模，消除噪音/虚假数据，并突出有趣/重要的数据。
- en: The evaluation of the predictive power or usefulness of features concerning
    the market objective that they are trying to capture/predict.
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 评估特征的预测能力或对市场目标的有用性。
- en: The maintenance of historical results of signals under different market conditions
    along with tuning existing signals to changing market conditions.
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在不同市场条件下维护信号的历史结果，并调整现有信号以适应不断变化的市场条件。
- en: Signal aggregators
  id: totrans-103
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 信号聚合器
- en: '**Signal aggregators** are optional components that take inputs from individual
    signals and aggregate them in different ways to generate a new composite signal.'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: '**信号聚合器**是可选组件，它从单个信号中获取输入，并以不同的方式对它们进行聚合，以生成新的复合信号。'
- en: A very simple aggregation method would be to take the average of all the input
    signals and output the average as the composite signal value.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 一个非常简单的聚合方法是取所有输入信号的平均值，并将平均值输出为复合信号值。
- en: Readers familiar with statistical learning concepts of ensemble learning – bagging
    and boosting – might be able to spot a similarity between those learning models
    and signal aggregators. Oftentimes signal aggregators are just statistical models
    (regression/classification) where the input signals are just features used to
    predict the same final market objective.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 熟悉集成学习概念的读者——装袋和提升——可能能够发现这些学习模型和信号聚合器之间的相似之处。通常情况下，信号聚合器只是统计模型（回归/分类），其中输入信号只是用于预测相同的最终市场目标的特征。
- en: The execution of strategies
  id: totrans-107
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 策略的执行
- en: The execution of strategies deals with efficiently managing and executing orders
    based on the outputs of the trading signals to minimize trading fees and slippage.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 策略的执行涉及有效地管理和执行订单，以最小化交易费用和滑点。
- en: '**Slippage** is the difference between market prices and execution prices and
    is caused due to the latency experienced by an order to get to the market before
    prices change as well as the size of an order causing a change in price once it
    hits the market.'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: '**滑点**是市场价格和执行价格之间的差异，是由于订单经历了延迟才能在价格变化之前到达市场，以及订单的规模一旦到达市场就会导致价格变化。'
- en: The quality of execution strategies employed in an algorithmic trading strategy
    can significantly improve/degrade the performance of profitable trading signals.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 在算法交易策略中使用的执行策略的质量可以显著改善/恶化盈利交易信号的表现。
- en: Limit order books
  id: totrans-111
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 限价订单簿
- en: Limit order books are built both in the exchange match engine and during the
    algorithmic trading strategies, although not necessarily all algorithmic trading
    signals/strategies require the entire limit order book.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 限价订单簿既可以在交易所撮合引擎中构建，也可以在算法交易策略中构建，尽管并非所有算法交易信号/策略都需要整个限价订单簿。
- en: Sophisticated algorithmic trading strategies can build a lot more intelligence
    into their limit order books. We can detect and track our own orders in the limit
    book and understand, given our priority, what our probability of getting our orders
    executed is. We can also use this information to execute our own orders even before
    the order entry gateway gets the execution notification from the exchange and
    leverage that ability to our advantage. Other more complex microstructure features
    such as detecting icebergs, detecting stop orders, detecting large in-flow or
    out-flow of buy/sell orders, and more are all possible with limit order books
    and market data updates at a lot of electronic trading exchanges.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 复杂的算法交易策略可以在其限价订单簿中构建更多的智能。我们可以在限价订单簿中检测和跟踪我们自己的订单，并了解在我们的优先级下，我们的订单被执行的概率是多少。我们还可以利用这些信息在交易所收到执行通知之前执行我们自己的订单，并利用这种能力来获得优势。在许多电子交易所，通过限价订单簿和市场数据更新，还可以检测冰山订单、止损订单、大量买入/卖出订单等更复杂的微观结构特征。
- en: Position and PnL management
  id: totrans-114
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 仓位和盈亏管理
- en: Let's explore how positions and PnLs evolve as a trading strategy opens and
    closes long and short positions by executing trades.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们通过执行交易来探讨仓位和盈亏如何随着交易策略开启和关闭多头和空头仓位而发展。
- en: When a strategy does not have a position in the market, that is, price changes
    do not affect the trading account's value, it is referred to as having a flat
    position.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 当策略在市场上没有仓位，也就是说，价格变动不会影响交易账户的价值时，被称为持有平仓位。
- en: From a flat position, if a buy order executes, then it is referred to as having
    a long position. If a strategy has a long position and prices increase, the position
    profits from the price increase. PnL also increases in this scenario, that is,
    profit increases (or loss decreases). Conversely, if a strategy has a long position
    and prices decrease, the position loses from the price decrease. PnL decreases
    in this scenario, for example, the profit decreases (or the loss increases).
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 从平仓位开始，如果买单执行，则被称为持有多头仓位。如果策略持有多头仓位并且价格上涨，则仓位从价格上涨中获利。在这种情况下，盈亏也会增加，也就是说，利润增加（或者亏损减少）。相反，如果策略持有多头仓位并且价格下跌，则仓位从价格下跌中亏损。在这种情况下，盈亏减少，例如，利润减少（或者亏损增加）。
- en: From a flat position, if a sell order is executed then it is referred to as
    having a short position. If a strategy has a short position and prices decrease,
    the position profits from the price decrease. PnL increases in this scenario.
    Conversely, if a strategy has a short position and prices increase, then PnL decreases.
    PnL for a position that is still open is referred to as **unrealized PnL** since
    PnL changes with price changes as long as the position remains open.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 从平仓位开始，如果卖单执行，则被称为持有空头仓位。如果策略持有空头仓位并且价格下跌，则仓位从价格下跌中获利。在这种情况下，盈亏增加。相反，如果策略持有空头仓位并且价格上涨，则盈亏减少。仍然开放的仓位的盈亏被称为**未实现盈亏**，因为只要仓位保持开放，盈亏就会随着价格的变化而变化。
- en: A long position is closed by selling an amount of the instrument equivalent
    to the position size. This is referred to as closing or flattening a position,
    and, at this point, PnL is referred to as **realized PnL** since it no longer
    changes as price changes since the position is closed.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 通过卖出与仓位大小相当的工具数量来关闭多头仓位。这被称为关闭或平仓仓位，此时，盈亏被称为**实现盈亏**，因为仓位已关闭，所以随着价格的变化，盈亏不再改变。
- en: Similarly, short positions are closed by buying the same amount as the position
    size.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，空头仓位通过购买与仓位大小相同的数量来关闭。
- en: At any point, the **total PnL** is the sum of realized PnLs on all closed positions
    and unrealized PnLs on all open positions.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 在任何时候，**总盈亏**是所有已关闭仓位的实现盈亏和所有未平仓仓位的未实现盈亏的总和。
- en: When a long or short position is composed of buys or sells at multiple prices
    with different sizes, then the average price of the position is computed by computing
    the **Volume Weighted Average Price** (**VWAP**), which is the price of each execution
    weighted by the quantity executed at each price. Marking to market refers to taking
    the VWAP of a position and comparing that to the current market price to get a
    sense of how profitable or lossy a certain long/short position is.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 当多头或空头仓位由不同价格和不同大小的买入或卖出组成时，仓位的平均价格通过计算**成交量加权平均价格**（**VWAP**）来计算，即每个执行价格的数量加权。标记到市场是指获取仓位的VWAP并将其与当前市场价格进行比较，以了解某个多头/空头仓位的盈利或亏损程度。
- en: Backtesting
  id: totrans-123
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 回测
- en: A backtester uses historically recorded market data and simulation components
    to simulate the behavior and performance of an algorithmic trading strategy as
    if it were deployed to live markets in the past. Algorithmic trading strategies
    are developed and optimized using a backtester until the strategy performance
    is in line with expectations.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 回测器使用历史记录的市场数据和模拟组件来模拟算法交易策略的行为和表现，就好像它在过去的实时市场上部署一样。算法交易策略是通过回测器开发和优化，直到策略的表现符合预期。
- en: Backtesters are complex components that need to model market data flow, client-side
    and exchange-side latencies in software and network components, accurate FIFO
    priorities, slippage, fees, and market impact from strategy order flow (that is,
    how would other market participants react to a strategy's order flow being added
    to the market data flow) to generate accurate strategy and portfolio performance
    statistics.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 回测器是复杂的组件，需要在软件和网络组件中建模市场数据流、客户端和交易所延迟、准确的FIFO优先级、滑点、费用以及策略订单流的市场影响（即其他市场参与者如何对策略的订单流做出反应并加入到市场数据流中），以生成准确的策略和投资组合绩效统计数据。
- en: PTA
  id: totrans-126
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: PTA
- en: PTA is performed on trades generated by an algorithmic trading strategy run
    in simulation or live markets.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: PTA是在模拟或实时市场中运行的算法交易策略生成的交易上执行的。
- en: PTA systems are used to generate performance statistics from historically backtested
    strategies with the objective to understand historical strategy performance expectations.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: PTA系统用于从历史回测的策略中生成绩效统计数据，目的是了解历史策略绩效预期。
- en: When applied to trades generated from live trading strategies, PTA can be used
    to understand strategy performance in live markets as well as compare and assert
    that live trading performance is in line with simulated strategy performance expectations.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 当应用于实时交易策略生成的交易时，PTA可以用于了解实时市场中的策略绩效，并比较和断言实时交易绩效是否符合模拟策略绩效预期。
- en: Risk management
  id: totrans-130
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 风险管理
- en: Good risk management principles ensure that strategies are run for optimal PnL
    performance and safeguards are put in place against runaway/errant strategies.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 良好的风险管理原则确保策略以最佳PnL绩效运行，并采取措施防止失控/错误的策略。
- en: Bad risk management cannot only turn a profitable trading strategy into a non-profitable
    one but can also put the investor's entire capital at risk due to uncontrolled
    strategy losses, malfunctioning strategies, and possible regulatory repercussions.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 糟糕的风险管理不仅可以将盈利的交易策略变成亏损的，还可能由于无法控制的策略损失、故障策略和可能的监管后果而使投资者的整个资本面临风险。
- en: Summary
  id: totrans-133
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we have learned when algorithmic trading has an advantage over
    manual trading, what the financial asset classes are, the most used order types,
    what the limit order book is, and how the orders are matched by the financial
    exchange.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们已经了解了算法交易何时优于手动交易，金融资产类别是什么，最常用的订单类型是什么，限价订单簿是什么，以及订单是如何被金融交易所匹配的。
- en: We have also discussed the key components of an algorithmic trading system –
    the core infrastructure and the quantitative infrastructure which consists of
    trading strategies, their execution, limit order book, position, PnL management,
    backtesting, post-trade analytics, and risk management.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还讨论了算法交易系统的关键组成部分——核心基础设施和量化基础设施，包括交易策略、执行、限价订单簿、头寸、损益管理、回测、交易后分析和风险管理。
- en: In the next chapter, we will discuss the value of Python when it comes to algorithmic
    trading.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将讨论Python在算法交易中的价值。

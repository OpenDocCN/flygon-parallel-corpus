- en: '*Chapter 9*: Fundamental Algorithmic Trading Strategies'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: This chapter outlines several algorithms profitable on the given stock, given
    a time window and certain parameters, with the aim of helping you to formulate
    an idea of how to develop your own trading strategies.
  prefs: []
  type: TYPE_NORMAL
- en: 'In this chapter, we will discuss the following topics:'
  prefs: []
  type: TYPE_NORMAL
- en: What is an algorithmic trading strategy?
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Learning momentum-based/trend-following strategies
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Learning mean-reversion strategies
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Learning mathematical model-based strategies
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Learning time series prediction-based strategies
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Technical requirements
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The Python code used in this chapter is available in the `Chapter09/signals_and_strategies.ipynb`
    notebook in the book's code repository.
  prefs: []
  type: TYPE_NORMAL
- en: What is an algorithmic trading strategy?
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Any algorithmic trading strategy should entail the following:'
  prefs: []
  type: TYPE_NORMAL
- en: It should be a model based on an underlying market theory since only then can
    you find its predictive power. Fitting a model to data with great backtesting
    results is simple, but usually does not provide sound predictions.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: It should be as simple as possible – the more complex the strategy, the less
    likely it is to perform well in the long term (overfitting).
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'It should restrict the strategy for a well-defined set of financial assets
    (trading universe) based on the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: a) Their returns profile.
  prefs: []
  type: TYPE_NORMAL
- en: b) Their returns not being correlated.
  prefs: []
  type: TYPE_NORMAL
- en: c) Their trading patterns – you do not want to trade an illiquid asset; you
    restrict yourself just to significantly traded assets.
  prefs: []
  type: TYPE_NORMAL
- en: 'It should define the relevant financial data:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'a) Frequency: Daily, monthly, intraday, and suchlike'
  prefs: []
  type: TYPE_NORMAL
- en: b) Data source
  prefs: []
  type: TYPE_NORMAL
- en: It should define the model's parameters.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: It should define their timing, entry, exit rules, and position sizing strategy
    – for example, we cannot trade more than 10% of the average daily volume; usually,
    the decision to enter/exit is made by a composition of several indicators.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: It should define the risk levels – how much of a risk a single asset can bear.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: It should define the benchmark used to compare performance against.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: It should define its rebalancing policy – as the markets evolve, the position
    sizes and risk levels will deviate from their target levels and then it is necessary
    to adjust the portfolios.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Usually, you have a large library of algorithmic trading strategies, and backtesting
    will suggest which of these strategies, on which assets, and at what point in
    time they may generate a profit. You should keep a backtesting journal to keep
    track of what strategies did or didn't work, on what stock, and during what period.
  prefs: []
  type: TYPE_NORMAL
- en: 'How do you go about finding a portfolio of stocks to consider for trading?
    The options are as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: Use ETF/index components – for example, the members of the Dow Jones Industrial
    Average.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Use all listed stocks and then restrict the list to the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: a) Those stocks that are traded the most
  prefs: []
  type: TYPE_NORMAL
- en: b) Just non-correlated stocks
  prefs: []
  type: TYPE_NORMAL
- en: c) Those stocks that are underperforming or overperforming using a returns model,
    such as the **Fama-French three-factor model**
  prefs: []
  type: TYPE_NORMAL
- en: 'You should classify each stock into as many categories as possible:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: a) Value/growth stocks
  prefs: []
  type: TYPE_NORMAL
- en: b) By industry
  prefs: []
  type: TYPE_NORMAL
- en: 'Each trading strategy depends on a number of parameters. How do you go about
    finding the best values for each of them? The possible approaches are as follow:'
  prefs: []
  type: TYPE_NORMAL
- en: A parameter sweep by trying each possible value within the range of possible
    values for each parameter, but this would require an enormous amount of computing
    resources.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Very often, a parameter sweep that involves testing many random samples, instead
    of all values, from the range of possible values provides a reasonable approximation.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'To build a large library of algorithmic trading strategies, you should do the
    following:'
  prefs: []
  type: TYPE_NORMAL
- en: Subscribe to financial trading blogs.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Read financial trading books.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The key algorithmic trading strategies can be classified as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: Momentum-based/trend-following strategies
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Mean-reversion strategies
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Mathematical model-based strategies
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Arbitrage strategies
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Market-making strategies
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Index fund rebalancing strategies
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Trading timing optimization strategies (VWAP, TWAP, POV, and so on)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: In addition, you yourself should classify all trading strategies depending on
    the environment where they work best – some strategies work well in volatile markets
    with strong trends, while others do not.
  prefs: []
  type: TYPE_NORMAL
- en: The following algorithms use the freely accessible Quandl data bundle; thus,
    the last trading date is January 1, 2018.
  prefs: []
  type: TYPE_NORMAL
- en: You should accumulate many different trading algorithms, list the number of
    possible parameters, and backtest the stocks on a number of parameters on the
    universe of stocks (for example, those with an average trading volume of at least
    *X*) to see which may be profitable. Backtesting should happen in a time window
    such as the present and near future – for example, the volatility regime.
  prefs: []
  type: TYPE_NORMAL
- en: 'The best way of reading the following strategies is as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: Identify the signal formula of the strategy and consider it for an entry/exit
    rule for your own strategy or for a combination with other strategies – some of
    the most profitable strategies are combinations of existing strategies.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Consider the frequency of trading – daily trading may not be suitable for all
    strategies due to the transaction costs.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Each strategy works for different types of stocks and their market – some work
    only for trending stocks, some work only for high-volatility stocks, and so on.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Learning momentum-based/trend-following strategies
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Momentum-based/trend-following strategies are types of technical analysis strategies.
    They assume that the near-time future prices will follow an upward or downward
    trend.
  prefs: []
  type: TYPE_NORMAL
- en: Rolling window mean strategy
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: This strategy is to own a financial asset if its latest stock price is above
    the average price over the last *X* days.
  prefs: []
  type: TYPE_NORMAL
- en: 'In the following example, it works well for Apple stock and a period of 90
    days:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'The outputs are as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.1 – Rolling window mean strategy; summary return and risk statistics](img/Figure_9.1_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.1 – Rolling window mean strategy; summary return and risk statistics
  prefs: []
  type: TYPE_NORMAL
- en: 'When assessing a trading strategy, the preceding statistics are the first step.
    Each provides a different view on the strategy performance:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Sharpe ratio**: This is a measure of excess return versus standard deviation
    of the excess return. The higher the ratio, the better the algorithm performed
    on a risk-adjusted basis.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Calmar ratio**: This is a measure of the average compounded annual rate of
    return versus its maximum drawdown. The higher the ratio, the better the algorithm
    performed on a risk-adjusted basis.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Stability**: This is defined as the R-squared value of a linear fit to the
    cumulative log returns. The higher the number, the higher the trend in the cumulative
    returns.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Omega ratio**: This is defined as the probability weighted ratio of gains
    versus losses. It is a generalization of the Sharpe ratio, taking into consideration
    all moments of the distribution. The higher the ratio, the better the algorithm
    performed on a risk-adjusted basis.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Sortino ratio**: This is a variation of the Sharpe ratio – it uses only the
    standard deviation of the negative portfolio returns (downside risk). The higher
    the ratio, the better the algorithm performed on a risk-adjusted basis.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Tail ratio**: This is defined as the ratio between the right 95% and the
    left tail 5%. For example, a ratio of 1/3 means that the losses are three times
    worse than the profits. The higher the number, the better.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'In this example, we see that the strategy has a very high stability (.92) over
    the trading window, which somewhat offsets the high maximum drawdown (-59.4%).
    The tail ratio is most favorable:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.2 – Rolling window mean strategy; worst five drawdown periods](img/Figure_9.2_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.2 – Rolling window mean strategy; worst five drawdown periods
  prefs: []
  type: TYPE_NORMAL
- en: While the worst maximum drawdown of 59.37% is certainly not good, if we adjusted
    the entry/exit strategy rules, we would most likely avoid it. Notice the duration
    of the drawdown periods – more than 3 years in the maximum drawdown period.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.3 – Rolling window mean strategy; cumulative returns over the investment
    horizon](img/Figure_9.3_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.3 – Rolling window mean strategy; cumulative returns over the investment
    horizon
  prefs: []
  type: TYPE_NORMAL
- en: As the stability measure confirms, we see a positive trend in the cumulative
    returns over the trading horizon.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.4 – Rolling window mean strategy; returns over the investment horizon](img/Figure_9.4_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.4 – Rolling window mean strategy; returns over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The chart confirms that the returns oscillate widely around zero.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.5 – Rolling window mean strategy; 6-month rolling volatility over
    the investment horizon](img/Figure_9.5_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.5 – Rolling window mean strategy; 6-month rolling volatility over the
    investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: This chart illustrates that the strategy's return volatility is decreasing over
    the time horizon.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.6 – Rolling window mean strategy; 6-month rolling Sharpe ratio over
    the investment horizon](img/Figure_9.6_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.6 – Rolling window mean strategy; 6-month rolling Sharpe ratio over
    the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: We see that the maximum Sharpe ratio of the strategy is above 4, with its minimum
    value below -2\. If we reviewed the entry/exit rules, we should be able to improve
    the strategy's performance.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.7 – Rolling window mean strategy; top five drawdown periods over
    the investment horizon](img/Figure_9.7_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.7 – Rolling window mean strategy; top five drawdown periods over the
    investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: A graphical representation of the maximum drawdown indicates that the periods
    of maximum drawdown are overly long.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.8 – Rolling window mean strategy; monthly returns, annual returns,
    and the distribution of monthly returns over the investment horizon](img/Figure_9.8_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.8 – Rolling window mean strategy; monthly returns, annual returns,
    and the distribution of monthly returns over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Monthly returns** chart shows that we have traded during most months.
    The **Annual returns** bar chart shows that the returns are overwhelmingly positive,
    while the **Distribution of monthly returns** chart shows that the skew is positive
    to the right.
  prefs: []
  type: TYPE_NORMAL
- en: The rolling window mean strategy is one of the simplest strategies and is still
    very profitable for certain combinations of stocks and time frames. Notice that
    the maximum drawdown for this strategy is significant and may be improved if we
    added more advanced entry/exit rules.
  prefs: []
  type: TYPE_NORMAL
- en: Simple moving averages strategy
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'This strategy follows a simple rule: buy the stock if the short-term moving
    averages rise above the long-term moving averages:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'The outputs are as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.9 – Simple moving averages strategy; summary return and risk statistics](img/Figure_9.9_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.9 – Simple moving averages strategy; summary return and risk statistics
  prefs: []
  type: TYPE_NORMAL
- en: The statistics show that the strategy is overwhelmingly profitable in the long
    term (high stability and tail ratios), while the maximum drawdown can be substantial.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.10 – Simple moving averages strategy; worst five drawdown periods](img/Figure_9.10_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.10 – Simple moving averages strategy; worst five drawdown periods
  prefs: []
  type: TYPE_NORMAL
- en: The worst drawdown periods are rather long – more than 335 days, with some even
    taking more than 3 years in the worst case.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.11 – Simple moving averages strategy; cumulative returns over the
    investment horizon](img/Figure_9.11_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.11 – Simple moving averages strategy; cumulative returns over the investment
    horizon
  prefs: []
  type: TYPE_NORMAL
- en: This chart does, however, confirm that this long-term strategy is profitable
    – we see the cumulative returns grow consistently after the first drawdown.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.12 – Simple moving averages strategy; returns over the investment
    horizon](img/Figure_9.12_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.12 – Simple moving averages strategy; returns over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The chart illustrates that there was a major negative return event at the very
    start of the trading window and then the returns oscillate around zero.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.13 – Simple moving averages strategy; 6-month rolling volatility
    over the investment horizon](img/Figure_9.13_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.13 – Simple moving averages strategy; 6-month rolling volatility over
    the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The rolling volatility chart shows that the rolling volatility is decreasing
    with time.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.14 – Simple moving averages strategy; 6-month rolling Sharpe ratio
    over the investment horizon](img/Figure_9.14_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.14 – Simple moving averages strategy; 6-month rolling Sharpe ratio
    over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: While the maximum Sharpe ratio was over 4, with the minimum equivalent being
    below -4, the average Sharpe ratio was 0.68.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.15 – Simple moving averages strategy; top five drawdown periods
    over the investment horizon](img/Figure_9.15_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.15 – Simple moving averages strategy; top five drawdown periods over
    the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: This chart confirms that the maximum drawdown periods were very long.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.16 – Simple moving averages strategy; monthly returns, annual returns,
    and the distribution of monthly returns over the investment horizon](img/Figure_9.16_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.16 – Simple moving averages strategy; monthly returns, annual returns,
    and the distribution of monthly returns over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The monthly returns table shows that there was no trade across many months.
    The annual returns were mostly positive. The **Distribution of monthly returns**
    chart confirms that the skew is negative.
  prefs: []
  type: TYPE_NORMAL
- en: The simple moving averages strategy is less profitable and has a greater maximum
    drawdown than the rolling window mean strategy. One reason may be that the rolling
    window for the moving averages is too large.
  prefs: []
  type: TYPE_NORMAL
- en: Exponentially weighted moving averages strategy
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: This strategy is similar to the previous one, with the exception of using different
    rolling windows and exponentially weighted moving averages. The results are slightly
    better than those achieved under the previous strategy.
  prefs: []
  type: TYPE_NORMAL
- en: 'Some other moving average algorithms use both simple moving averages and exponentially
    weighted moving averages in the decision rule; for example, if the simple moving
    average is greater than the exponentially weighted moving average, make a move:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 'The outputs are as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.17 – Exponentially weighted moving averages strategy; summary return
    and risk statistics](img/Figure_9.17_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.17 – Exponentially weighted moving averages strategy; summary return
    and risk statistics
  prefs: []
  type: TYPE_NORMAL
- en: The results show that the level of maximum drawdown has dropped from the previous
    strategies, while still keeping very strong stability and tail ratios.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.18 – Exponentially weighted moving averages strategy; worst five
    drawdown periods](img/Figure_9.18_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.18 – Exponentially weighted moving averages strategy; worst five drawdown
    periods
  prefs: []
  type: TYPE_NORMAL
- en: The magnitude of the worst drawdown, as well as its maximum duration in days,
    is far better than for the previous two strategies.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.19 – Exponentially weighted moving averages strategy; cumulative
    returns over the investment horizon](img/Figure_9.19_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.19 – Exponentially weighted moving averages strategy; cumulative returns
    over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: As the stability indicator shows, we see consistent positive cumulative returns.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.20 – Exponentially weighted moving averages strategy; returns over
    the investment horizon](img/Figure_9.20_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.20 – Exponentially weighted moving averages strategy; returns over
    the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The returns oscillate around zero, being more positive than negative.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.21 – Exponentially weighted moving averages strategy; 6-month rolling  volatility
    over the investment horizon](img/Figure_9.21_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.21 – Exponentially weighted moving averages strategy; 6-month rolling
    volatility over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The rolling volatility is dropping over time.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.22 – Exponentially weighted moving averages strategy; 6-month rolling  Sharpe
    ratio over the investment horizon](img/Figure_9.22_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.22 – Exponentially weighted moving averages strategy; 6-month rolling
    Sharpe ratio over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: We see that the maximum Sharpe ratio reached almost 5, while the minimum was
    slightly below -2, which again is better than for the two previous algorithms.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.23 – Exponentially weighted moving averages strategy; top five drawdown
    periods over the investment horizon](img/Figure_9.23_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.23 – Exponentially weighted moving averages strategy; top five drawdown
    periods over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: Notice that the periods of the worst drawdown are not identical for the last
    three algorithms.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.24 – Exponentially weighted moving averages strategy; monthly returns,
    annual returns, and the distribution of monthly returns over the investment horizon](img/Figure_9.24_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.24 – Exponentially weighted moving averages strategy; monthly returns,
    annual returns, and the distribution of monthly returns over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Monthly returns** table shows that we have traded in most months. The
    **Annual returns** chart confirms that most returns have been positive. The **Distribution
    of monthly returns** chart is positively skewed, which is a good sign.
  prefs: []
  type: TYPE_NORMAL
- en: The exponentially weighted moving averages strategy performs better for Apple's
    stock over the given time frame. However, in general, the most suitable averages
    strategy depends on the stock and the time frame.
  prefs: []
  type: TYPE_NORMAL
- en: RSI strategy
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: This strategy depends on the `stockstats` package. It is very instructive to
    read the source code at [https://github.com/intrad/stockstats/blob/master/stockstats.py](https://github.com/intrad/stockstats/blob/master/stockstats.py).
  prefs: []
  type: TYPE_NORMAL
- en: 'To install it, use the following command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: The RSI indicator measures the velocity and magnitude of price movements and
    provides an indicator when a financial asset is oversold or overbought. It is
    a leading indicator.
  prefs: []
  type: TYPE_NORMAL
- en: 'It is measured from 0 to 100, with values over 70 indicating overbought, and
    values below 30 oversold:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: 'The outputs are as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.25 – RSI strategy; summary return and risk statistics](img/Figure_9.25_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.25 – RSI strategy; summary return and risk statistics
  prefs: []
  type: TYPE_NORMAL
- en: The first look at the strategy shows an excellent Sharpe ratio, with a very
    low maximum drawdown and a favorable tail ratio.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.26 – RSI strategy; worst five drawdown periods](img/Figure_9.26_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.26 – RSI strategy; worst five drawdown periods
  prefs: []
  type: TYPE_NORMAL
- en: The worst drawdown periods were very short – less than 2 months – and not substantial
    – a maximum drawdown of only -10.55%.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.27 – RSI strategy; cumulative returns over the investment horizon](img/Figure_9.27_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.27 – RSI strategy; cumulative returns over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Cumulative returns** chart shows that we have not traded across most of
    the trading horizon and when we did trade, there was a positive trend in the cumulative
    returns.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.28 – RSI strategy; returns over the investment horizon](img/Figure_9.28_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.28 – RSI strategy; returns over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: We can see that when we traded, the returns were more likely to be positive
    than negative.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.29 – RSI strategy; 6-month rolling volatility over the investment
    horizon](img/Figure_9.29_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.29 – RSI strategy; 6-month rolling volatility over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: Notice that the maximum rolling volatility of 0.2 is far lower than for the
    previous strategies.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.30 – RSI strategy; 6-month rolling Sharpe ratio over the investment
    horizon](img/Figure_9.30_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.30 – RSI strategy; 6-month rolling Sharpe ratio over the investment
    horizon
  prefs: []
  type: TYPE_NORMAL
- en: We can see that Sharpe's ratio has consistently been over 1, with its maximum
    value over 3 and its minimum value below -1.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.31 – RSI strategy; top five drawdown periods over the investment
    horizon](img/Figure_9.31_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.31 – RSI strategy; top five drawdown periods over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The chart illustrates short and insignificant drawdown periods.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.32 – RSI strategy; monthly returns, annual returns, and the distribution
    of monthly returns over the investment horizon](img/Figure_9.32_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.32 – RSI strategy; monthly returns, annual returns, and the distribution
    of monthly returns over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Monthly returns** table states that we have not traded in most months.
    However, according to the **Annual returns** chart, when we traded, we were hugely
    profitable. The **Distribution of monthly returns** chart confirms that the skew
    is hugely positive, with a large kurtosis.
  prefs: []
  type: TYPE_NORMAL
- en: The RSI strategy is highly performant in the case of Apple's stock over the
    given time frame, with a Sharpe ratio of 1.11\. Notice, however, that the success
    of the strategy depends largely on the very strict entry/exit rules, meaning we
    are not trading in certain months at all.
  prefs: []
  type: TYPE_NORMAL
- en: MACD crossover strategy
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '**Moving Average Convergence Divergence** (**MACD**) is a lagging, trend-following
    momentum indicator reflecting the relationship between two moving averages of
    stock prices.'
  prefs: []
  type: TYPE_NORMAL
- en: 'The strategy depends on two statistics, the MACD and the MACD signal line:'
  prefs: []
  type: TYPE_NORMAL
- en: The MACD is defined as the difference between the 12-day exponential moving
    average and the 26-day exponential moving average.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The MACD signal line is then defined as the 9-day exponential moving average
    of the MACD.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The MACD crossover strategy is defined as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: A bullish crossover happens when the MACD line turns upward and crosses beyond
    the MACD signal line.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A bearish crossover happens when the MACD line turns downward and crosses under
    the MACD signal line.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Consequently, this strategy is best suited for volatile, highly traded markets:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: 'The outputs are as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.33 – MACD crossover strategy; summary return and risk statistics](img/Figure_9.33_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.33 – MACD crossover strategy; summary return and risk statistics
  prefs: []
  type: TYPE_NORMAL
- en: The tail ratio illustrates that the top gains and losses are roughly of the
    same magnitude. The very low stability indicates that there is no strong trend
    in cumulative returns.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.34 – MACD crossover strategy; worst five drawdown periods](img/Figure_9.34_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.34 – MACD crossover strategy; worst five drawdown periods
  prefs: []
  type: TYPE_NORMAL
- en: Apart from the worst drawdown period, the other periods were shorter than 6
    months, with a net drawdown lower than 10%.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.35 – MACD crossover strategy; cumulative returns over the investment
    horizon](img/Figure_9.35_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.35 – MACD crossover strategy; cumulative returns over the investment
    horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Cumulative returns** chart confirms the low stability indicator value.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Returns** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.36 – MACD crossover strategy; returns over the investment horizon](img/Figure_9.36_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.36 – MACD crossover strategy; returns over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Returns** chart shows that returns oscillated widely around zero, with
    a few outliers.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Rolling volatility** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.37 – MACD crossover strategy; 6-month rolling volatility over the
    investment horizon](img/Figure_9.37_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.37 – MACD crossover strategy; 6-month rolling volatility over the investment
    horizon
  prefs: []
  type: TYPE_NORMAL
- en: The rolling volatility has been oscillating around 0.15.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the rolling Sharpe ratio chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.38 – MACD crossover strategy; 6-month rolling Sharpe ratio over
    the investment horizon](img/Figure_9.38_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.38 – MACD crossover strategy; 6-month rolling Sharpe ratio over the
    investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The maximum rolling Sharpe ratio of about 4, with a minimum ratio of -2, is
    largely favorable.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the top five drawdown periods chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.39 – MACD crossover strategy; top five drawdown periods over the
    investment horizon](img/Figure_9.39_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.39 – MACD crossover strategy; top five drawdown periods over the investment
    horizon
  prefs: []
  type: TYPE_NORMAL
- en: We see that the worst two drawdown periods have been rather long.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.40 – MACD crossover strategy; monthly returns, annual returns, and
    the distribution of monthly returns over the investment horizon](img/Figure_9.40_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.40 – MACD crossover strategy; monthly returns, annual returns, and
    the distribution of monthly returns over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Monthly** **returns** table confirms that we have traded across most months.
    The **Annual returns** chart indicates that the most profitable year was 2017\.
    The **Distribution of monthly returns** chart shows a slight negative skew and
    large kurtosis.
  prefs: []
  type: TYPE_NORMAL
- en: The MACD crossover strategy is an effective strategy in trending markets and
    can be significantly improved by raising the entry/exit rules.
  prefs: []
  type: TYPE_NORMAL
- en: RSI and MACD strategies
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In this strategy, we combine the RSI and MACD strategies and own the stock if
    both RSI and MACD criteria provide a signal to buy.
  prefs: []
  type: TYPE_NORMAL
- en: 'Using multiple criteria provides a more complete view of the market (note that
    we generalize the RSI threshold values to 50):'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: 'The outputs are as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.41 – RSI and MACD strategies; summary return and risk statistics](img/Figure_9.41_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.41 – RSI and MACD strategies; summary return and risk statistics
  prefs: []
  type: TYPE_NORMAL
- en: The high stability value, with a high tail ratio and excellent Sharpe ratio,
    as well as a low maximum drawdown, indicates that the strategy is excellent.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the worst five drawdown periods chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.42 – RSI and MACD strategies; worst five drawdown periods](img/Figure_9.42_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.42 – RSI and MACD strategies; worst five drawdown periods
  prefs: []
  type: TYPE_NORMAL
- en: We see that the worst drawdown periods were short – less than 4 months – with
    the worst net drawdown of -10.36%.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Cumulative returns** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.43 – RSI and MACD strategies; cumulative returns over the investment
    horizon](img/Figure_9.43_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.43 – RSI and MACD strategies; cumulative returns over the investment
    horizon
  prefs: []
  type: TYPE_NORMAL
- en: The high stability value is favorable. Notice the horizontal lines in the chart;
    these indicate that we have not traded.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Returns** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.44 – RSI and MACD strategies; returns over the investment horizon](img/Figure_9.44_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.44 – RSI and MACD strategies; returns over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Returns** chart shows that when we traded, the positive returns outweighed
    the negative ones.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Rolling volatility** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.45 – RSI and MACD strategies; 6-month rolling volatility over the
    investment horizon](img/Figure_9.45_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.45 – RSI and MACD strategies; 6-month rolling volatility over the investment
    horizon
  prefs: []
  type: TYPE_NORMAL
- en: The rolling volatility has been decreasing over time and has been relatively
    low.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Rolling Sharpe ratio** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.46 – RSI and MACD strategies; 6-month rolling Sharpe ratio over
    the investment horizon](img/Figure_9.46_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.46 – RSI and MACD strategies; 6-month rolling Sharpe ratio over the
    investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The maximum rolling Sharpe ratio was over 3, with a minimum of below -2 and
    an average above 1.0 indicative of a very good result.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Top 5 drawdown periods** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.47 – RSI and MACD strategies; top five drawdown periods over the
    investment horizon](img/Figure_9.47_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.47 – RSI and MACD strategies; top five drawdown periods over the investment
    horizon
  prefs: []
  type: TYPE_NORMAL
- en: We see that the drawdown periods were short and not significant.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following are the **Monthly returns**, **Annual returns**, and **Distribution
    of monthly returns** charts:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.48 – RSI and MACD strategies; monthly returns, annual returns, and
    the distribution of monthly returns over the investment horizon](img/Figure_9.48_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.48 – RSI and MACD strategies; monthly returns, annual returns, and
    the distribution of monthly returns over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Monthly returns** table confirms we have not traded in most months. However,
    according to the **Annual returns** chart, when we did trade, it was hugely profitable.
    The **Distribution of monthly returns** chart is positive, with high kurtosis.
  prefs: []
  type: TYPE_NORMAL
- en: The RSI and MACD strategy, as a combination of two strategies, demonstrates
    excellent performance, with a Sharpe ratio of 1.27 and a maximum drawdown of -10.4%.
    Notice that it does not trigger any trading in some months.
  prefs: []
  type: TYPE_NORMAL
- en: Triple exponential average strategy
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'The **Triple Exponential Average** (**TRIX**) indicator is an oscillator oscillating
    around the zero line. A positive value indicates an overbought market, whereas
    a negative value is indicative of an oversold market:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: 'The outputs are as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.49 – TRIX strategy; summary return and risk statistics](img/Figure_9.49_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.49 – TRIX strategy; summary return and risk statistics
  prefs: []
  type: TYPE_NORMAL
- en: The high tail ratio with an above average stability suggests, in general, a
    profitable strategy.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the worst five drawdown periods chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.50 – TRIX strategy; worst five drawdown periods](img/Figure_9.50_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.50 – TRIX strategy; worst five drawdown periods
  prefs: []
  type: TYPE_NORMAL
- en: The second worst drawdown period was over a year. The worst net drawdown was
    -15.57%.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Cumulative returns** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.51 – TRIX strategy; cumulative returns over the investment horizon](img/Figure_9.51_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.51 – TRIX strategy; cumulative returns over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Cumulative returns** chart indicates that we have not traded in many months
    (the horizontal line) and that there is a long-term positive trend, as confirmed
    by the high stability value.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Returns** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.52 – TRIX strategy; returns over the investment horizon](img/Figure_9.52_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.52 – TRIX strategy; returns over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: This chart suggests that when we traded, we were more likely to reach a positive
    return.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Rolling volatility** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.53 – TRIX strategy; 6-month rolling volatility over the investment
    horizon](img/Figure_9.53_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.53 – TRIX strategy; 6-month rolling volatility over the investment
    horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Rolling volatility** chart shows that the rolling volatility has been
    decreasing with time, although the maximum volatility has been rather high.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Rolling Sharpe ratio** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.54 – TRIX strategy; 6-month rolling Sharpe ratio over the investment
    horizon](img/Figure_9.54_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.54 – TRIX strategy; 6-month rolling Sharpe ratio over the investment
    horizon
  prefs: []
  type: TYPE_NORMAL
- en: The rolling Sharpe ratio has been more likely to be positive than negative,
    with its maximum value in the region of 3 and a minimum value slightly below -1.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the top five drawdown periods chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.55 – TRIX strategy; top five drawdown periods over the investment
    horizon](img/Figure_9.55_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.55 – TRIX strategy; top five drawdown periods over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The top five drawdown periods confirm that the worst drawdown periods have been
    long.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following are the **Monthly returns**, **Annual returns**, and **Distribution
    of monthly returns** charts:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.56 – TRIX strategy; monthly returns, annual returns, and the distribution
    of monthly returns over the investment horizon](img/Figure_9.56_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.56 – TRIX strategy; monthly returns, annual returns, and the distribution
    of monthly returns over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Monthly returns** table confirms that we have not traded in many months.
    The **Annual returns** chart shows that the maximum return was in the year 2015\.
    The **Distribution of monthly returns** chart shows a very slightly positive skew
    with a somewhat large kurtosis.
  prefs: []
  type: TYPE_NORMAL
- en: The TRIX strategy's performance for some stocks, such as Apple, is very bad
    over the given time frame. For other stocks such as Microsoft, included in the
    preceding report, performance is excellent for certain years.
  prefs: []
  type: TYPE_NORMAL
- en: Williams R% strategy
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: This strategy was developed by Larry Williams, and the William R% oscillates
    from 0 to -100\. The `stockstats` library has implemented the values from 0 to
    +100.
  prefs: []
  type: TYPE_NORMAL
- en: The values above -20 indicate that the security has been overbought, while values
    below -80 indicate that the security has been oversold.
  prefs: []
  type: TYPE_NORMAL
- en: 'This strategy is hugely successful for Microsoft''s stock, while not so much
    for Apple''s stock:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: 'The outputs are as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.57 – Williams R% strategy; summary return and risk statistics](img/Figure_9.57_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.57 – Williams R% strategy; summary return and risk statistics
  prefs: []
  type: TYPE_NORMAL
- en: The summary statistics show an excellent strategy – high stability confirms
    consistency in the returns, with a large tail ratio, a very low maximum drawdown,
    and a solid Sharpe ratio.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the worst five drawdown periods chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.58 – Williams R% strategy; worst five drawdown periods](img/Figure_9.58_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.58 – Williams R% strategy; worst five drawdown periods
  prefs: []
  type: TYPE_NORMAL
- en: Apart from the worst drawdown period lasting about 3 months with a net drawdown
    of -10%, the other periods were insignificant in both duration and magnitude.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Cumulative returns** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.59 – Williams R% strategy; cumulative returns over the investment
    horizon](img/Figure_9.59_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.59 – Williams R% strategy; cumulative returns over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: This chart confirms the high stability value of the strategy – the cumulative
    returns are growing at a steady rate.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Returns** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.60 – Williams R% strategy; returns over the investment horizon](img/Figure_9.60_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.60 – Williams R% strategy; returns over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Returns** chart indicates that whenever we traded, it was more profitable
    than not.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Rolling volatility** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.61 – Williams R% strategy; 6-month rolling volatility over the investment
    horizon](img/Figure_9.61_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.61 – Williams R% strategy; 6-month rolling volatility over the investment
    horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Rolling volatility** chart shows a decreasing value of rolling volatility
    over time.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Rolling Sharpe ratio** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.62 – Williams R% strategy; 6-month rolling Sharpe ratio over the
    investment horizon](img/Figure_9.62_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.62 – Williams R% strategy; 6-month rolling Sharpe ratio over the investment
    horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Rolling Sharpe ratio** chart confirms that the Sharpe ratio has been positive
    over the trading horizon, with a maximum value of 3.0.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the top five drawdown periods chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.63 – Williams R% strategy; top five drawdown periods over the investment
    horizon](img/Figure_9.63_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.63 – Williams R% strategy; top five drawdown periods over the investment
    horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Top 5 drawdown periods** chart shows that apart from one period, the other
    worst drawdown periods were not significant.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following are the **Monthly returns**, **Annual returns**, and **Distribution
    of monthly returns** charts:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.64 – Williams R% strategy; monthly returns, annual returns, and
    the distribution of monthly returns over the investment horizon](img/Figure_9.64_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.64 – Williams R% strategy; monthly returns, annual returns, and the
    distribution of monthly returns over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Monthly returns** table suggests that while we have not traded in every
    month, whenever we did trade, it was largely profitable. The **Annual returns**
    chart confirms this. The **Distribution of monthly returns** chart confirms a
    positive skew with a large kurtosis.
  prefs: []
  type: TYPE_NORMAL
- en: The Williams R% strategy is a highly performant strategy for the Microsoft stock
    with a Sharpe ratio of 1.53 and a maximum drawdown of only -10% over the given
    time frame.
  prefs: []
  type: TYPE_NORMAL
- en: Learning mean-reversion strategies
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Mean-reversion strategies are based on the assumption that some statistics will
    revert to their long-term mean values.
  prefs: []
  type: TYPE_NORMAL
- en: Bollinger band strategy
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The Bollinger band strategy is based on identifying periods of short-term volatility.
  prefs: []
  type: TYPE_NORMAL
- en: 'It depends on three lines:'
  prefs: []
  type: TYPE_NORMAL
- en: '*The middle band line* is the simple moving average, usually 20-50 days.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*The upper band* is the 2 standard deviations above the middle base line.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*The lower band* is the 2 standard deviations below the middle base line.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'One way of creating trading signals from Bollinger bands is to define the overbought
    and oversold market state:'
  prefs: []
  type: TYPE_NORMAL
- en: The market is overbought when the price of the financial asset rises above the
    upper band and so is due for a pullback.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The market is oversold when the price of the financial asset drops below the
    lower band and so is due to bounce back.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'This is a mean-reversion strategy, meaning that long term, the price should
    remain within the lower and upper bands. It works best for low-volatility stocks:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: 'The outputs are as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.65 – Bollinger band strategy; summary return and risk statistics](img/Figure_9.65_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.65 – Bollinger band strategy; summary return and risk statistics
  prefs: []
  type: TYPE_NORMAL
- en: The summary statistics do show that the stability is solid, with the tail ratio
    favorable. However, the max drawdown is a substantial -27.3%.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the worst five drawdown periods chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.66 – Bollinger band strategy; worst five drawdown periods](img/Figure_9.66_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.66 – Bollinger band strategy; worst five drawdown periods
  prefs: []
  type: TYPE_NORMAL
- en: The duration of the worst drawdown periods is substantial. Maybe we should tweak
    the entry/exit rules to avoid entering the trades in these periods.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Cumulative returns** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.67 – Bollinger band strategy; cumulative returns over the investment
    horizon](img/Figure_9.67_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.67 – Bollinger band strategy; cumulative returns over the investment
    horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Cumulative returns** chart show we have not traded for 10 years and then
    we have experienced a consistent positive trend in cumulative returns.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Returns** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.68 – Bollinger band strategy; returns over the investment horizon](img/Figure_9.68_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.68 – Bollinger band strategy; returns over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Returns** chart shows that the positive returns have outweighed the negative
    ones.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Rolling volatility** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.69 – Bollinger band strategy; 6-month rolling volatility over the
    investment horizon](img/Figure_9.69_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.69 – Bollinger band strategy; 6-month rolling volatility over the investment
    horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Rolling volatility** chart suggests that the strategy has substantial
    volatility.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Rolling Sharpe ratio** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.70 – Bollinger band strategy; 6-month rolling Sharpe ratio over
    the investment horizon](img/Figure_9.70_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.70 – Bollinger band strategy; 6-month rolling Sharpe ratio over the
    investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Rolling Sharpe ratio** chart shows that the rolling Sharpe ratio fluctuates
    widely with a max value of close to 4 and a minimum below -2, but on average it
    is positive.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Top 5 drawdown periods** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.71 – Bollinger band strategy; top five drawdown periods over the
    investment horizon](img/Figure_9.71_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.71 – Bollinger band strategy; top five drawdown periods over the investment
    horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Top 5 drawdown periods** chart confirms the drawdown periods duration
    has been substantial.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following are the **Monthly returns**, **Annual returns**, and **Distribution
    of monthly returns** charts:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.72 – Bollinger band strategy; monthly returns, annual returns, and
    the distribution of monthly returns over the investment horizon](img/Figure_9.72_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.72 – Bollinger band strategy; monthly returns, annual returns, and
    the distribution of monthly returns over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Monthly returns** table shows that there has been no trade from 2000 to
    2010 due to our entry/exit rules. The **Annual returns** chart, however, shows
    that whenever a trade did happen, it was profitable. The **Distribution of monthly
    returns** chart shows slight negative skew with enormous kurtosis.
  prefs: []
  type: TYPE_NORMAL
- en: The Bollinger band strategy is a suitable strategy for oscillating stocks. Here,
    we applied it to the stock of **Dollar General** (**DG**) Corp.
  prefs: []
  type: TYPE_NORMAL
- en: Pairs trading strategy
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: This strategy became very popular some time ago and ever since, has been overused,
    so is barely profitable nowadays.
  prefs: []
  type: TYPE_NORMAL
- en: This strategy involves finding pairs of stocks that are moving closely together,
    or are highly co-integrated. Then, at the same time, we place a `BUY` order for
    one stock and a `SELL` order for the other stock, assuming their relationship
    will revert back. There are a wide range of varieties of tweaks in terms of how
    this algorithm is implemented – are the prices log prices? Do we trade only if
    the relationships are very strong?
  prefs: []
  type: TYPE_NORMAL
- en: 'For simplicity, we have chosen the **Pepsi Cola** (**PEP**) and **Coca-Cola**
    (**KO**) stocks. Another choice could be **Citibank** (**C**) and **Goldman Sachs**
    (**GS**). We have two conditions: first, the p-value of cointegration has to be
    very strong, and then the z-score has to be very strong:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE10]'
  prefs: []
  type: TYPE_PRE
- en: 'The outputs are as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.73 – Pairs trading strategy; summary return and risk statistics](img/Figure_9.73_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.73 – Pairs trading strategy; summary return and risk statistics
  prefs: []
  type: TYPE_NORMAL
- en: While the Sharpe ratio is very low, the max drawdown is also very low. The stability
    is average.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the worst five drawdown periods chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.74 – Pairs trading strategy; worst five drawdown periods](img/Figure_9.74_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.74 – Pairs trading strategy; worst five drawdown periods
  prefs: []
  type: TYPE_NORMAL
- en: The worst five drawdown periods table shows that the max drawdown was negligible
    and very short.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Cumulative returns** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.75 – Pairs trading strategy; cumulative returns over the investment
    horizon](img/Figure_9.75_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.75 – Pairs trading strategy; cumulative returns over the investment
    horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Cumulative returns** chart indicates that we have not traded for 2 years
    and then were hugely profitable until the last period.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Returns** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.76 – Pairs trading strategy; returns over the investment horizon](img/Figure_9.76_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.76 – Pairs trading strategy; returns over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Returns** chart shows that the returns have been more positive than negative
    for the trading period except for the last period.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Rolling volatility** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.77 – Pairs trading strategy; 6-month rolling volatility over the
    investment horizon](img/Figure_9.77_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.77 – Pairs trading strategy; 6-month rolling volatility over the investment
    horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Rolling volatility** chart shows an ever-increasing volatility though
    the volatility magnitude is not significant.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Rolling Sharpe ratio** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.78 – Pairs trading strategy; 6-month rolling Sharpe ratio over the
    investment horizon](img/Figure_9.78_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.78 – Pairs trading strategy; 6-month rolling Sharpe ratio over the
    investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Rolling Sharpe ratio** chart shows that if we improved our exit rule and
    exited earlier, our Sharpe ratio would higher than 1.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Top 5 drawdown periods** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.79 – Pairs trading strategy; top five drawdown periods over the
    investment horizon](img/Figure_9.79_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.79 – Pairs trading strategy; top five drawdown periods over the investment
    horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Top 5 drawdown periods** chart tells us the same story – the last period
    was the cause of why this backtesting result is not as successful as it could
    have been.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following are the **Monthly returns**, **Annual returns**, and **Distribution
    of monthly returns** charts:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.80 – Pairs trading strategy; monthly returns, annual returns, and
    the distribution of monthly returns over the investment horizon](img/Figure_9.80_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.80 – Pairs trading strategy; monthly returns, annual returns, and the
    distribution of monthly returns over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Monthly returns** table confirms we have not traded until the year of
    2017\. The **Annual returns** chart shows that the trading in 2017 was successful
    and the **Distribution of monthly returns** chart shows a slightly negatively
    skewed chart with small kurtosis.
  prefs: []
  type: TYPE_NORMAL
- en: The pairs trading strategy has been overused over the last decade, and so is
    less profitable. One simple way of identifying the pair is to look for competitors
    – in this example, PepsiCo and the Coca-Cola Corporation.
  prefs: []
  type: TYPE_NORMAL
- en: Learning mathematical model-based strategies
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: We will now look at the various mathematical model-based strategies in the following
    sections.
  prefs: []
  type: TYPE_NORMAL
- en: Minimization of the portfolio volatility strategy with monthly trading
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The objective of this strategy is to minimize portfolio volatility. It has been
    inspired by [https://github.com/letianzj/QuantResearch/tree/master/backtest](https://github.com/letianzj/QuantResearch/tree/master/backtest).
  prefs: []
  type: TYPE_NORMAL
- en: In the following example, the portfolio consists of all stocks in the *Dow Jones
    Industrial Average* index.
  prefs: []
  type: TYPE_NORMAL
- en: 'The key success factors of the strategy are the following:'
  prefs: []
  type: TYPE_NORMAL
- en: The stock universe – perhaps a portfolio of global index ETFs would fare better.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The rolling window – we go back 200 days.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The frequency of trades – the following algorithm uses monthly trading – notice
    the construct.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The code is as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  prefs: []
  type: TYPE_PRE
- en: 'The outputs are as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.81 – Minimization of the portfolio volatility strategy; summary
    return and risk statistics](img/Figure_9.81_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.81 – Minimization of the portfolio volatility strategy; summary return
    and risk statistics
  prefs: []
  type: TYPE_NORMAL
- en: The results are positive – see the strong stability of `0.91` while the tail
    ratio is just over 1.
  prefs: []
  type: TYPE_NORMAL
- en: Notice the results are including the transaction costs and they would be much
    worse if we traded daily. Always experiment with the optimal trading frequency.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the worst five drawdown periods chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.82 – Minimization of the portfolio volatility strategy; worst five
    drawdown periods](img/Figure_9.82_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.82 – Minimization of the portfolio volatility strategy; worst five
    drawdown periods
  prefs: []
  type: TYPE_NORMAL
- en: The worst drawdown period was over a year with the net drawdown of -18.22%.
    The magnitude of the net drawdown for the other worst periods is below -10%.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Cumulative returns** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.83 – Minimization of the portfolio volatility strategy; cumulative
    returns over the investment horizon](img/Figure_9.83_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.83 – Minimization of the portfolio volatility strategy; cumulative
    returns over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: We see that the cumulative returns are consistently growing, which is expected
    given the stability of 0.91.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Returns** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.84 – Minimization of the portfolio volatility strategy; returns
    over the investment horizon](img/Figure_9.84_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.84 – Minimization of the portfolio volatility strategy; returns over
    the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The `-0.3` to `0.04`.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Rolling volatility** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.85 – Minimization of the portfolio volatility strategy; 6-month
    rolling volatility over the investment horizon](img/Figure_9.85_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.85 – Minimization of the portfolio volatility strategy; 6-month rolling
    volatility over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The `0.18` and that the rolling volatility was cycling around `0.1`.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Rolling Sharpe ratio** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.86 – Minimization of the portfolio volatility strategy; 6-month
    rolling Sharpe ratio over the investment horizon](img/Figure_9.86_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.86 – Minimization of the portfolio volatility strategy; 6-month rolling
    Sharpe ratio over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The `5.0` with the minimum slightly above `-3.0`.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Top 5 drawdown periods** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.87 – Minimization of the portfolio volatility strategy; top five
    drawdown periods over the investment horizon](img/Figure_9.87_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.87 – Minimization of the portfolio volatility strategy; top five drawdown
    periods over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Top 5 drawdown periods** chart confirms that if we avoided the worst drawdown
    period by smarter choice of entry/exit rules, we would have dramatically improved
    the strategy's performance.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following are the **Monthly returns**, **Annual returns**, and **Distribution
    of monthly returns** charts:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.88 – Minimization of the portfolio volatility strategy; monthly
    returns, annual returns, and the distribution of monthly returns over the investment
    horizon](img/Figure_9.88_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.88 – Minimization of the portfolio volatility strategy; monthly returns,
    annual returns, and the distribution of monthly returns over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Monthly returns** table illustrates that we have not traded for the first
    few months of 2010\. The **Annual returns** chart shows that the strategy has
    been profitable every year, but 2015\. The **Distribution of monthly returns**
    chart draws a slightly negatively skewed strategy with small kurtosis.
  prefs: []
  type: TYPE_NORMAL
- en: Minimization of the portfolio volatility strategy is usually only profitable
    for non-daily trading. In this example, we used monthly trading and achieved a
    Sharpe ratio of 0.93, with a maximum drawdown of -18.2%.
  prefs: []
  type: TYPE_NORMAL
- en: Maximum Sharpe ratio strategy with monthly trading
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: This strategy is based on ideas contained in Harry Markowitz's 1952 paper *Portfolio
    Selection*. In brief, the best portfolios lie on the *efficient frontier* – a
    set of portfolios with the highest expected portfolio return for each level of
    risk.
  prefs: []
  type: TYPE_NORMAL
- en: In this strategy, for the given stocks, we choose their weights so that they
    maximize the portfolio's expected Sharpe ratio – such a portfolio lies on the
    efficient frontier.
  prefs: []
  type: TYPE_NORMAL
- en: 'We use the `PyPortfolioOpt` Python library. To install it, either use the book''s
    `conda` environment or the following command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE12]'
  prefs: []
  type: TYPE_PRE
- en: 'The outputs are as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.89 – Maximum Sharpe ratio strategy; summary return and risk statistics](img/Figure_9.89_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.89 – Maximum Sharpe ratio strategy; summary return and risk statistics
  prefs: []
  type: TYPE_NORMAL
- en: The strategy shows solid stability of `0.76` with the tail ratio close to 1
    (`1.01`). However, the annual volatility of this strategy is very high (`17.0%`).
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the worst five drawdown periods chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.90 – Maximum Sharpe ratio strategy; worst five drawdown periods](img/Figure_9.90_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.90 – Maximum Sharpe ratio strategy; worst five drawdown periods
  prefs: []
  type: TYPE_NORMAL
- en: The worst drawdown period lasted over 2 years and had a magnitude of net drawdown
    of -21.14%. If we tweaked the entry/exit rules to avoid this drawdown period,
    the results would have been dramatically better.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Cumulative returns** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.91 – Maximum Sharpe ratio strategy; cumulative returns over the
    investment horizon](img/Figure_9.91_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.91 – Maximum Sharpe ratio strategy; cumulative returns over the investment
    horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Cumulative returns** chart shows positive stability.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Returns** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.92 – Maximum Sharpe ratio strategy; returns over the investment
    horizon](img/Figure_9.92_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.92 – Maximum Sharpe ratio strategy; returns over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Returns** chart show that the strategy was highly successful at the very
    beginning of the investment horizon.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Rolling volatility** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.93 – Maximum Sharpe ratio strategy; 6-month rolling volatility over
    the investment horizon](img/Figure_9.93_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.93 – Maximum Sharpe ratio strategy; 6-month rolling volatility over
    the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Rolling volatility** chart shows that the rolling volatility has subsidized
    with time.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Rolling Sharpe ratio** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.94 – Maximum Sharpe ratio strategy; 6-month rolling Sharpe ratio
    over the investment horizon](img/Figure_9.94_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.94 – Maximum Sharpe ratio strategy; 6-month rolling Sharpe ratio over
    the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The `5.0` while its minimum value was above `-3.0`.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Top 5 drawdown periods** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.95 – Maximum Sharpe ratio strategy; top five drawdown periods over
    the investment horizon](img/Figure_9.95_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.95 – Maximum Sharpe ratio strategy; top five drawdown periods over
    the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Top 5 drawdown periods** chart shows that the maximum drawdown periods
    have been long.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following are the **Monthly returns**, **Annual returns**, and **Distribution
    of monthly returns** charts:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.96 – Maximum Sharpe ratio strategy; monthly returns, annual returns,
    and the distribution of monthly returns over the investment horizon](img/Figure_9.96_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.96 – Maximum Sharpe ratio strategy; monthly returns, annual returns,
    and the distribution of monthly returns over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Monthly returns** table proves that we have traded virtually in every
    month. The **Annual returns** chart shows that the annual returns have been positive
    for every year but 2016\. The **Distribution of monthly returns** chart is positively
    skewed with minor kurtosis.
  prefs: []
  type: TYPE_NORMAL
- en: The maximum Sharpe ratio strategy is again usually only profitable for non-daily
    trading.
  prefs: []
  type: TYPE_NORMAL
- en: Learning time series prediction-based strategies
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Time series prediction-based strategies depend on having a precise estimate
    of stock prices at some time in the future, along with their corresponding confidence
    intervals. A calculation of the estimates is usually very time-consuming.
  prefs: []
  type: TYPE_NORMAL
- en: The simple trading rule then incorporates the relationship between the last
    known price and the future price, or its lower/upper confidence interval value.
  prefs: []
  type: TYPE_NORMAL
- en: More complex trading rules incorporate decisions based on the trend component
    and seasonality components.
  prefs: []
  type: TYPE_NORMAL
- en: SARIMAX strategy
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'This strategy is based on the most elementary rule: own the stock if the current
    price is lower than the predicted price in 7 days:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE13]'
  prefs: []
  type: TYPE_PRE
- en: 'The outputs are as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.97 – SARIMAX strategy; summary return and risk statistics](img/Figure_9.97_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.97 – SARIMAX strategy; summary return and risk statistics
  prefs: []
  type: TYPE_NORMAL
- en: Over the trading horizon, the strategy exhibited a high tail ratio of `1.95`
    with a very low stability of `0.25`. The max drawdown of `-7.7%` is excellent.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the worst five drawdown periods chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.98 – SARIMAX strategy; worst five drawdown periods](img/Figure_9.98_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.98 – SARIMAX strategy; worst five drawdown periods
  prefs: []
  type: TYPE_NORMAL
- en: The worst drawdown periods have displayed the magnitude of net drawdown below
    -10%.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Cumulative returns** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.99 – SARIMAX strategy; cumulative returns over the investment horizon](img/Figure_9.99_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.99 – SARIMAX strategy; cumulative returns over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Cumulative returns** chart proves that we have traded only in the first
    half of the trading horizon.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Returns** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.100 – SARIMAX strategy; returns over the investment horizon](img/Figure_9.100_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.100 – SARIMAX strategy; returns over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Returns** chart shows that the magnitude of returns swing has been larger
    than with other strategies.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Rolling volatility** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.101 – SARIMAX strategy; 6-month rolling volatility over the investment
    horizon](img/Figure_9.101_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.101 – SARIMAX strategy; 6-month rolling volatility over the investment
    horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Rolling volatility** chart shows that the rolling volatility has decreased
    with time.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Rolling Sharpe ratio** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.102 – SARIMAX strategy; 6-month rolling Sharpe ratio over the investment
    horizon](img/Figure_9.102_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.102 – SARIMAX strategy; 6-month rolling Sharpe ratio over the investment
    horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Rolling Sharpe ratio** chart shows that the Sharpe ratio in the first
    half of the trading horizon was excellent and then started to decrease.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Top 5 drawdown periods** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.103 – SARIMAX strategy; top five drawdown periods over the investment
    horizon](img/Figure_9.103_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.103 – SARIMAX strategy; top five drawdown periods over the investment
    horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Top 5 drawdown periods** chart demonstrates that the worst drawdown period
    was the entire second half of the trading window.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following are the **Monthly returns**, **Annual returns**, and **Distribution
    of monthly returns** charts:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.104 – Monthly returns, annual returns, and the distribution of monthly
    returns over the investment horizon](img/Figure_9.104_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.104 – Monthly returns, annual returns, and the distribution of monthly
    returns over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Monthly returns** table confirms we have not traded in the second half
    of 2017\. The **Annual returns** chart shows a positive return for 2017 and the
    **Distribution of monthly returns** chart is negatively skewed with large kurtosis.
  prefs: []
  type: TYPE_NORMAL
- en: The SARIMAX strategy entry rule has not been triggered over the tested time
    horizon on a frequent basis. Still, it produced a Sharpe ratio of 1.01, with a
    maximum drawdown of -7.7%.
  prefs: []
  type: TYPE_NORMAL
- en: Prophet strategy
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: This strategy is based on the prediction confidence intervals, and so is more
    robust than the previous one. In addition, Prophet predictions are more robust
    to frequent changes than SARIMAX. The backtesting results are all identical, but
    the prediction algorithms are significantly better.
  prefs: []
  type: TYPE_NORMAL
- en: 'We only buy the stock if the last price is below the lower value of the confidence
    interval (we anticipate that the stock price will go up) and sell the stock if
    the last price is above the upper value of the predicted confidence interval (we
    anticipate that the stock price will go down):'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE14]'
  prefs: []
  type: TYPE_PRE
- en: 'The outputs are as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.105 – Prophet strategy; summary return and risk statistics](img/Figure_9.105_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.105 – Prophet strategy; summary return and risk statistics
  prefs: []
  type: TYPE_NORMAL
- en: In comparison with the SARIMAX strategy, the Prophet strategy shows far better
    results – tail ratio of `1.37`, Sharpe ratio of `1.22`, and max drawdown of `-8.7%`.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the worst five drawdown periods chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.106 – Prophet strategy; worst five drawdown periods](img/Figure_9.106_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.106 – Prophet strategy; worst five drawdown periods
  prefs: []
  type: TYPE_NORMAL
- en: The worst five drawdown periods confirms that the magnitude of the worst net
    drawdown was below 10%.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Cumulative returns** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.107 – Prophet strategy; cumulative returns over the investment horizon](img/Figure_9.107_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.107 – Prophet strategy; cumulative returns over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Cumulative returns** chart shows that while we have not traded in certain
    periods of time, the entry/exit rules have been more robust than in the SARIMAX
    strategy – compare both the **Cumulative returns** charts.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Returns** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.108 – Prophet strategy; returns over the investment horizon](img/Figure_9.108_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.108 – Prophet strategy; returns over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Returns** chart suggests that the positive returns outweighed the negative
    returns.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Rolling volatility** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.109 – Prophet strategy; 6-month rolling volatility over the investment
    horizon](img/Figure_9.109_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.109 – Prophet strategy; 6-month rolling volatility over the investment
    horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Rolling volatility** chart shows virtually constant rolling volatility
    – this is the hallmark of the Prophet strategy.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Rolling Sharpe ratio** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.110 – Prophet strategy; 6-month rolling Sharpe ratio over the investment
    horizon](img/Figure_9.110_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.110 – Prophet strategy; 6-month rolling Sharpe ratio over the investment
    horizon
  prefs: []
  type: TYPE_NORMAL
- en: The `-.50` and `1.5`.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the **Top 5 drawdown periods** chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.111 – Prophet strategy; top five drawdown periods over the investment
    horizon](img/Figure_9.111_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.111 – Prophet strategy; top five drawdown periods over the investment
    horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Top 5 drawdown periods** chart shows that even though the drawdown periods
    were substantial, the algorithm was able to deal with them well.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following are the **Monthly returns**, **Annual returns**, and **Distribution
    of monthly returns** charts:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 9.112 – Prophet strategy; monthly returns, annual returns, and the
    distribution of monthly returns over the investment horizon](img/Figure_9.112_B15029.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 9.112 – Prophet strategy; monthly returns, annual returns, and the distribution
    of monthly returns over the investment horizon
  prefs: []
  type: TYPE_NORMAL
- en: The **Monthly returns** table confirms we have traded in every single month,
    with an excellent annual return as confirmed by the **Annual returns** chart.
    The **Distribution of monthly returns** chart is positively skewed with minor
    kurtosis.
  prefs: []
  type: TYPE_NORMAL
- en: The Prophet strategy is one of the most robust strategies, quickly adapting
    to market changes. Over the given time period, it produced a Sharpe ratio of 1.22,
    with a maximum drawdown of -8.7.
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter, we have learned that an algorithmic trading strategy is defined
    by a model, entry/leave rules, position limits, and further key properties. We
    have demonstrated how easy it is in Zipline and PyFolio to set up a complete backtesting
    and risk analysis/position analysis system, so that you can focus on the development
    of your strategies, rather than wasting your time on the infrastructure.
  prefs: []
  type: TYPE_NORMAL
- en: Even though the preceding strategies are well published, you can construct highly
    profitable strategies by means of combining them wisely, along with a smart selection
    of the entry and exit rules.
  prefs: []
  type: TYPE_NORMAL
- en: Bon voyage!
  prefs: []
  type: TYPE_NORMAL

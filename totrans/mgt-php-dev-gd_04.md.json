["```php\nBlock/\nController/\ncontrollers/\nHelper/\netc/\nModel/\nsql/\n```", "```php\n<?xml version=\"1.0\"?>\n<config>\n    <modules>\n        <Mdg_Giftregistry>\n            <active>true</active>\n            <codePool>local</codePool>\n        </Mdg_Giftregistry >\n    </modules>\n</config>\n```", "```php\n    <?xml version=\"1.0\"?>\n    <config>\n        <modules>\n            <Mdg_Giftregistry>\n                <version>0.1.0</version>\n            </Mdg_Giftregistry>\n        </modules>\n        <global>\n            <models>\n                <mdg_giftregistry>\n                    <class>Mdg_Giftregistry_Model</class>\n                </mdg_giftregistry>\n            </models>\n            <blocks>\n                <mdg_giftregistry>\n                    <class>Mdg_Giftregistry_Block</class>\n                </mdg_giftregistry>\n            </blocks>\n            <helpers>\n                <mdg_giftregistry>\n                    <class>Mdg_Giftregistry_Helper</class>\n                </mdg_giftregistry>\n            </helpers>\n            <resources>\n                <mdg_giftregistry_setup>\n                    <setup>\n                        <module>Mdg_Giftregistry</module>\n                    </setup>\n                </mdg_giftregistry_setup>\n            </resources>\n        </global>\n    </config>\n    ```", "```php\n<context>\n   <factory_alias>\n       <class>NameSpace_ModuleName_ClassType</class>\n   </factory_alias>\n</context>\n```", "```php\nMage::getModel('mdg_giftregistry/folder1_folder2_folder3_classname');\n```", "```php\n<?php\nclass Mdg_Giftregistry_Helper_Data extends Mage_Core_Helper_Abstract {\n\n}\n?>\n```", "```php\nMage::helper('mdg_registry');\n```", "```php\n    <?php\n    class Mdg_Giftregistry_Model_Type extends Mage_Core_Model_Abstract\n    {\n        public function __construct()\n        {\n            $this->_init('mdg_giftregistry/type');\n            parent::_construct();\n        }\n    }\n    ```", "```php\n    <?php\n    class Mdg_Giftregistry_Model_Mysql4_Type extends Mage_Core_Model_Mysql4_Abstract\n    {\n        public function _construct()\n        {\n            $this->_init('mdg_giftregistry/type', 'type_id');\n        }\n    }\n    ```", "```php\n    <?php\n    class Mdg_Giftregistry_Model_Mysql4_Type_Collection extends Mage_Core_Model_Mysql4_Collection_Abstract\n    {\n        public function _construct()\n        {\n            $this->_init('mdg_giftregistry/type');\n            parent::_construct();\n        }\n    }\n    ```", "```php\n    <?php\n    class Mdg_Giftregistry_Model_Item extends Mage_Core_Model_Abstract\n    {\n        public function __construct()\n        {\n            $this->_init('mdg_giftregistry/item');\n            parent::_construct();\n        }\n    }\n    ```", "```php\n    <?php\n    class Mdg_Giftregistry_Model_Mysql4_Item extends Mage_Core_Model_Mysql4_Abstract\n    {\n        public function _construct()\n        {\n            $this->_init('mdg_giftregistry/item', 'item_id');\n        }\n    }\n    ```", "```php\n    <?php\n    class Mdg_Giftregistry_Model_Mysql4_Item_Collection extends Mage_Core_Model_Mysql4_Collection_Abstract\n    {\n        public function _construct()\n        {\n            $this->_init('mdg_giftregistry/item');\n            parent::_construct();\n        }\n    }\n    ```", "```php\n    <?php\n    class Mdg_Giftregistry_Model_Entity extends Mage_Core_Model_Abstract\n    {\n        public function __construct()\n        {\n            $this->_init('mdg_giftregistry/entity');\n            parent::_construct();\n        }\n    }\n    ```", "```php\n    <?php\n    class Mdg_Giftregistry_Model_Mysql4_Entity extends Mage_Core_Model_Mysql4_Abstract\n    {\n        public function _construct()\n        {\n            $this->_init('mdg_giftregistry/entity', 'entity_id');\n        }\n    }\n    ```", "```php\n    <?php\n    class Mdg_Giftregistry_Model_Mysql4_Entity_Collection extends Mage_Core_Model_Mysql4_Collection_Abstract\n    {\n        public function _construct()\n        {\n            $this->_init('mdg_giftregistry/entity');\n            parent::_construct();\n        }\n    }\n    ```", "```php\n**$ php shell/imc.php**\n\n```", "```php\n    **magento > $customer = Mage::getModel('customer/customer')->load(1);**\n\n    ```", "```php\n    **magento > $registry = Mage::getModel('mdg_giftregistry/entity');**\n\n    ```", "```php\n    **magento > print_r($customer->getData());**\n    **magento > print_r($registry->getData());**\n\n    ```", "```php\n    **magento > $registry->setCustomerId($customer->getId());**\n    **magento > $registry->setTypeId(1);**\n    **magento > $registry->setWebsiteId(1);**\n    **magento > $registry->setEventDate('2012-12-12');**\n    **magento > $registry->setEventCountry('CA');**\n    **magento > $registry->setEventLocation('Toronto');**\n\n    ```", "```php\n    **magento > print_r($registry->getData());**\n\n    ```", "```php\n    **magento > $registry->save();**\n\n    ```", "```php\nFatal error: Call to a member function beginTransaction() on a non-object in \u2026/app/code/core/Mage/Core/Model/Abstract.php on line 313\n```", "```php\n    \u2026\n    <models>\n        <mdg_giftregistry>\n            <class>Mdg_Giftregistry_Model</class>\n            <resourceModel>mdg_giftregistry_mysql4</resourceModel>\n        </mdg_giftregistry>\n        <mdg_giftregistry_mysql4>\n            <class>Mdg_Giftregistry_Model_Mysql4</class>\n            <entities>\n                <entity>\n                    <table>mdg_giftregistry_entity</table>\n                </entity>\n                <item>\n                    <table>mdg_giftregistry_item</table>\n                </item>\n                <type>\n                    <table>mdg_giftregistry_type</table>\n                </type>\n            </entities>\n        </mdg_giftregistry_mysql4>\n    </models>\n    \u2026\n    ```", "```php\n\u2026\n<resources>\n    <mdg_giftregistry_setup>\n        <setup>\n            <module>Mdg_Giftregistry</module>\n        </setup>\n    </mdg_giftregistry_setup>\n</resources>\n\u2026\n```", "```php\n\u2026\n<resources>\n    <mdg_giftregistry_setup>\n        <setup>\n            <module>Mdg_Giftregistry</module>\n            <class>Mdg_Giftregistry_Model_Resource_Setup</class>\n        </setup>\n        <connection>\n            <use>core_setup</use>\n        </connection>\n    </mdg_giftregistry_setup>\n    <mdg_giftregistry_write>\n        <connection>\n            <use>core_write</use>\n        </connection>\n    </mdg_giftregistry_write>\n    <mdg_giftregistry_read>\n        <connection>\n            <use>core_read</use>\n        </connection>\n    </mdg_giftregistry_read>\n</resources>\n\u2026\n```", "```php\n<?php\nclass Mdg_Giftregistry_Model_Resource_Setup extends Mage_Core_Model_Resource_Setup\n{\n\n}\n```", "```php\n<modules>\n  <Mdg_Giftregistry>\n     <version>0.1.0</version>\n   </Mdg_Giftregistry>\n</modules>\n```", "```php\n<?php\n\n$installer = $this;\n$installer->startSetup();\n// Create the mdg_giftregistry/registry table\n$tableName = $installer->getTable('mdg_giftregistry/entity');\n// Check if the table already exists\nif ($installer->getConnection()->isTableExists($tableName) != true) {\n    $table = $installer->getConnection()\n        ->newTable($tableName)\n        ->addColumn('entity_id', Varien_Db_Ddl_Table::TYPE_INTEGER, null,\n            array(\n                'identity' => true,\n                'unsigned' => true,\n                'nullable' => false,\n                'primary' => true,\n            ),\n            'Entity Id'\n        )\n        ->addColumn('customer_id', Varien_Db_Ddl_Table::TYPE_INTEGER, null,\n            array(\n                'unsigned' => true,\n                'nullable' => false,\n                'default' => '0',\n            ),\n            'Customer Id'\n        )\n        ->addColumn('type_id', Varien_Db_Ddl_Table::TYPE_SMALLINT, null,\n            array(\n                'unsigned' => true,\n                'nullable' => false,\n                'default' => '0',\n            ),\n            'Type Id'\n        )\n        ->addColumn('website_id', Varien_Db_Ddl_Table::TYPE_SMALLINT, null,\n            array(\n                'unsigned' => true,\n                'nullable' => false,\n                'default' => '0',\n            ),\n            'Website Id'\n        )\n        ->addColumn('event_name', Varien_Db_Ddl_Table::TYPE_TEXT, 255,\n            array(),\n            'Event Name'\n        )\n        ->addColumn('event_date', Varien_Db_Ddl_Table::TYPE_DATE, null,\n            array(),\n            'Event Date'\n        )\n        ->addColumn('event_country', Varien_Db_Ddl_Table::TYPE_TEXT, 3,\n            array(),\n            'Event Country'\n        )\n        ->addColumn('event_location', Varien_Db_Ddl_Table::TYPE_TEXT, 255,\n            array(),\n            'Event Location'\n        )\n        ->addColumn('created_at', Varien_Db_Ddl_Table::TYPE_TIMESTAMP, null,\n            array(\n                'nullable' => false,\n            ),\n            'Created At')\n        ->addIndex($installer->getIdxName('mdg_giftregistry/entity', array('customer_id')),\n            array('customer_id'))\n        ->addIndex($installer->getIdxName('mdg_giftregistry/entity', array('website_id')),\n            array('website_id'))\n        ->addIndex($installer->getIdxName('mdg_giftregistry/entity', array('type_id')),\n            array('type_id'))\n        ->addForeignKey(\n            $installer->getFkName(\n                'mdg_giftregistry/entity',\n                'customer_id',\n                'customer/entity',\n                'entity_id'\n            ),\n            'customer_id', $installer->getTable('customer/entity'), 'entity_id',\n            Varien_Db_Ddl_Table::ACTION_CASCADE, Varien_Db_Ddl_Table::ACTION_CASCADE)\n        ->addForeignKey(\n            $installer->getFkName(\n                'mdg_giftregistry/entity',\n                'website_id',\n                'core/website',\n                'website_id'\n            ),\n            'website_id', $installer->getTable('core/website'), 'website_id',\n            Varien_Db_Ddl_Table::ACTION_CASCADE, Varien_Db_Ddl_Table::ACTION_CASCADE)\n        ->addForeignKey(\n            $installer->getFkName(\n                'mdg_giftregistry/entity',\n                'type_id',\n                'mdg_giftregistry/type',\n                'type_id'\n            ),\n            'type_id', $installer->getTable('mdg_giftregistry/type'), 'type_id',\n            Varien_Db_Ddl_Table::ACTION_CASCADE, Varien_Db_Ddl_Table::ACTION_CASCADE);\n\n    $installer->getConnection()->createTable($table);\n}\n$installer->endSetup();\n```", "```php\n$installer->getConnection()->createTable($table);\n```", "```php\n$installer->getTable('mdg_giftregistry/entity')\n```", "```php\n    <?php\n    $registryTypes = array(\n        array(\n            'code' => 'baby_shower',\n            'name' => 'Baby Shower',\n            'description' => 'Baby Shower',\n            'store_id' => Mage_Core_Model_App::ADMIN_STORE_ID,\n            'is_active' => 1,\n        ),\n        array(\n            'code' => 'wedding',\n            'name' => 'Wedding',\n            'description' => 'Wedding',\n            'store_id' => Mage_Core_Model_App::ADMIN_STORE_ID,\n            'is_active' => 1,\n        ),\n        array(\n            'code' => 'birthday',\n            'name' => 'Birthday',\n            'description' => 'Birthday',\n            'store_id' => Mage_Core_Model_App::ADMIN_STORE_ID,\n            'is_active' => 1,\n        ),\n    );\n\n    foreach ($registryTypes as $data) {\n        Mage::getModel('mdg_giftregistry/type')\n            ->addData($data)\n            ->setStoreId($data['store_id'])\n            ->save();\n    }\n    ```", "```php\nforeach ($registryTypes as $data) {\n    Mage::getModel('mdg_giftregistry/type')\n        ->addData($data)\n        ->setStoreId($data['store_id'])\n        ->save();\n}\n```", "```php\n    **mysql> DELETE FROM `core_resource` WHERE `code` =  'mdg_giftregistry_setup'**\n\n    ```", "```php\n<config>\n\u2026\n    <frontend>\n        <routers>\n            <mdg_giftregistry>\n                <use>standard</use>\n                <args>\n                    <module>Mdg_Giftregistry</module>\n                    <frontName>giftregistry</frontName>\n                </args>\n            </mdg_giftregistry>\n        </routers>\n    </frontend>\n\u2026\n</config>\n```", "```php\n<?php \nclass Mdg_Giftregistry_IndexController extends Mage_Core_Controller_Front_Action\n{\n     public function indexAction()\n  {\n    echo 'This is our test controller';\n     }\n}\n```", "```php\n<?php \nclass Mdg_Giftregistry_IndexController extends Mage_Core_Controller_Front_Action\n{\n     public function indexAction()\n  {\n    $this->loadLayout();\n    $this->renderLayout();\n     }\n}\n```", "```php\n<?php\nclass Mdg_Giftregistry_IndexController extends Mage_Core_Controller_Front_Action\n{\n    public function indexAction()\n    {\n        $this->loadLayout();\n        $this->renderLayout();\n        return $this;\n    }\n\n    public function deleteAction()\n    {\n        $this->loadLayout();\n        $this->renderLayout();\n        return $this;\n    }\n\n    public function newAction()\n    {\n        $this->loadLayout();\n        $this->renderLayout();\n        return $this;\n    }\n\n    public function editAction()\n    {\n        $this->loadLayout();\n        $this->renderLayout();\n        return $this;\n    }\n\n    public function newPostAction()\n    {\n        $this->loadLayout();\n        $this->renderLayout();\n        return $this;\n    }\n\n    public function editPostAction()\n    {\n        $this->loadLayout();\n        $this->renderLayout();\n        return $this;\n    }\n}\n```", "```php\n<?php\nclass Mdg_Giftregistry_IndexController extends Mage_Core_Controller_Front_Action\n{\n    public function preDispatch()\n    {\n        parent::preDispatch();\n        if (!Mage::getSingleton('customer/session')->authenticate($this)) {\n            $this->getResponse()->setRedirect(Mage::helper('customer')->getLoginUrl());\n            $this->setFlag('', self::FLAG_NO_DISPATCH, true);\n        }\n    }\n\u2026\n```", "```php\n    $this->getRequest()->isPost()\n    ```", "```php\n    $this->getRequest()->getParams()\n    ```", "```php\n    public function updateRegistryData(Mage_Customer_Model_Customer $customer, $data)\n    {\n        try{\n            if(!empty($data))\n            {\n                $this->setCustomerId($customer->getId());\n                $this->setWebsiteId($customer->getWebsiteId());\n                $this->setTypeId($data['type_id']);\n                $this->setEventName($data['event_name']);\n                $this->setEventDate($data['event_date']);\n                $this->setEventCountry($data['event_country']);\n                $this->setEventLocation($data['event_location']);\n            }else{\n                throw new Exception(\"Error Processing Request: Insufficient Data Provided\");\n            }\n        } catch (Exception $e){\n            Mage::logException($e);\n        }\n        return $this;\n    }\n    ```", "```php\npublic function newPostAction()\n{\n    try {\n        $data = $this->getRequest()->getParams();\n        $registry = Mage::getModel('mdg_giftregistry/entity');\n        $customer = Mage::getSingleton('customer/session')->getCustomer();\n\n        if($this->getRequest()->getPost() && !empty($data)) {\n            $registry->updateRegistryData($customer, $data);\n            $registry->save();\n            $successMessage = Mage::helper('mdg_giftregistry')->__('Registry Successfully Created');\n            Mage::getSingleton('core/session')->addSuccess($successMessage);\n        }else{\n            throw new Exception(\"Insufficient Data provided\");\n        }\n    } catch (Mage_Core_Exception $e) {\n        Mage::getSingleton('core/session')->addError($e->getMessage());\n        $this->_redirect('*/*/');\n    }\n    $this->_redirect('*/*/');\n}\n```", "```php\npublic function editPostAction()\n{\n    try {\n        $data = $this->getRequest()->getParams();\n        $registry = Mage::getModel('mdg_giftregistry/entity');\n        $customer = Mage::getSingleton('customer/session')->getCustomer();\n\n        if($this->getRequest()->getPosts() && !empty($data) )\n        {\n            $registry->load($data['registry_id']);\n            if($registry){\n                $registry->updateRegistryData($customer, $data);\n                $registry->save();\n                $successMessage =  Mage::helper('mdg_giftregistry')->__('Registry Successfully Saved');\n                Mage::getSingleton('core/session')->addSuccess($successMessage);\n            }else {\n                throw new Exception(\"Invalid Registry Specified\");\n            }\n        }else {\n            throw new Exception(\"Insufficient Data provided\");\n        }\n    } catch (Mage_Core_Exception $e) {\n        Mage::getSingleton('core/session')->addError($e->getMessage());\n        $this->_redirect('*/*/');\n    }\n    $this->_redirect('*/*/');\n}\n```", "```php\npublic function deleteAction()\n{\n    try {\n        $registryId = $this->getRequest()->getParam('registry_id');\n        if($registryId && $this->getRequest()->getPost()){\n            if($registry = Mage::getModel('mdg_giftregistry/entity')->load($registryId))\n            {\n                $registry->delete();\n                $successMessage =  Mage::helper('mdg_giftregistry')->__('Gift registry has been succesfully deleted.');\n                Mage::getSingleton('core/session')->addSuccess($successMessage);\n            }else{\n                throw new Exception(\"There was a problem deleting the registry\");\n            }\n        }\n    } catch (Exception $e) {\n        Mage::getSingleton('core/session')->addError($e->getMessage());\n        $this->_redirect('*/*/');\n    }\n}\n```", "```php\n    <?php\n    class Mdg_Giftregistry_SearchController extends Mage_Core_Controller_Front_Action\n    {\n        public function indexAction()\n        {\n            $this->loadLayout();\n            $this->renderLayout();\n            return $this;\n        }\n        public function resultsAction()\n        {\n            $this->loadLayout();\n            $this->renderLayout();\n            return $this;\n        }\n    }\n    ```", "```php\npublic function resultsAction()\n{\n    $this->loadLayout();\n    if ($searchParams = $this->getRequest()->getParam('search_params')) {\n        $results = Mage::getModel('mdg_giftregistry/entity')->getCollection();\n        if($searchParams['type']){\n            $results->addFieldToFilter('type_id', $searchParams['type']);\n        }\n        if($searchParams['date']){\n            $results->addFieldToFilter('event_date', $searchParams['date']);\n        }\n        if($searchParams['location']){\n            $results->addFieldToFilter('event_location', $searchParams['location']);\n        }\n        $this->getLayout()->getBlock('mdg_giftregistry.search.results')\n            ->setResults($results);\n    }\n    $this->renderLayout();\n    return $this;\n}\n```", "```php\n$this->getLayout()->getBlock('mdg_giftregistry.search.results')\n        ->setResults($results);\n```", "```php\n    <?php\n    class Mdg_Giftregistry_ViewController extends Mage_Core_Controller_Front_Action\n    {\n        public function viewAction()\n        {\n            $registryId = $this->getRequest()->getParam('registry_id');\n            if($registryId){\n                $entity = Mage::getModel('mdg_giftregistry/entity');\n                if($entity->load($registryId))\n                {\n                    Mage::register('loaded_registry', $entity);\n                    $this->loadLayout();\n                    $this->_initLayoutMessages('customer/session');\n                    $this->renderLayout();\n                    return $this;\n                } else {\n                    $this->_forward('noroute');\n                    return $this;\n                }\n            }\n        }\n    }\n    ```", "```php\n    <layout version=\"0.1.0\">\n      <mdg_giftregistry_index_index>\n      </mdg_giftregistry_index_index>  \n\n      <mdg_giftregistry_index_new>\n      </mdg_giftregistry_index_new>\n\n      <mdg_giftregistry_index_edit>\n      </mdg_giftregistry_index_edit>\n\n      <mdg_giftregistry_view_view>\n      </mdg_giftregistry_view_view>\n\n      <mdg_giftregistry_search_index>\n      </mdg_giftregistry_search_index>\n\n      <mdg_giftregistry_search_results>\n      </mdg_giftregistry_search_results>\n    </layout>\n    ```", "```php\n    <frontend>\n       <layout>\n           <updates>\n               <mdg_giftregistry module=\"mdg_giftregistry\">\n                   <file>mdg_giftregistry.xml</file>\n               </mdg_giftregistry>\n           </updates>\n       </layout>\n       \u2026\n    </frontend>\n    ```", "```php\n    <?php\n    class Mdg_Giftregistry_Block_list extends Mage_Core_Block_Template\n    {\n        public function getCustomerRegistries()\n        {\n            $collection = null;\n            $currentCustomer = Mage::getSingleton('customer/session')->getCustomer();\n            if($currentCustomer)\n            {\n                $collection = Mage::getModel('mdg_giftregistry/entity')->getCollection()\n                    ->addFieldToFilter('customer_id', $currentCustomer->getId());\n            }\n            return $collection;\n        }\n    }\n    ```", "```php\n    <reference name=\"content\">\n        <block name=\"giftregistry.list\" type=\"mdg_giftregistry/list\" template=\"mdg/list.phtml\" as=\"giftregistry_list\"/>\n    </reference>\n    ```", "```php\n    <?php\n    $_collection = $this->getCustomerRegistries();\n    ?>\n    <div class=\"customer-list\">\n        <ul>\n            <?php foreach($_collection as $registry): ?>\n                <li>\n                    <h3><?php echo $registry->getEventName(); ?></h3>\n                    <p><strong><?php echo $this->__('Event Date:') ?> <?php echo $registry->getEventDate(); ?></strong></p>\n                    <p><strong><?php echo $this->__('Event Location:') ?> <?php echo $registry->getEventLocation(); ?></strong></p>\n                    <a href=\"<?php echo $this->getUrl('giftregistry/view/view', array('_query' => array('registry_id' => $registry->getEntityId()))) ?>\">\n                        <?php echo $this->__('View Registry') ?>\n                    </a>\n                </li>\n            <?php endforeach; ?>\n        </ul>\n    </div>\n    ```", "```php\n<?php\n    $_collection = $this->getCustomerRegistries();\n?>\n<div class=\"customer-list\">\n    <?php if(!$_collection->count()): ?>\n        <h2><?php echo $this->__('You have no registries.') ?></h2>\n        <a href=\"<?php echo $this->getUrl('giftregistry/index/new') ?>\">\n            <?php echo $this->__('Click Here to create a new Gift Registry') ?>\n        </a>\n    <?php else: ?>\n        <ul>\n            <?php foreach($_collection as $registry): ?>\n                <li>\n                    <h3><?php echo $registry->getEventName(); ?></h3>\n                    <p><strong><?php echo $this->__('Event Date:') ?> <?php echo $registry->getEventDate(); ?></strong></p>\n                    <p><strong><?php echo $this->__('Event Location:') ?> <?php echo $registry->getEventLocation(); ?></strong></p>\n                    <a href=\"<?php echo $this->getUrl('giftregistry/view/view', array('_query' => array('registry_id' => $registry->getEntityId()))) ?>\">\n                        <?php echo $this->__('View Registry') ?>\n                    </a>\n                    <a href=\"<?php echo $this->getUrl('giftregistry/index/edit', array('_query' => array('registry_id' => $registry->getEntityId()))) ?>\">\n                        <?php echo $this->__('Edit Registry') ?>\n                    </a>\n                    <a href=\"<?php echo $this->getUrl('giftregistry/index/delete', array('_query' => array('registry_id' => $registry->getEntityId()))) ?>\">\n                        <?php echo $this->__('Delete Registry') ?>\n                    </a>\n\n                </li>\n            <?php endforeach; ?>\n        </ul>\n    <?php endif; ?>\n</div>\n```", "```php\n    <reference name=\"content\">\n        <block name=\"giftregistry.new\" type=\"core/template\" template=\"mdg/new.phtml\" as=\"giftregistry_new\"/>\n    </reference>\n    ```", "```php\n<?php $helper = Mage::helper('mdg_giftregistry'); ?>\n<form action=\"<?php echo $this->getUrl('giftregistry/index/newPost/') ?>\" method=\"post\" id=\"form-validate\">\n    <fieldset>\n        <?php echo $this->getBlockHtml('formkey')?>\n        <ul class=\"form-list\">\n            <li>\n                <label for=\"type_id\"><?php echo $this->__('Event type') ?></label>\n                <select name=\"type_id\" id=\"type_id\">\n                    <?php foreach($helper->getEventTypes() as $type): ?>\n                        <option id=\"<?php echo $type->getTypeId(); ?>\" value=\"<?php echo $type->getCode(); ?>\">\n                            <?php echo $type->getName(); ?>\n                        </option>\n                    <?php endforeach; ?>\n                </select>\n            </li>\n            <li class=\"field\">\n                <input type=\"text\" name=\"event_name\" id=\"event_name\" value=\"\" title=\"Event Name\"/>\n                <label class=\"giftreg\" for=\"event_name\"><?php echo $this->__('Event Name') ?></label>\n            </li>\n            <li class=\"field\">\n                <input type=\"text\" name=\"event_location\" id=\"event_location\" value=\"\" title=\"Event Location\"/>\n                <label class=\"giftreg\" for=\"event_location\"><?php echo $this->__('Event Location') ?></label>\n            </li>\n            <li class=\"field\">\n                <input type=\"text\" name=\"event_country\" id=\"event_country\" value=\"\" title=\"Event Country\"/>\n                <label class=\"giftreg\" for=\"event_country\"><?php echo $this->__('Event Country') ?></label>\n            </li>\n        </ul>\n        <div class=\"buttons-set\">\n            <button type=\"submit\" title=\"Save\" class=\"button\">\n                <span>\n                    <span><?php echo $this->__('Save') ?></span>\n                </span>\n            </button>\n        </div>\n    </fieldset>\n</form>\n<script type=\"text/javascript\">\n    //<![CDATA[\n    var dataForm = new VarienForm('form-validate', true);\n    //]]>\n</script>\n```", "```php\n    <?php\n    class Mdg_Giftregistry_Helper_Data extends Mage_Core_Helper_Abstract {\n\n    public function getEventTypes()\n        {\n            $collection = Mage::getModel('mdg_giftregistry/type')->getCollection();\n            return $collection;\n        }\n    }\n    ```", "```php\n<?php\n    $helper = Mage::helper('mdg_giftregistry');\n    $loadedRegistry = Mage::getSingleton('customer/session')->getLoadedRegistry();\n?>\n<?php if($loadedRegistry): ?>\n    <form action=\"<?php echo $this->getUrl('giftregistry/index/editPost/') ?>\" method=\"post\" id=\"form-validate\">\n        <fieldset>\n            <?php echo $this->getBlockHtml('formkey')?>\n            <input type=\"hidden\" id=\"type_id\" value=\"<?php echo $loadedRegistry->getTypeId(); ?>\" />\n            <ul class=\"form-list\">\n                <li class=\"field\">\n                    <label class=\"giftreg\" for=\"event_name\"><?php echo $this->__('Event Name') ?></label>\n                    <input type=\"text\" name=\"event_name\" id=\"event_name\" value=\"<?php echo $loadedRegistry->getEventName(); ?>\" title=\"Event Name\"/>\n                </li>\n                <li class=\"field\">\n                    <label class=\"giftreg\" for=\"event_location\"><?php echo $this->__('Event Location') ?></label>\n                    <input type=\"text\" name=\"event_location\" id=\"event_location\" value=\"<?php echo $loadedRegistry->getEventLocation(); ?>\" title=\"Event Location\"/>\n                </li>\n                <li class=\"field\">\n                    <label class=\"giftreg\" for=\"event_country\"><?php echo $this->__('Event Country') ?></label>\n                    <input type=\"text\" name=\"event_country\" id=\"event_country\" value=\"<?php echo $loadedRegistry->getEventCountry(); ?>\" title=\"Event Country\"/>\n                </li>\n            </ul>\n            <div class=\"buttons-set\">\n                <button type=\"submit\" title=\"Save\" class=\"button\">\n                    <span>\n                        <span><?php echo $this->__('Save') ?></span>\n                    </span>\n                </button>\n            </div>\n        </fieldset>\n    </form>\n    <script type=\"text/javascript\">\n        //<![CDATA[\n        var dataForm = new VarienForm('form-validate', true);\n        //]]>\n    </script>\n<?php else: ?>\n    <h2><?php echo $this->__('There was a problem loading the registry') ?></h2>\n<?php endif; ?>\n```", "```php\n    <reference name=\"content\">\n        <block name=\"giftregistry.edit\" type=\"core/template\" template=\"mdg/edit.phtml\" as=\"giftregistry_edit\"/>\n    </reference>\n    ```", "```php\n    <?php $helper = Mage::helper('mdg_giftregistry'); ?>\n    <form action=\"<?php echo $this->getUrl('giftregistry/search/results/') ?>\" method=\"post\" id=\"form-validate\">\n        <fieldset>\n            <?php echo $this->getBlockHtml('formkey')?>\n            <ul class=\"form-list\">\n                <li>\n                    <label for=\"type\">Event type</label>\n                    <select name=\"type\" id=\"type\">\n                        <?php foreach($helper->getEventTypes() as $type): ?>\n                            <option id=\"<?php echo $type->getTypeId(); ?>\" value=\"<?php echo $type->getCode(); ?>\">\n                                <?php echo $type->getName(); ?>\n                            </option>\n                        <?php endforeach; ?>\n                    </select>\n                </li>\n                <li class=\"field\">\n                    <label class=\"giftreg\" for=\"name\"><?php echo $this->__('Event Name') ?></label>\n                    <input type=\"text\" name=\"name\" id=\"name\" value=\"\" title=\"Event Name\"/>\n                </li>\n                <li class=\"field\">\n                    <label class=\"giftreg\" for=\"location\"><?php echo $this->__('Event Location') ?></label>\n                    <input type=\"text\" name=\"location\" id=\"location\" value=\"\" title=\"Event Location\"/>\n                </li>\n                <li class=\"field\">\n                    <label class=\"giftreg\" for=\"country\"><?php echo $this->__('Event Country') ?></label>\n                    <input type=\"text\" name=\"country\" id=\"country\" value=\"\" title=\"Event Country\"/>\n                </li>\n            </ul>\n            <div class=\"buttons-set\">\n                <button type=\"submit\" title=\"Save\" class=\"button\">\n                        <span>\n                            <span><?php echo $this->__('Save') ?></span>\n                        </span>\n                </button>\n            </div>\n        </fieldset>\n    </form>\n    <script type=\"text/javascript\">\n        //<![CDATA[\n        var dataForm = new VarienForm('form-validate', true);\n        //]]>\n    </script>\n    ```", "```php\n    <reference name=\"content\">\n        <block name=\"giftregistry.search\" type=\"core/template\" template=\"mdg/search.phtml\" as=\"giftregistry_search\"/>\n    </reference>\n    ```", "```php\npublic function resultsAction()\n{\n    $this->loadLayout();\n    if ($searchParams = $this->getRequest()->getParam('search_params')) {\n        $results = Mage::getModel('mdg_giftregistry/entity')->getCollection();\n        if($searchParams['type']){\n            $results->addFieldToFilter('type_id', $searchParams['type']);\n        }\n        if($searchParams['date']){\n            $results->addFieldToFilter('event_date', $searchParams['date']);\n        }\n        if($searchParams['location']){\n            $results->addFieldToFilter('event_location', $searchParams['location']);\n        }\n        $this->getLayout()->getBlock('mdg_giftregistry.search.results')\n            ->setCustomerRegistries($results);\n    }\n    $this->renderLayout();\n    return $this;\n}\n```", "```php\n    <reference name=\"content\">\n        <block name=\"giftregistry.results\" type=\"mdg_giftregistry/list\" template=\"mdg/list.phtml\"/>\n    </reference>\n    ```", "```php\npublic function isRegistryOwner($registryCustomerId)\n{\n    $currentCustomer = Mage::getSingleton('customer/session')->getCustomer();\n    if($currentCustomer && $currentCustomer->getId() == $registryCustomerId)\n    {\n        return true;\n    }\n    return false;\n}\n```", "```php\n<?php\n    $_collection = $this->getCustomerRegistries();\n    $helper = Mage::helper('mdg_giftregistry')\n?>\n<div class=\"customer-list\">\n    <?php if(!$_collection->count()): ?>\n        <h2><?php echo $this->__('You have no registries.') ?></h2>\n        <a href=\"<?php echo $this->getUrl('giftregistry/index/new') ?>\">\n            <?php echo $this->__('Click Here to create a new Gift Registry') ?>\n        </a>\n    <?php else: ?>\n        <ul>\n            <?php foreach($_collection as $registry): ?>\n                <li>\n                    <h3><?php echo $registry->getEventName(); ?></h3>\n                    <p><strong><?php echo $this->__('Event Date:') ?> <?php echo $registry->getEventDate(); ?></strong></p>\n                    <p><strong><?php echo $this->__('Event Location:') ?> <?php echo $registry->getEventLocation(); ?></strong></p>\n                    <a href=\"<?php echo $this->getUrl('giftregistry/view/view', array('_query' => array('registry_id' => $registry->getEntityId()))) ?>\">\n                        <?php echo $this->__('View Registry') ?>\n                    </a>\n                    <?php if($helper->isRegistryOwner($registry->getCustomerId())): ?>\n                        <a href=\"<?php echo $this->getUrl('giftregistry/index/edit', array('_query' => array('registry_id' => $registry->getEntityId()))) ?>\">\n                            <?php echo $this->__('Edit Registry') ?>\n                        </a>\n                        <a href=\"<?php echo $this->getUrl('giftregistry/index/delete', array('_query' => array('registry_id' => $registry->getEntityId()))) ?>\">\n                            <?php echo $this->__('Delete Registry') ?>\n                        </a>\n                    <?php endif; ?>\n\n                </li>\n            <?php endforeach; ?>\n        </ul>\n    <?php endif; ?>\n</div>\n```", "```php\n    <?php $registry = Mage::registry('loaded_registry'); ?>\n    <h3><?php echo $registry->getEventName(); ?></h3>\n    <p><strong><?php $this->__('Event Date:') ?> <?php echo $registry->getEventDate(); ?></strong></p>\n    <p><strong><?php $this->__('Event Location:') ?> <?php echo $registry->getEventLocation(); ?></strong></p>\n    ```", "```php\n    <reference name=\"content\">\n        <block name=\"giftregistry.view\" type=\"core/template\" template=\"mdg/view.phtml\" as=\"giftregistry_view\"/>\n    </reference>\n    ```"]
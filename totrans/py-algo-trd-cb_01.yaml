- en: Handling and Manipulating Date, Time, and Time Series Data
  id: totrans-0
  prefs: []
  type: TYPE_NORMAL
  zh: 处理和操作日期、时间和时间序列数据
- en: Time series data is ubiquitous when it comes to algorithmic trading. So, handling,
    managing, and manipulating time series data is essential to performing algorithmic
    trading successfully. This chapter has various recipes that demonstrate how algorithmic
    trading can be done using the Python standard library and `pandas`, which is a
    Python data analysis library.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 当涉及到算法交易时，时间序列数据是无处不在的。因此，处理、管理和操作时间序列数据对于成功执行算法交易至关重要。本章包含了各种食谱，演示了如何使用Python标准库和`pandas`进行算法交易。`pandas`是一个Python数据分析库。
- en: For our context, time series data is a series of data consisting of equally
    spaced timestamps and multiple data points describing trading data in that particular
    time frame.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的上下文中，时间序列数据是一系列数据，包括等间隔的时间戳和描述特定时间段内交易数据的多个数据点。
- en: When handling time series data, the first thing you should know is how to read,
    modify, and create Python objects that understand date and time. The Python standard
    library includes the `datetime` module, which provides the `datetime` and `timedelta`
    objects, which can handle everything about the date and time. The first seven
    recipes in this chapter talk about this module. The remainder of this chapter
    talks about handling time series data using the `pandas` library, which is a very
    efficient library for data analysis. The `pandas.DataFrame` class will be used
    in our recipes.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在处理时间序列数据时，您首先应该知道如何读取、修改和创建能理解日期和时间的Python对象。Python标准库包括`datetime`模块，提供了`datetime`和`timedelta`对象，可以处理有关日期和时间的一切。本章的前七个食谱讨论了这个模块。本章的其余部分讨论了使用`pandas`库处理时间序列数据，`pandas`是一个非常高效的数据分析库。我们的食谱将使用`pandas.DataFrame`类。
- en: 'The following is a list of the recipes in this chapter:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 本章节中的食谱清单如下：
- en: Creating datetime objects
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建datetime对象
- en: Creating timedelta objects
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建timedelta对象
- en: Operations on datetime objects
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: datetime对象的操作
- en: Modifying datetime objects
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修改datetime对象
- en: Converting a datetime to a string
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将datetime转换为字符串
- en: Creating a datetime object from a string
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从字符串创建datetime对象
- en: The datetime object and time zones
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: datetime对象和时区
- en: Creating a pandas.DataFrame object
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建一个pandas.DataFrame对象
- en: DataFrame manipulation—renaming, rearranging, reversing, and slicing
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: DataFrame操作——重命名、重新排列、反转和切片
- en: DataFrame manipulation—applying, sorting, iterating, and concatenating
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: DataFrame操作——应用、排序、迭代和连接
- en: Converting a DataFrame into other formats
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将DataFrame转换为其他格式
- en: Creating a DataFrame from other formats
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从其他格式创建DataFrame
- en: Technical requirements
  id: totrans-17
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: 'You will need the following to successfully execute the recipes in this chapter:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 要成功执行本章的食谱，您需要以下技术要求：
- en: Python 3.7+
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Python 3.7+
- en: 'Python package:'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Python包：
- en: '`pandas` (`$ pip install pandas`)'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pandas` (`$ pip install pandas`)'
- en: For all the recipes in this chapter, you will need the Jupyter notebook for
    this chapter, found at [https://github.com/PacktPublishing/Python-Algorithmic-Trading-Cookbook/tree/master/Chapter01](https://github.com/PacktPublishing/Python-Algorithmic-Trading-Cookbook/tree/master/Chapter01).
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 对于本章中的所有食谱，您需要本章的Jupyter笔记本，位于[https://github.com/PacktPublishing/Python-Algorithmic-Trading-Cookbook/tree/master/Chapter01](https://github.com/PacktPublishing/Python-Algorithmic-Trading-Cookbook/tree/master/Chapter01)。
- en: You can also open a new Jupyter notebook and try the hands-on exercises directly
    as they are shown in the recipes. Note that the output for some of these recipes
    might differ for you as they depend on the date, time, and time zone information
    provided at the time.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 您也可以打开一个新的Jupyter笔记本，直接尝试食谱中显示的实践练习。请注意，由于输出取决于提供的日期、时间和时区信息，因此某些食谱的输出可能会有所不同。
- en: Creating datetime objects
  id: totrans-24
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建datetime对象
- en: The `datetime` module provides a `datetime` class, which can be used to accurately
    capture information relating to timestamps, dates, times, and time zones. In this
    recipe, you will create `datetime` objects in multiple ways and introspect their
    attributes.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: '`datetime`模块提供了一个`datetime`类，可以准确捕获与时间戳、日期、时间和时区相关的信息。在这个食谱中，您将以多种方式创建`datetime`对象，并审查它们的属性。'
- en: How to do it…
  id: totrans-26
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做…
- en: 'Follow these steps to execute this recipe:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤执行此食谱：
- en: 'Import the necessary module from the Python standard library:'
  id: totrans-28
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从Python标准库中导入必要的模块：
- en: '[PRE0]'
  id: totrans-29
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Create a `datetime` object holding the current timestamp using the `now()`
    method and print it:'
  id: totrans-30
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`now()`方法创建一个包含当前时间戳的`datetime`对象并打印出来：
- en: '[PRE1]'
  id: totrans-31
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'We get the following output. Your output will differ:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出。您的输出将有所不同：
- en: '[PRE2]'
  id: totrans-33
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Print the attributes of `dt1` related to date and time:'
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打印`dt1`相关的日期和时间的各种属性：
- en: '[PRE3]'
  id: totrans-35
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'We get the following output. Your output would differ:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出。您的输出将有所不同：
- en: '[PRE4]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Create a `datetime` object holding the timestamp for 1st January 2021::'
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个包含2021年1月1日时间戳的`datetime`对象：
- en: '[PRE5]'
  id: totrans-39
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'You will get the following output:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 您将得到以下输出：
- en: '[PRE6]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Print the various attributes of `dt2` related to date and time:'
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打印`dt2`相关的日期和时间的各种属性：
- en: '[PRE7]'
  id: totrans-43
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'You will get the following output:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 您将得到以下输出：
- en: '[PRE8]'
  id: totrans-45
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: How it works...
  id: totrans-46
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理…
- en: In *step 1*, you import the `datetime` class from the `datetime` module. In
    *step 2*, you create and print a `datetime` object using the `now()` method and
    assign it to `dt1`. This object holds the current timestamp information.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 在*步骤1*中，您从`datetime`模块中导入`datetime`类。在*步骤2*中，您使用`now()`方法创建并打印一个`datetime`对象，并将其赋给`dt1`。这个对象包含当前时间戳信息。
- en: 'A `datetime` object has the following attributes related to date, time, and
    time zone information:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: '`datetime`对象具有以下与日期、时间和时区信息相关的属性：'
- en: '| 1 | `year` | An integer between 0 and 23, both inclusive |'
  id: totrans-49
  prefs: []
  type: TYPE_TB
  zh: '| 1 | `year` | 一个介于0和23之间的整数，包括0和23 |'
- en: '| 2 | `month` | An integer between 1 and 12, both inclusive |'
  id: totrans-50
  prefs: []
  type: TYPE_TB
  zh: '| 2 | `month` | 一个介于1和12之间的整数，包括1和12 |'
- en: '| 3 | `day` | An integer between 1 and 31, both inclusive |'
  id: totrans-51
  prefs: []
  type: TYPE_TB
  zh: '| 3 | `day` | 一个介于1和31之间的整数，包括1和31 |'
- en: '| 4 | `hour` | An integer between 0 and 23, both inclusive |'
  id: totrans-52
  prefs: []
  type: TYPE_TB
  zh: '| 4 | `hour` | 一个介于0和23之间的整数，包括0和23 |'
- en: '| 5 | `minute` | An integer between 0 and 59, both inclusive |'
  id: totrans-53
  prefs: []
  type: TYPE_TB
  zh: '| 5 | `minute` | 一个介于0和59之间的整数，包括0和59 |'
- en: '| 6 | `second` | An integer between 0 and 59, both inclusive |'
  id: totrans-54
  prefs: []
  type: TYPE_TB
  zh: '| 6 | `second` | 介于0和59之间的整数，包括0和59 |'
- en: '| 7 | `microsecond` | An integer between 0 and 999999, both inclusive |'
  id: totrans-55
  prefs: []
  type: TYPE_TB
  zh: '| 7 | `microsecond` | 介于0和999999之间的整数，包括0和999999 |'
- en: '| 8 | `tzinfo` | An object of class `timezone`. (More information on time zones
    in *The datetime object and time zones* recipe). |'
  id: totrans-56
  prefs: []
  type: TYPE_TB
  zh: '| 8 | `tzinfo` | 一个`timezone`类的对象。（有关时区的更多信息，请参阅*日期时间对象和时区*食谱）。'
- en: In *step 3*, these attributes are printed for `dt1`. You can see that they hold
    the current timestamp information.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 在*步骤3*中，这些属性被打印出来`dt1`。您可以看到它们保存了当前时间戳信息。
- en: In *step 4*, you create and print another `datetime` object. This time you create
    a specific timestamp, which is 1st Jan 2021, midnight. You call the constructor
    itself with the parameters—`year` as `2021`, `month` as `1`, and `day` as `1`.
    The other time related attributes default to `0` and time zone defaults to `None`.
    In *step 5*, you print the attributes of `dt2`. You can see that they hold exactly
    the same values as you had passed to the constructor in *step 4*.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 在*步骤4*中，您创建并打印另一个`datetime`对象。这一次，您创建了一个特定的时间戳，即2021年1月1日午夜。您调用构造函数本身，参数为`year`为`2021`，`month`为`1`，`day`为`1`。其他与时间相关的属性默认为`0`，时区默认为`None`。在*步骤5*中，您打印`dt2`的属性。您可以看到它们保存了与*步骤4*中传递给构造函数完全相同的值。
- en: There's more
  id: totrans-59
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多
- en: 'You can use the `date()` and `time()` methods of the `datetime` objects to
    extract the date and time information, as instances of `datetime.date` and `datetime.time`
    classes respectively:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以使用`datetime`对象的`date()`和`time()`方法来提取日期和时间信息，分别作为`datetime.date`和`datetime.time`类的实例。
- en: Use `date()` method to extract date from `dt1`. Note the type of the return
    value.
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`date()`方法从`dt1`中提取日期。注意返回值的类型。
- en: '[PRE9]'
  id: totrans-62
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'You will get the following output. Your output may differ::'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 您将得到以下输出。您的输出可能会有所不同：
- en: '[PRE10]'
  id: totrans-64
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Use `time()` method to extract date from `dt1`. Note the type of the return
    value.
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`time()`方法从`dt1`中提取日期。注意返回值的类型。
- en: '[PRE11]'
  id: totrans-66
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'We get the following output. Your output may differ:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出。您的输出可能会有所不同：
- en: '[PRE12]'
  id: totrans-68
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: Use `date()` method to extract date from `dt2`. Note the type of the return
    value.
  id: totrans-69
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`date()`方法从`dt2`中提取日期。注意返回值的类型。
- en: '[PRE13]'
  id: totrans-70
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'We get the following output:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出：
- en: '[PRE14]'
  id: totrans-72
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Use `time()` method to extract date from `dt2`. Note the type of the return
    value.
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`time()`方法从`dt2`中提取日期。注意返回值的类型。
- en: '[PRE15]'
  id: totrans-74
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'We get the following output:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出：
- en: '[PRE16]'
  id: totrans-76
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: Creating timedelta objects
  id: totrans-77
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建时间差对象
- en: The `datetime` module provides a `timedelta` class, which can be used to represent
    information related to date and time differences. In this recipe, you will create
    `timedelta` objects and perform operations on them.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: '`datetime`模块提供了一个`timedelta`类，它可以用来表示与日期和时间差异相关的信息。在这个食谱中，您将创建`timedelta`对象并对其进行操作。'
- en: How to do it…
  id: totrans-79
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: 'Follow along with these steps to execute this recipe:'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 按照这些步骤执行这个食谱：
- en: 'Import the necessary module from the Python standard library:'
  id: totrans-81
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从Python标准库中导入必要的模块：
- en: '[PRE17]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'Create a `timedelta` object with a duration of 5 days. Assign it to `td1` and
    print it:'
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个持续5天的`timedelta`对象。将其分配给`td1`并打印出来：
- en: '[PRE18]'
  id: totrans-84
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'We get the following output:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出：
- en: '[PRE19]'
  id: totrans-86
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'Create a `timedelta` object with a duration of 4 days. Assign it to `td2` and
    print it:'
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个持续4天的`timedelta`对象。将其分配给`td2`并打印出来：
- en: '[PRE20]'
  id: totrans-88
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'We get the following output:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出：
- en: '[PRE21]'
  id: totrans-90
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'Add `td1` and `td2` and print the output:'
  id: totrans-91
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加`td1`和`td2`并打印输出：
- en: '[PRE22]'
  id: totrans-92
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'We get the following output:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出：
- en: '[PRE23]'
  id: totrans-94
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'Subtract `td2` from `td1` and print the output:'
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从`td1`中减去`td2`并打印输出：
- en: '[PRE24]'
  id: totrans-96
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'We will get the following output:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将得到以下输出：
- en: '[PRE25]'
  id: totrans-98
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'Multiply `td1` with a number (a `float`) :'
  id: totrans-99
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将`td1`乘以一个数字（一个`float`）：
- en: '[PRE26]'
  id: totrans-100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'We get the following output:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出：
- en: '[PRE27]'
  id: totrans-102
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: How it works...
  id: totrans-103
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: In *step 1*, you import the `timedelta` class from the `datetime` module. In
    *step 2* you create a `timedelta` object that holds a time difference value of
    `5 days` and assign it to `td1`. You call the constructor to create the object
    with a single attribute, `days`. You pass the value as `5` here. Similarly, in
    *step 3*, you create another `timedelta` object, which holds a time difference
    value of `4 days` and assign it to `td2`.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 在*步骤1*中，您从`datetime`模块中导入`timedelta`类。在*步骤2*中，您创建一个`timedelta`对象，它保存了一个时间差值为`5天`，并将其分配给`td1`。您调用构造函数创建对象，只有一个属性`days`。您在这里传递值`5`。类似地，在*步骤3*中，您创建另一个`timedelta`对象，它保存了一个时间差值为`4天`，并将其分配给`td2`。
- en: In the next steps, you perform operations on the `timedelta` objects. In *step
    4*, you add `td1` and `td2`. This returns another `timedelta` object which holds
    a time difference value of `9 days`, which is the sum of the time difference values
    held by `td1` and `td2`. In *step 5*, you subtract `td2` from `td1`. This returns
    another `timedelta` object that holds a time difference value of `1 day`, which
    is the difference of time difference values held by `td1` and `td2`. In *step
    6*, you multiply `td1` with `2.5`, a `float`. This again returns a `timedelta`
    object that holds a time difference value of twelve and a half days.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的步骤中，您对`timedelta`对象执行操作。在*步骤4*中，您添加`td1`和`td2`。这将返回另一个`timedelta`对象，它保存了一个时间差值为`9天`，这是由`td1`和`td2`保存的时间差值的总和。在*步骤5*中，您从`td1`中减去`td2`。这将返回另一个`timedelta`对象，它保存了一个时间差值为`1天`，这是由`td1`和`td2`保存的时间差值的差异。在*步骤6*中，您将`td1`乘以`2.5`，一个`float`。这将再次返回一个`timedelta`对象，它保存了一个时间差值为十二天半。
- en: There's more
  id: totrans-106
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多
- en: 'A `timedelta` object can be created using one or more optional arguments:'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 可以使用一个或多个可选参数来创建一个`timedelta`对象：
- en: '| 1 | `weeks` | An integer. Default value is 0. |'
  id: totrans-108
  prefs: []
  type: TYPE_TB
  zh: '| 1 | `weeks` | 一个整数。默认值为0。'
- en: '| 2 | `days` | An integer. Default value is 0. |'
  id: totrans-109
  prefs: []
  type: TYPE_TB
  zh: '| 2 | `days` | 一个整数。默认值为0。'
- en: '| 3 | `hours` | An integer. Default value is 0. |'
  id: totrans-110
  prefs: []
  type: TYPE_TB
  zh: '| 3 | `hours` | 一个整数。默认值为0。'
- en: '| 4 | `minutes` | An integer. Default value is 0. |'
  id: totrans-111
  prefs: []
  type: TYPE_TB
  zh: '| 4 | `minutes` | 一个整数。默认值为0。'
- en: '| 5 | `seconds` | An integer. Default value is 0. |'
  id: totrans-112
  prefs: []
  type: TYPE_TB
  zh: '| 5 | `seconds` | 一个整数。默认值为0。'
- en: '| 6 | `milliseconds` | An integer. Default value is 0. |'
  id: totrans-113
  prefs: []
  type: TYPE_TB
  zh: '| 6 | `milliseconds` | 一个整数。默认值为0。'
- en: '| 7 | `microseconds` | An integer. Default value is 0. |'
  id: totrans-114
  prefs: []
  type: TYPE_TB
  zh: '| 7 | `microseconds` | 一个整数。默认值为0。'
- en: 'In *step 2* and *step 3*, we have used just the `days` argument. You can use
    other arguments as well. Also, these attributes are normalized upon creation.
    This normalization of `timedelta` objects is done to ensure that there is always
    a unique representation for every time difference value which can be held. The
    following code demonstrates this:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 在*步骤2*和*步骤3*中，我们只使用了`days`参数。您也可以使用其他参数。此外，这些属性在创建时会被规范化。对`timedelta`对象的这种规范化是为了确保每个时间差值都有一个唯一的表示形式。以下代码演示了这一点：
- en: 'Create a `timedelta` object with hours as `23`, minutes as `59`, and seconds
    as `60`. Assign it to `td3` and print it. It will be normalized to a `timedelta`
    object with `days` as `1` (and other date and time-related attributes as `0`):'
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个`timedelta`对象，小时为`23`，分钟为`59`，秒为`60`。将其赋给`td3`并打印出来。它将被规范化为一个`timedelta`对象，其中`days`为`1`（其他与日期和时间相关的属性为`0`）：
- en: '[PRE28]'
  id: totrans-117
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'We get the following output:'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出：
- en: '[PRE29]'
  id: totrans-119
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: The `timedelta` objects have a convenience method, `total_seconds()`. This method
    returns a `float` which represents the total seconds contained in the duration
    held by the `timedelta` object.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: '`timedelta`对象有一个方便的方法，`total_seconds()`。该方法返回一个`float`，表示`timedelta`对象持续时间中包含的总秒数。'
- en: 'Call the `total_seconds()` method on `td3`. You get `86400.0` as the output:'
  id: totrans-121
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`td3`上调用`total_seconds()`方法。您将得到`86400.0`作为输出：
- en: '[PRE30]'
  id: totrans-122
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'We get the following output:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出：
- en: '[PRE31]'
  id: totrans-124
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: Operations on datetime objects
  id: totrans-125
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 日期时间对象的操作
- en: The `datetime` and `timedelta` classes support various mathematical operations
    to get dates in the future or the past. Using these operations returns another
    `datetime` object. . In this recipe, you would create `datetime`, `date`, `time`,
    and `timedelta` objects and perform mathematical operations on them.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: '`datetime`和`timedelta`类支持各种数学运算，以获取将来或过去的日期。使用这些操作返回另一个`datetime`对象。在这个示例中，您将创建`datetime`，`date`，`time`和`timedelta`对象，并对它们执行数学运算。'
- en: How to do it…
  id: totrans-127
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做…
- en: 'Follow along with these steps to execute this recipe:'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤执行这个示例：
- en: 'Import the necessary modules from the Python standard library:'
  id: totrans-129
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从Python标准库中导入必要的模块：
- en: '[PRE32]'
  id: totrans-130
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: 'Fetch today''s date. Assign it to `date_today` and print it:'
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 获取今天的日期。将其赋给`date_today`并打印出来：
- en: '[PRE33]'
  id: totrans-132
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: 'We get the following output. Your output may differ:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出。您的输出可能会有所不同：
- en: '[PRE34]'
  id: totrans-134
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: 'Add 5 days to today''s date using a `timedelta` object. Assign it to `date_5days_later`
    and print it:'
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`timedelta`对象将5天添加到今天的日期。将其赋给`date_5days_later`并打印出来：
- en: '[PRE35]'
  id: totrans-136
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: 'We get the following output. Your output may differ:'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出。您的输出可能会有所不同：
- en: '[PRE36]'
  id: totrans-138
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: 'Subtract 5 days from today''s date using a `timedelta` object. Assign it to
    `date_5days_ago` and print it:'
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`timedelta`对象从今天的日期减去5天。将其赋给`date_5days_ago`并打印出来：
- en: '[PRE37]'
  id: totrans-140
  prefs: []
  type: TYPE_PRE
  zh: '[PRE37]'
- en: 'We get the following output. Your output may differ:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出。您的输出可能会有所不同：
- en: '[PRE38]'
  id: totrans-142
  prefs: []
  type: TYPE_PRE
  zh: '[PRE38]'
- en: 'Compare `date_5days_later` with `date_5days_ago` using the `>` operator:'
  id: totrans-143
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`>`运算符将`date_5days_later`与`date_5days_ago`进行比较：
- en: '[PRE39]'
  id: totrans-144
  prefs: []
  type: TYPE_PRE
  zh: '[PRE39]'
- en: 'We get the following output:'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出：
- en: '[PRE40]'
  id: totrans-146
  prefs: []
  type: TYPE_PRE
  zh: '[PRE40]'
- en: 'Compare `date_5days_later` with `date_5days_ago` using the `<` operator:'
  id: totrans-147
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`<`运算符将`date_5days_later`与`date_5days_ago`进行比较：
- en: '[PRE41]'
  id: totrans-148
  prefs: []
  type: TYPE_PRE
  zh: '[PRE41]'
- en: 'We get the following output:'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出：
- en: '[PRE42]'
  id: totrans-150
  prefs: []
  type: TYPE_PRE
  zh: '[PRE42]'
- en: 'Compare `date_5days_later`, `date_today` and `date_5days_ago` together using
    the `>` operator:'
  id: totrans-151
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`>`运算符将`date_5days_later`，`date_today`和`date_5days_ago`进行比较：
- en: '[PRE43]'
  id: totrans-152
  prefs: []
  type: TYPE_PRE
  zh: '[PRE43]'
- en: 'We get the following output:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出：
- en: '[PRE44]'
  id: totrans-154
  prefs: []
  type: TYPE_PRE
  zh: '[PRE44]'
- en: 'Fetch the current timestamp. Assign it to `current_timestamp`:'
  id: totrans-155
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 获取当前时间戳。将其赋给`current_timestamp`：
- en: '[PRE45]'
  id: totrans-156
  prefs: []
  type: TYPE_PRE
  zh: '[PRE45]'
- en: 'Fetch the current time. Assign it to `time_now` and print it:'
  id: totrans-157
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 获取当前时间。将其赋给`time_now`并打印出来：
- en: '[PRE46]'
  id: totrans-158
  prefs: []
  type: TYPE_PRE
  zh: '[PRE46]'
- en: 'We get the following output. Your output may differ:'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出。您的输出可能会有所不同：
- en: '[PRE47]'
  id: totrans-160
  prefs: []
  type: TYPE_PRE
  zh: '[PRE47]'
- en: 'Add 5 minutes to the current time using a `timedelta` object. Assign it to
    `time_5minutes_later` and print it:'
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`timedelta`对象将5分钟添加到当前时间。将其赋给`time_5minutes_later`并打印出来：
- en: '[PRE48]'
  id: totrans-162
  prefs: []
  type: TYPE_PRE
  zh: '[PRE48]'
- en: 'We get the following output. Your output may differ:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出。您的输出可能会有所不同：
- en: '[PRE49]'
  id: totrans-164
  prefs: []
  type: TYPE_PRE
  zh: '[PRE49]'
- en: 'Subtract 5 minutes from the current time using a `timedelta` object. Assign
    it to `time_5minutes_ago` and print it:'
  id: totrans-165
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`timedelta`对象从当前时间减去5分钟。将其赋给`time_5minutes_ago`并打印出来：
- en: '[PRE50]'
  id: totrans-166
  prefs: []
  type: TYPE_PRE
  zh: '[PRE50]'
- en: 'We get the following output. Your output may differ:'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出。您的输出可能会有所不同：
- en: '[PRE51]'
  id: totrans-168
  prefs: []
  type: TYPE_PRE
  zh: '[PRE51]'
- en: 'Compare `time_5minutes_later` with `time_5minutes_ago` using the `<` operator:'
  id: totrans-169
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`<`运算符将`time_5minutes_later`与`time_5minutes_ago`进行比较：
- en: '[PRE52]'
  id: totrans-170
  prefs: []
  type: TYPE_PRE
  zh: '[PRE52]'
- en: 'We get the following output. Your output may differ:'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出。您的输出可能会有所不同：
- en: '[PRE53]'
  id: totrans-172
  prefs: []
  type: TYPE_PRE
  zh: '[PRE53]'
- en: 'Compare `time_5minutes_later` with `time_5minutes_ago` using the `>` operator:'
  id: totrans-173
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`>`运算符将`time_5minutes_later`与`time_5minutes_ago`进行比较：
- en: '[PRE54]'
  id: totrans-174
  prefs: []
  type: TYPE_PRE
  zh: '[PRE54]'
- en: 'We get the following output. Your output may differ:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出。您的输出可能会有所不同：
- en: '[PRE55]'
  id: totrans-176
  prefs: []
  type: TYPE_PRE
  zh: '[PRE55]'
- en: 'Compare `time_5minutes_later`, `time_now` and `time_5minutes_ago` together
    using the `>` operator:'
  id: totrans-177
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`>`运算符将`time_5minutes_later`，`time_now`和`time_5minutes_ago`进行比较：
- en: '[PRE56]'
  id: totrans-178
  prefs: []
  type: TYPE_PRE
  zh: '[PRE56]'
- en: 'We get the following output. Your output may differ:'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出。您的输出可能会有所不同：
- en: '[PRE57]'
  id: totrans-180
  prefs: []
  type: TYPE_PRE
  zh: '[PRE57]'
- en: How it works…
  id: totrans-181
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理…
- en: In *step 1*, you import `date`, `datetime`, and `timedelta` classes from the
    `datetime` module. In *step 2*, you fetch today's date using the `today()` `classmethod`
    provided by the class `date` and assign it to a new attribute, `date_today`. (A
    `classmethod` allows you to call a method directly on a class without creating
    an instance.) The return object is of type `datetime.date`. In *step 3*, you create
    a date, 5 days ahead of today, by adding a `timedelta` object, holding a duration
    of 5 days, to `date_today`. You assign this to a new attribute, `date_5days_later`.
    Similarly, in *step 4*, you create a date, 5 days ago and assign it to a new attribute
    `date_5days_ago`.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 在*步骤1*中，您从`datetime`模块中导入`date`，`datetime`和`timedelta`类。在*步骤2*中，您使用`date`类提供的`today()`类方法获取今天的日期，并将其赋给一个新属性`date_today`。（`classmethod`允许您直接在类上调用方法，而不创建实例。）返回对象的类型为`datetime.date`。在*步骤3*中，您通过将持续时间为5天的`timedelta`对象添加到`date_today`来创建一个日期，比今天晚5天。您将其赋给一个新属性`date_5days_later`。类似地，在*步骤4*中，您创建一个日期，5天前，并将其赋给一个新属性`date_5days_ago`。
- en: In *step 5* and *step 6*, you compare `date_5days_later` and `date_5days_ago`
    using the `>` and `<` operators, respectively. The `>` operator returns `True`
    if the first operand holds a date ahead of that held by operand 2\. Similarly,
    the `<` operator returns `True` if the second operand holds a date ahead of that
    held by operand 1\. In *step 7*, you compare together all three date objects created
    so far. Note the outputs.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 在第5步和第6步中，您使用`>`和`<`运算符分别比较`date_5days_later`和`date_5days_ago`。如果第一个操作数持有比第二个操作数提前的日期，则`>`运算符返回`True`。类似地，如果第二个操作数持有比第一个操作数提前的日期，则`<`运算符返回`True`。在第7步中，您比较到目前为止创建的所有三个日期对象。注意输出。
- en: '*Step 8* to *step 14* perform the same operations as *step 2* to *step 7*,
    but this time on `datetime.time` objects—fetching current time, fetching a time
    5 minutes ahead of the current time, fetching a time 5 minutes before the current
    time and comparing all the `datetime.time` objects which are created. The `timedelta`
    objects cannot be added to `datetime.time` objects directly to get time in the
    past or the future. To overcome this, you can add `timedelta` objects to `datetime`
    objects and then extract time from them using the `time()` method. You do this
    in *step 10* and *step 11*.'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 第8步到第14步执行与第2步到第7步相同的操作，但这次是在`datetime.time`对象上进行 - 获取当前时间，获取比当前时间提前5分钟的时间，获取比当前时间晚5分钟的时间，并比较所有创建的`datetime.time`对象。`timedelta`对象不能直接添加到`datetime.time`对象中以获得过去或未来的时间。为了克服这一点，您可以将`timedelta`对象添加到`datetime`对象中，然后使用`time()`方法从中提取时间。您在第10步和第11步中执行此操作。
- en: There's more
  id: totrans-185
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多
- en: 'The operations shown in this recipe on `date` and `time` objects can similarly
    be performed on `datetime` objects. Besides `+`, `-`, `<` and `>`, you can also
    use the following operators on `datetime`, `date`, and `time` objects:'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 本文中显示的`date`和`time`对象的操作也可以在`datetime`对象上执行。除了`+`，`-`，`<`和`>`之外，您还可以在`datetime`，`date`和`time`对象上使用以下运算符：
- en: '| `>=` | Return `True` only if the first operand holds a `datetime`/`date`/`time`
    ahead or equal to that of the first operand |'
  id: totrans-187
  prefs: []
  type: TYPE_TB
  zh: '| `>=` | 仅在第一个操作数持有`datetime`/`date`/`time`超前或等于第一个操作数时返回`True` |'
- en: '| `<=` | Return `True` only if the first operand holds a `datetime`/`date`/`time`
    before or equal to that of the first operand |'
  id: totrans-188
  prefs: []
  type: TYPE_TB
  zh: '| `<=` | 仅在第一个操作数持有`datetime`/`date`/`time`在第一个操作数之前或等于第一个操作数时返回`True` |'
- en: '| `==` | Return `True` only if the first operand holds a `datetime`/`date`/`time`
    equal to that of the first operand |'
  id: totrans-189
  prefs: []
  type: TYPE_TB
  zh: '| `==` | 仅在第一个操作数持有`datetime`/`date`/`time`等于第一个操作数时返回`True` |'
- en: 'This is not an exhaustive list of permissible operators. Refer to the official
    documentation on `datetime` module for more information: [https://docs.python.org/3.8/library/datetime.html](https://docs.python.org/3.8/library/datetime.html).'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 这不是允许的运算符的详尽列表。有关更多信息，请参阅`datetime`模块的官方文档：[https://docs.python.org/3.8/library/datetime.html](https://docs.python.org/3.8/library/datetime.html)。
- en: Modifying datetime objects
  id: totrans-191
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 修改datetime对象
- en: Often, you may want to modify existing `datetime` objects to represent a different
    date and time. This recipe includes code to demonstrate this.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，您可能希望修改现有的`datetime`对象以表示不同的日期和时间。此操作包括演示此操作的代码。
- en: How to do it…
  id: totrans-193
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做…
- en: 'Follow these steps to execute this recipe:'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤执行此操作：
- en: 'Import the necessary modules from the Python standard library:'
  id: totrans-195
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从Python标准库中导入必要的模块：
- en: '[PRE58]'
  id: totrans-196
  prefs: []
  type: TYPE_PRE
  zh: '[PRE58]'
- en: 'Fetch the current timestamp. Assign it to `dt1` and print it:'
  id: totrans-197
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 获取当前时间戳。将其分配给`dt1`并打印出来：
- en: '[PRE59]'
  id: totrans-198
  prefs: []
  type: TYPE_PRE
  zh: '[PRE59]'
- en: 'We get the following output. Your output would differ:'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出。您的输出可能会有所不同：
- en: '[PRE60]'
  id: totrans-200
  prefs: []
  type: TYPE_PRE
  zh: '[PRE60]'
- en: 'Create a new `datetime` object by replacing the `year`, `month`, and `day`
    attributes of `dt1`. Assign it to `dt2` and print it :'
  id: totrans-201
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过替换`dt1`的`year`，`month`和`day`属性创建一个新的`datetime`对象。将其分配给`dt2`并打印出来：
- en: '[PRE61]'
  id: totrans-202
  prefs: []
  type: TYPE_PRE
  zh: '[PRE61]'
- en: 'We get the following output. Your output would differ:'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出。您的输出可能会有所不同：
- en: '[PRE62]'
  id: totrans-204
  prefs: []
  type: TYPE_PRE
  zh: '[PRE62]'
- en: 'Create a new `datetime` object by specifying all the attributes directly. Assign
    it to `dt3` and print it:'
  id: totrans-205
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过直接指定所有属性来创建一个新的`datetime`对象。将其分配给`dt3`并打印出来：
- en: '[PRE63]'
  id: totrans-206
  prefs: []
  type: TYPE_PRE
  zh: '[PRE63]'
- en: 'We get the following output. Your output would differ:'
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出。您的输出可能会有所不同：
- en: '[PRE64]'
  id: totrans-208
  prefs: []
  type: TYPE_PRE
  zh: '[PRE64]'
- en: 'Compare `dt2` and `dt3`:'
  id: totrans-209
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 比较`dt2`和`dt3`：
- en: '[PRE65]'
  id: totrans-210
  prefs: []
  type: TYPE_PRE
  zh: '[PRE65]'
- en: We get the following output.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出。
- en: '[PRE66]'
  id: totrans-212
  prefs: []
  type: TYPE_PRE
  zh: '[PRE66]'
- en: How it works...
  id: totrans-213
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: In *step 1*, you import the `datetime` class from the `datetime` module. In
    *step 2*, you fetch the current timestamp using the `now()` method of `datetime`
    and assign it to a new attribute, `dt1`. To get a modified timestamp from an existing
    `datetime` object, you can use the `replace()` method. In *step 3*, you create
    a new `datetime` object `dt2`, from `dt1`, by calling the `replace()` method.
    You specify the attributes to be modified, which are `year`, `month`, and `day`.
    The remaining attributes remain as it is, which are an `hour`, `minute`, `second`,
    `microsecond`, and `timezone`. You can confirm this by comparing the outputs of
    *step 2* and *step 3*. In *step 4*, you create another `datetime` object, `dt3`.
    This time you call the `datetime` constructor directly. You pass all the attributes
    to the constructor such that the timestamp created is the same as `dt2`. In *step
    5*, you confirm that `dt2` and `dt3` hold exactly the same timestamp by using
    the `==` operator, which returns `True`.
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 在第1步中，您从`datetime`模块中导入`datetime`类。在第2步中，您使用`datetime`的`now()`方法获取当前时间戳，并将其分配给一个新属性`dt1`。要从现有的`datetime`对象获取修改后的时间戳，可以使用`replace()`方法。在第3步中，您通过调用`replace()`方法从`dt1`创建一个新的`datetime`对象`dt2`。您指定要修改的属性，即`year`，`month`和`day`。其余属性保持不变，即`hour`，`minute`，`second`，`microsecond`和`timezone`。您可以通过比较第2步和第3步的输出来确认这一点。在第4步中，您创建另一个`datetime`对象`dt3`。这次，您直接调用`datetime`构造函数。您将所有属性传递给构造函数，使得创建的时间戳与`dt2`相同。在第5步中，您通过使用`==`运算符确认`dt2`和`dt3`持有完全相同的时间戳，返回`True`。
- en: Converting a datetime object to a string
  id: totrans-215
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 将datetime对象转换为字符串
- en: This recipe demonstrates the conversion of the `datetime` objects into strings
    which finds application in printing and logging. Also, this is helpful while sending
    timestamps as JSON data over web APIs.
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 该操作演示了将`datetime`对象转换为字符串的过程，这在打印和记录中有应用。此外，在通过Web API发送时间戳时也很有用。
- en: How to do it…
  id: totrans-217
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做…
- en: 'Execute the following steps for this recipe:'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 执行此食谱的以下步骤：
- en: 'Import the necessary modules from the Python standard library:'
  id: totrans-219
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从Python标准库中导入必要的模块：
- en: '[PRE67]'
  id: totrans-220
  prefs: []
  type: TYPE_PRE
  zh: '[PRE67]'
- en: 'Fetch the current timestamp along with time zone information. Assign it to
    `now` and print it:'
  id: totrans-221
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 获取当前时间戳以及时区信息。将其分配给`now`并打印出来：
- en: '[PRE68]'
  id: totrans-222
  prefs: []
  type: TYPE_PRE
  zh: '[PRE68]'
- en: 'Cast `now` to a string and print it::'
  id: totrans-223
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将`now`转换为字符串并打印出来：
- en: '[PRE69]'
  id: totrans-224
  prefs: []
  type: TYPE_PRE
  zh: '[PRE69]'
- en: 'We get the following output. Your output may differ:'
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出。您的输出可能会有所不同：
- en: '[PRE70]'
  id: totrans-226
  prefs: []
  type: TYPE_PRE
  zh: '[PRE70]'
- en: 'Convert `now` to a string with a specific date-time format using `strftime()`
    and print it:'
  id: totrans-227
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`strftime()`将`now`转换为特定的日期时间格式的字符串并打印出来：
- en: '[PRE71]'
  id: totrans-228
  prefs: []
  type: TYPE_PRE
  zh: '[PRE71]'
- en: 'We get the following output. Your output may differ:'
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出。您的输出可能会有所不同：
- en: '[PRE72]'
  id: totrans-230
  prefs: []
  type: TYPE_PRE
  zh: '[PRE72]'
- en: How it works...
  id: totrans-231
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: 'In *step 1*, you import the `datetime` class from the `datetime` module. In
    *step 2*, you fetch the current timestamp with time zone and assign it to a new
    attribute, `now`. The `now()` method of `datetime` fetches the current timestamp,
    but without time zone information. Such objects are called time zone-native `datetime`
    objects. The `astimezone()` method adds time zone information from the system
    local time on this time zone-naive object, essentially converting it to a time
    zone-aware object. (More information in *The datetime object and time zones* recipe).
    In *step 3*, you cast `now` to a string object and print it. Observe that the
    output date format is fixed and may not be of your choice. The datetime module
    has a `strftime()` method which can convert the object to a string in a specific
    format as required. In *step 4*, you convert `now` to a string in the format `DD-MM-YYYY
    HH:MM:SS +Z`. The directives used in *step 4* are described as follows:'
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 在*步骤1*中，您从`datetime`模块中导入`datetime`类。在*步骤2*中，您获取带有时区的当前时间戳，并将其分配给一个新属性`now`。`datetime`的`now()`方法获取当前时间戳，但不包括时区信息。这样的对象称为时区本地的`datetime`对象。`astimezone()`方法从系统本地时间添加时区信息到这个时区本地的对象，从本质上将其转换为时区感知的对象。（有关更多信息，请参阅*datetime对象和时区*食谱）。在*步骤3*中，您将`now`转换为字符串对象并打印出来。请注意，输出日期格式是固定的，可能不是您的选择。datetime模块有一个`strftime()`方法，可以根据需要将对象转换为特定格式的字符串。在*步骤4*中，您将`now`转换为格式为`DD-MM-YYYY
    HH:MM:SS +Z`的字符串。*步骤4*中使用的指令描述如下：
- en: '| **Directive** | **Meaning** |'
  id: totrans-233
  prefs: []
  type: TYPE_TB
  zh: '| **指令** | **意义** |'
- en: '| `%d` | The day of the month as a zero-padded decimal number |'
  id: totrans-234
  prefs: []
  type: TYPE_TB
  zh: '|`％d` | 日期的零填充十进制数 |'
- en: '| `%m` | The month as a zero-padded decimal number |'
  id: totrans-235
  prefs: []
  type: TYPE_TB
  zh: '|`％m` | 月份的零填充十进制数 |'
- en: '| `%Y` | The year with the century as a decimal number |'
  id: totrans-236
  prefs: []
  type: TYPE_TB
  zh: '|`％Y` | 带有世纪的年份的十进制数 |'
- en: '| `%H` | The hour (24-hour clock) as a zero-padded decimal number |'
  id: totrans-237
  prefs: []
  type: TYPE_TB
  zh: '|`％H` | 小时（24小时制）的零填充十进制数 |'
- en: '| `%M` | The minute as a zero-padded decimal number |'
  id: totrans-238
  prefs: []
  type: TYPE_TB
  zh: '|`％M` | 分钟的零填充十进制数 |'
- en: '| `%S` | The second as a zero-padded decimal number |'
  id: totrans-239
  prefs: []
  type: TYPE_TB
  zh: '|`％S` | 秒的零填充十进制数 |'
- en: '| `%Z` | The time zone name (empty string if the object is naive) |'
  id: totrans-240
  prefs: []
  type: TYPE_TB
  zh: '|`％Z` | 时区名称（如果对象是naive，则为空字符串） |'
- en: A complete list of the directives that can be given to `.strptime()` can be
    found at [https://docs.python.org/3.7/library/datetime.html#strftime-and-strptime-behavior](https://docs.python.org/3.7/library/datetime.html#strftime-and-strptime-behavior).
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 可以在[https://docs.python.org/3.7/library/datetime.html#strftime-and-strptime-behavior](https://docs.python.org/3.7/library/datetime.html#strftime-and-strptime-behavior)找到可以提供给`.strptime()`的完整指令列表。
- en: Creating a datetime object from a string
  id: totrans-242
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 从字符串创建datetime对象
- en: This recipe demonstrates the conversion of well-formatted strings into `datetime`
    objects. This finds application in reading timestamps from a file. Also, this
    is helpful while receiving timestamps as JSON data over web APIs.
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 此食谱演示了将格式良好的字符串转换为`datetime`对象。这在从文件中读取时间戳时有用。此外，在通过Web API接收时间戳作为JSON数据时也很有帮助。
- en: How to do it…
  id: totrans-244
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: 'Execute the following steps for this recipe:'
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 执行此食谱的以下步骤：
- en: 'Import the necessary modules from the Python standard library:'
  id: totrans-246
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从Python标准库中导入必要的模块：
- en: '[PRE73]'
  id: totrans-247
  prefs: []
  type: TYPE_PRE
  zh: '[PRE73]'
- en: 'Create a string representation of timestamp with date, time, and time zone.
    Assign it to `now_str`:'
  id: totrans-248
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个带有日期、时间和时区的时间戳的字符串表示。将其分配给`now_str`：
- en: '[PRE74]'
  id: totrans-249
  prefs: []
  type: TYPE_PRE
  zh: '[PRE74]'
- en: 'Convert `now_str` to `now`, a `datetime.datetime` object. Print it:'
  id: totrans-250
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将`now_str`转换为`now`，一个`datetime.datetime`对象。打印出来：
- en: '[PRE75]'
  id: totrans-251
  prefs: []
  type: TYPE_PRE
  zh: '[PRE75]'
- en: 'We get the following output:'
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出：
- en: '[PRE76]'
  id: totrans-253
  prefs: []
  type: TYPE_PRE
  zh: '[PRE76]'
- en: 'Confirm that now is of the `datetime` type:'
  id: totrans-254
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确认`now`是`datetime`类型：
- en: '[PRE77]'
  id: totrans-255
  prefs: []
  type: TYPE_PRE
  zh: '[PRE77]'
- en: 'We get the following output:'
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出：
- en: '[PRE78]'
  id: totrans-257
  prefs: []
  type: TYPE_PRE
  zh: '[PRE78]'
- en: How it works...
  id: totrans-258
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: In *step 1*, you import the `datetime` class from the `datetime` module. In
    *step 2*, you create a string holding a valid timestamp and assign it to a new
    attribute, `now_str`. The `datetime` module has a `strptime()` method which can
    convert a string holding a valid timestamp in a specific format to a `datetime`
    object. In *step 3*, you convert `now_str`, a string in the format `DD-MM-YYYY
    HH:MM:SS +Z`, to `now`. In *step 4*, you confirm that `now` is indeed an object
    of the `datetime` type. The directives used in *step 3* are the same as those
    described in the *Converting a datetime object to a string* recipe.
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 在*步骤1*中，您从`datetime`模块中导入`datetime`类。在*步骤2*中，您创建一个包含有效时间戳的字符串，并将其分配给一个新属性`now_str`。`datetime`模块有一个`strptime()`方法，可以将包含特定格式的有效时间戳的字符串转换为`datetime`对象。在*步骤3*中，您将`now_str`，一个格式为`DD-MM-YYYY
    HH:MM:SS +Z`的字符串，转换为`now`。在*步骤4*中，您确认`now`确实是`datetime`类型的对象。*步骤3*中使用的指令与*将datetime对象转换为字符串*食谱中描述的相同。
- en: There's more
  id: totrans-260
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多
- en: When reading a string into a `datetime` object, the entire string should be
    consumed with appropriate directives. Consuming a string partially will throw
    an exception, as shown in the following code snippet. The error message shows
    what data was not converted and can be used to fix the directives provided to
    the `strptime()` method.
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 当将字符串读入`datetime`对象时，应使用适当的指令完全消耗整个字符串。部分消耗字符串将引发异常，如下面的代码片段所示。错误消息显示了未转换的数据，并可用于修复提供给`strptime()`方法的指令。
- en: 'Try to convert `now_str` to a `datetime` object using `strptime()` method.
    Pass a string with directives for only the date part of the string. Note the error:'
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 尝试使用`strptime()`方法将`now_str`转换为`datetime`对象。传递仅包含字符串日期部分的指令。注意错误：
- en: '[PRE79]'
  id: totrans-263
  prefs: []
  type: TYPE_PRE
  zh: '[PRE79]'
- en: 'The output is as follows:'
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: 输出如下：
- en: '[PRE80]'
  id: totrans-265
  prefs: []
  type: TYPE_PRE
  zh: '[PRE80]'
- en: The datetime object and time zones
  id: totrans-266
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: datetime对象和时区
- en: 'There are two types of `datetime` objects—time zone-naive and time zone-aware.
    Time zone-naive objects do not hold time zone information and timezone-aware objects
    hold time zone information. This recipe demonstrates multiple time zone related
    operations on `datetime` objects: creating time zone-naive and time zone-aware
    objects, adding time zone information to time zone-aware objects, removing time
    zone information from time zone-naive objects, and comparing time zone-aware and
    time zone-naive objects.'
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: 有两种类型的`datetime`对象——时区无关和时区感知。时区无关的对象不包含时区信息，而时区感知的对象包含时区信息。这个示例演示了对`datetime`对象进行多个与时区相关的操作：创建时区无关和时区感知的对象，向时区感知的对象添加时区信息，从时区无关的对象中删除时区信息，以及比较时区感知和时区无关的对象。
- en: How to do it…
  id: totrans-268
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: 'Execute the following steps for this recipe:'
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤来完成这个示例：
- en: 'Import the necessary modules from the Python standard library:'
  id: totrans-270
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从Python标准库中导入必要的模块：
- en: '[PRE81]'
  id: totrans-271
  prefs: []
  type: TYPE_PRE
  zh: '[PRE81]'
- en: 'Create a time zone-naive `datetime` object. Assign it to `now_tz_naive` and
    print it:'
  id: totrans-272
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个时区无关的`datetime`对象。将其分配给`now_tz_naive`并打印出来：
- en: '[PRE82]'
  id: totrans-273
  prefs: []
  type: TYPE_PRE
  zh: '[PRE82]'
- en: 'We get the following output. Your output may differ:'
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出。您的输出可能会有所不同：
- en: '[PRE83]'
  id: totrans-275
  prefs: []
  type: TYPE_PRE
  zh: '[PRE83]'
- en: 'Print the time zone information of `now_tz_naive`. Note the output:'
  id: totrans-276
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打印`now_tz_naive`的时区信息。注意输出：
- en: '[PRE84]'
  id: totrans-277
  prefs: []
  type: TYPE_PRE
  zh: '[PRE84]'
- en: 'We get the following output:'
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出：
- en: '[PRE85]'
  id: totrans-279
  prefs: []
  type: TYPE_PRE
  zh: '[PRE85]'
- en: 'Create a time zone-aware `datetime` object. Assign it to `now_tz_aware` and
    print it:'
  id: totrans-280
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个时区感知的`datetime`对象。将其分配给`now_tz_aware`并打印出来：
- en: '[PRE86]'
  id: totrans-281
  prefs: []
  type: TYPE_PRE
  zh: '[PRE86]'
- en: 'We get the following output. Your output may differ:'
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出。您的输出可能会有所不同：
- en: '[PRE87]'
  id: totrans-283
  prefs: []
  type: TYPE_PRE
  zh: '[PRE87]'
- en: 'Print the time zone information of `now_tz_aware`. Note the output:'
  id: totrans-284
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打印`now_tz_aware`的时区信息。注意输出：
- en: '[PRE88]'
  id: totrans-285
  prefs: []
  type: TYPE_PRE
  zh: '[PRE88]'
- en: 'We get the following output. Your output may differ:'
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出。您的输出可能会有所不同：
- en: '[PRE89]'
  id: totrans-287
  prefs: []
  type: TYPE_PRE
  zh: '[PRE89]'
- en: 'Create a new timestamp by adding time zone information to `now_tz_naive` from
    `now_tz_aware`. Assign it to `new_tz_aware` and print it:'
  id: totrans-288
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过将`now_tz_aware`的时区信息添加到`now_tz_naive`来创建一个新的时间戳。将其分配给`new_tz_aware`并打印出来：
- en: '[PRE90]'
  id: totrans-289
  prefs: []
  type: TYPE_PRE
  zh: '[PRE90]'
- en: 'The output is as follows. Your output may differ:'
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: 输出如下。您的输出可能会有所不同：
- en: '[PRE91]'
  id: totrans-291
  prefs: []
  type: TYPE_PRE
  zh: '[PRE91]'
- en: 'Print the timezone information of `new_tz_aware` using the `tzinfo` attribute.
    Note the output:'
  id: totrans-292
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`tzinfo`属性打印`new_tz_aware`的时区信息。注意输出：
- en: '[PRE92]'
  id: totrans-293
  prefs: []
  type: TYPE_PRE
  zh: '[PRE92]'
- en: 'The output is as follows. Your output may differ:'
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
  zh: 输出如下。您的输出可能会有所不同：
- en: '[PRE93]'
  id: totrans-295
  prefs: []
  type: TYPE_PRE
  zh: '[PRE93]'
- en: 'Create a new timestamp by removing timezone information from `new_tz_aware`.
    Assign it to `new_tz_naive` and print it:'
  id: totrans-296
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过从`new_tz_aware`中删除时区信息来创建一个新的时间戳。将其分配给`new_tz_naive`并打印出来：
- en: '[PRE94]'
  id: totrans-297
  prefs: []
  type: TYPE_PRE
  zh: '[PRE94]'
- en: 'The output is as follows. Your output may differ:'
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: 输出如下。您的输出可能会有所不同：
- en: '[PRE95]'
  id: totrans-299
  prefs: []
  type: TYPE_PRE
  zh: '[PRE95]'
- en: 'Print the timezone information of `new_tz_naive` using the `tzinfo` attribute.
    Note the output:'
  id: totrans-300
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`tzinfo`属性打印`new_tz_naive`的时区信息。注意输出：
- en: '[PRE96]'
  id: totrans-301
  prefs: []
  type: TYPE_PRE
  zh: '[PRE96]'
- en: 'The output is as follows:'
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
  zh: 输出如下：
- en: '[PRE97]'
  id: totrans-303
  prefs: []
  type: TYPE_PRE
  zh: '[PRE97]'
- en: How it works...
  id: totrans-304
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: In *step 1*, you import the `datetime` class from the `datetime` module. In
    *step 2*, you create a time zone-naive `datetime` object using the `now()` method
    and assign it to a new attribute `now_tz_naive`. In *step 3*, you print the time
    zone information held by `now_tz_naive` using the `tzinfo` attribute. Observe
    that the output is `None` as this is a time zone-naive object.
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: 在*步骤1*中，您从`datetime`模块中导入`datetime`类。在*步骤2*中，您使用`now()`方法创建一个时区无关的`datetime`对象，并将其分配给一个新属性`now_tz_naive`。在*步骤3*中，您使用`tzinfo`属性打印了`now_tz_naive`所持有的时区信息。请注意，输出为`None`，因为这是一个时区无关的对象。
- en: In *step 4*, you create a time zone-aware `datetime` object using the `now()`
    and `astimezone()` methods and assign it to a new attribute `now_tz_aware`. In
    *step 5*, you print the time zone information held by `now_tz_aware` using the
    `tzinfo` attribute. Observe that the output is `IST` and not `None`; as this is
    a time zone-aware object.
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
  zh: 在*步骤4*中，您使用`now()`和`astimezone()`方法创建了一个时区感知的`datetime`对象，并将其分配给一个新属性`now_tz_aware`。在*步骤5*中，您使用`tzinfo`属性打印了`now_tz_aware`所持有的时区信息。请注意输出为`IST`而不是`None`；因为这是一个时区感知的对象。
- en: In `step 6`, you create a new `datetime` object by adding time zone information
    to `now_tz_naive`. The time zone information is taken from `now_tz_aware`. You
    do this using the `replace()` method (Refer to *Modifying datetime objects* recipe for
    more information). You assign this to a new variable, `new_tz_aware`. In *step
    7*, you print the time zone information held by `new_tz_aware`. Observe it is
    the same output as in *step 5* as you have taken time zone information from `now_tz_aware`.
    Similarly, in *step 8* and *step 9*, you create a new `datetime` object, `new_tz_naive`,
    but this time you remove the time zone information.
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: 在*步骤6*中，您通过从`now_tz_aware`中获取时区信息来创建一个新的`datetime`对象。您使用`replace()`方法将时区信息添加到`now_tz_naive`。您将其分配给一个新变量`new_tz_aware`。在*步骤7*中，您打印了`new_tz_aware`所持有的时区信息。请注意，这与*步骤5*中的输出相同，因为您已经从`now_tz_aware`中获取了时区信息。同样，在*步骤8*和*步骤9*中，您创建了一个新的`datetime`对象`new_tz_naive`，但这次您删除了时区信息。
- en: There's more
  id: totrans-308
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多
- en: 'You can use comparison operators only between time zone-naive or time zone-aware
    `datetime` objects. You cannot compare a time zone-naive `datetime` object with
    a time zone-aware `datetime` object. Doing so will throw an exception. This is
    demonstrated in the following steps:'
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: 您只能在时区无关或时区感知的`datetime`对象之间使用比较运算符。您不能将时区无关的`datetime`对象与时区感知的`datetime`对象进行比较。这样做会引发异常。这在以下步骤中进行了演示：
- en: 'Compare 2 timezone-naive objects, `new_tz_naive` and `now_tz_naive`. Note the
    output:'
  id: totrans-310
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 比较2个时区无关的对象，`new_tz_naive`和`now_tz_naive`。注意输出：
- en: '[PRE98]'
  id: totrans-311
  prefs: []
  type: TYPE_PRE
  zh: '[PRE98]'
- en: 'Compare 2-time zone-aware objects, `new_tz_aware`, and `now_tz_aware`. Note
    the output:'
  id: totrans-312
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 比较2个时区感知的对象，`new_tz_aware`和`now_tz_aware`。注意输出：
- en: '[PRE99]'
  id: totrans-313
  prefs: []
  type: TYPE_PRE
  zh: '[PRE99]'
- en: 'We get the following output:'
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出：
- en: '[PRE100]'
  id: totrans-315
  prefs: []
  type: TYPE_PRE
  zh: '[PRE100]'
- en: 'Compare a time zone-aware object and a time zone-naive object, `new_tz_aware`,
    and `now_tz_naive`. Note the error:'
  id: totrans-316
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 比较一个时区感知的对象和一个时区无关的对象，`new_tz_aware`和`now_tz_naive`。注意错误：
- en: '[PRE101]'
  id: totrans-317
  prefs: []
  type: TYPE_PRE
  zh: '[PRE101]'
- en: 'We get the following output:'
  id: totrans-318
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出：
- en: '[PRE102]'
  id: totrans-319
  prefs: []
  type: TYPE_PRE
  zh: '[PRE102]'
- en: Creating a pandas.DataFrame object
  id: totrans-320
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建一个pandas.DataFrame对象
- en: Now that we are done with handling date and time, let's move on to handling
    time series data. The `pandas` library has a `pandas.DataFrame` class, which is
    useful for handling and manipulating such data. This recipe starts by creating
    these objects.
  id: totrans-321
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经处理完日期和时间，让我们继续处理时间序列数据。`pandas`库有一个`pandas.DataFrame`类，用于处理和操作这样的数据。这个配方从创建这些对象开始。
- en: How to do it...
  id: totrans-322
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做…
- en: 'Execute the following steps for this recipe:'
  id: totrans-323
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤来完成这个配方：
- en: 'Import the necessary modules from the Python standard library:'
  id: totrans-324
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从Python标准库中导入必要的模块：
- en: '[PRE103]'
  id: totrans-325
  prefs: []
  type: TYPE_PRE
  zh: '[PRE103]'
- en: 'Create a sample time-series data as a list of dictionary objects. Assign it
    to `time_series` data:'
  id: totrans-326
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个样本时间序列数据，作为字典对象的列表。将其分配给`time_series`数据：
- en: '[PRE104]'
  id: totrans-327
  prefs: []
  type: TYPE_PRE
  zh: '[PRE104]'
- en: 'Create a new `DataFrame` from `time_series_data`. Assign it to `df` and print
    it:'
  id: totrans-328
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从`time_series_data`创建一个新的`DataFrame`。将其分配给`df`并打印它：
- en: '[PRE105]'
  id: totrans-329
  prefs: []
  type: TYPE_PRE
  zh: '[PRE105]'
- en: 'We get the following output:'
  id: totrans-330
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出：
- en: '[PRE106]'
  id: totrans-331
  prefs: []
  type: TYPE_PRE
  zh: '[PRE106]'
- en: 'Get the list of columns in `df`:'
  id: totrans-332
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 获取`df`中的列列表：
- en: '[PRE107]'
  id: totrans-333
  prefs: []
  type: TYPE_PRE
  zh: '[PRE107]'
- en: 'We get the following output:'
  id: totrans-334
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出：
- en: '[PRE108]'
  id: totrans-335
  prefs: []
  type: TYPE_PRE
  zh: '[PRE108]'
- en: 'Create a `DataFrame` object again using the `time_series_data`. This time,
    specify the columns in the order you want:'
  id: totrans-336
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 再次使用`time_series_data`创建一个`DataFrame`对象。这次，指定你想要的顺序的列：
- en: '[PRE109]'
  id: totrans-337
  prefs: []
  type: TYPE_PRE
  zh: '[PRE109]'
- en: 'We get the following output:'
  id: totrans-338
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出：
- en: '[PRE110]'
  id: totrans-339
  prefs: []
  type: TYPE_PRE
  zh: '[PRE110]'
- en: How it works...
  id: totrans-340
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的…
- en: In *step 1*, you import the `datetime` class from the `datetime` module and
    the `pandas` package. In *step 2*, you create a time-series data, which is typically
    returned by 3rd party APIs for historical data. This data is a list of dictionaries,
    and each dictionary has the same set of keys—`date`, `open`, `high`, `low`, `close`,
    and `volume`. Observe that the value for the `date` key is a `datetime` object
    and for the other keys are `float` objects.
  id: totrans-341
  prefs: []
  type: TYPE_NORMAL
  zh: 在*步骤1*中，从`datetime`模块和`pandas`包中导入`datetime`类。在*步骤2*中，创建一个时间序列数据，通常由第三方API返回历史数据。这个数据是一个字典列表，每个字典具有相同的键—`date`、`open`、`high`、`low`、`close`和`volume`。注意`date`键的值是一个`datetime`对象，其他键的值是`float`对象。
- en: In *step 3*, you create a pandas `DataFrame` object by directly calling the
    constructor with `time_series_data` as an argument and assign the return data
    to `df`. The keys of the dictionaries become the column names of `df` and values
    become the data. In *step 4*, you fetch the columns of `df` as a list using the
    `columns` attribute and the `tolist()` method. You can verify that the column
    names are the same as the keys of the dictionaries in `time_series_data`.
  id: totrans-342
  prefs: []
  type: TYPE_NORMAL
  zh: 在*步骤3*中，通过直接调用构造函数并将`time_series_data`作为参数来创建一个pandas `DataFrame`对象，并将返回的数据分配给`df`。字典的键成为`df`的列名，值成为数据。在*步骤4*中，使用`columns`属性和`tolist()`方法将`df`的列作为列表提取出来。您可以验证列名与`time_series_data`中字典的键相同。
- en: In *step 5*, you create a `DataFrame` with the columns in a specific order by
    passing a `columns` argument to the constructor with the required order as a list
    of strings.
  id: totrans-343
  prefs: []
  type: TYPE_NORMAL
  zh: 在*步骤5*中，通过向构造函数传递一个`columns`参数，以特定顺序创建一个`DataFrame`，该参数的值为一个字符串列表。
- en: There's more
  id: totrans-344
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多
- en: 'When a `DataFrame` object is created, an index is assigned to it automatically,
    which is an address for all the rows. The leftmost column in the preceding example
    is the index column. By default, the index starts from `0`. A custom index can
    be set by passing an `index` argument to the `DataFrame` constructor with the
    required indices as an iterator. This is shown as follows:'
  id: totrans-345
  prefs: []
  type: TYPE_NORMAL
  zh: 当创建一个`DataFrame`对象时，会自动为其分配一个索引，这是所有行的地址。在前面的例子中，最左边的列是索引列。默认情况下，索引从`0`开始。可以通过向`DataFrame`构造函数传递一个`index`参数，并将所需的索引作为迭代器来设置自定义索引。如下所示：
- en: 'Create a new DataFrame object from `time_series_data`, with a custom index:'
  id: totrans-346
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从`time_series_data`创建一个新的DataFrame对象，使用自定义索引：
- en: '[PRE111]'
  id: totrans-347
  prefs: []
  type: TYPE_PRE
  zh: '[PRE111]'
- en: 'We get the following output:'
  id: totrans-348
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出：
- en: '[PRE112]'
  id: totrans-349
  prefs: []
  type: TYPE_PRE
  zh: '[PRE112]'
- en: Note the index in the output starts from `10` and goes up to `19`. The default
    index values would have ranged from `0` to `9`.
  id: totrans-350
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意输出中的索引从`10`开始，一直到`19`。默认索引值应该从`0`到`9`。
- en: DataFrame manipulation—renaming, rearranging, reversing, and slicing
  id: totrans-351
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DataFrame操作——重命名、重新排列、反转和切片
- en: After creating a `DataFrame` object, you can perform various operations on it.
    This recipe covers the following operations on `DataFrame` objects. Renaming a
    column, rearranging columns, reversing the `DataFrame`, and slicing the `DataFrame`
    to extract a row, column, and a subset of data.
  id: totrans-352
  prefs: []
  type: TYPE_NORMAL
  zh: 创建一个`DataFrame`对象后，可以对其执行各种操作。这个配方涵盖了`DataFrame`对象的以下操作。重命名列、重新排列列、反转`DataFrame`和切片`DataFrame`以提取行、列和数据子集。
- en: Getting ready
  id: totrans-353
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: Make sure the `df` object is available in your Python namespace. Refer to *Creating
    a pandas.DataFrame object* recipe of this chapter to set up this object.
  id: totrans-354
  prefs: []
  type: TYPE_NORMAL
  zh: 确保`df`对象在您的Python命名空间中可用。请参考本章的*创建pandas.DataFrame对象*配方来设置这个对象。
- en: How to do it…
  id: totrans-355
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做…
- en: 'Execute the following steps for this recipe:'
  id: totrans-356
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤来完成这个配方：
- en: 'Rename the `date` column to `timestamp` for `df`. Print it:'
  id: totrans-357
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将`df`的`date`列重命名为`timestamp`。打印它：
- en: '[PRE113]'
  id: totrans-358
  prefs: []
  type: TYPE_PRE
  zh: '[PRE113]'
- en: 'We get the following output:'
  id: totrans-359
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出：
- en: '[PRE114]'
  id: totrans-360
  prefs: []
  type: TYPE_PRE
  zh: '[PRE114]'
- en: 'Create a new `DataFrame` object by rearranging the columns in `df`:'
  id: totrans-361
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过重新排列`df`中的列来创建一个新的`DataFrame`对象：
- en: '[PRE115]'
  id: totrans-362
  prefs: []
  type: TYPE_PRE
  zh: '[PRE115]'
- en: 'We get the following output:'
  id: totrans-363
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出：
- en: '[PRE116]'
  id: totrans-364
  prefs: []
  type: TYPE_PRE
  zh: '[PRE116]'
- en: 'Create a new `DataFrame` object by reversing the rows in `df`:'
  id: totrans-365
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过反转`df`中的行来创建一个新的`DataFrame`对象：
- en: '[PRE117]'
  id: totrans-366
  prefs: []
  type: TYPE_PRE
  zh: '[PRE117]'
- en: 'We get the following output:'
  id: totrans-367
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出：
- en: '[PRE118]'
  id: totrans-368
  prefs: []
  type: TYPE_PRE
  zh: '[PRE118]'
- en: 'Extract the `close` column from `df`:'
  id: totrans-369
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从`df`中提取`close`列：
- en: '[PRE119]'
  id: totrans-370
  prefs: []
  type: TYPE_PRE
  zh: '[PRE119]'
- en: 'We get the following output:'
  id: totrans-371
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出：
- en: '[PRE120]'
  id: totrans-372
  prefs: []
  type: TYPE_PRE
  zh: '[PRE120]'
- en: 'Extract the first row from `df`:'
  id: totrans-373
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从`df`中提取第一行：
- en: '[PRE121]'
  id: totrans-374
  prefs: []
  type: TYPE_PRE
  zh: '[PRE121]'
- en: 'We get the following output:'
  id: totrans-375
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出：
- en: '[PRE122]'
  id: totrans-376
  prefs: []
  type: TYPE_PRE
  zh: '[PRE122]'
- en: 'Extract a *2 × 2* matrix with the first two rows and first two columns only:'
  id: totrans-377
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提取一个*2×2*矩阵，仅包括前两行和前两列：
- en: '[PRE123]'
  id: totrans-378
  prefs: []
  type: TYPE_PRE
  zh: '[PRE123]'
- en: 'We get the following output:'
  id: totrans-379
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出：
- en: '[PRE124]'
  id: totrans-380
  prefs: []
  type: TYPE_PRE
  zh: '[PRE124]'
- en: How it works...
  id: totrans-381
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的…
- en: '**Renaming**: In *step 1*, you rename the `date` column to `timestamp` using
    the `rename()` method of pandas `DataFrame`. You pass the `columns` argument as
    a dictionary with the existing names to be replaced as keys and their new names
    as the corresponding values. You also pass the `inplace` argument as `True` so
    that `df` is modified directly. If it is not passed, the default value is `False`,
    meaning a new `DataFrame` would be created instead of modifying `df`.'
  id: totrans-382
  prefs: []
  type: TYPE_NORMAL
  zh: '**重命名**：在*步骤1*中，您使用pandas `DataFrame`的`rename()`方法将`date`列重命名为`timestamp`。您传递`columns`参数作为一个包含要替换的现有名称作为键和它们的新名称作为相应值的字典。您还传递`inplace`参数为`True`，这样`df`就会直接被修改。如果不传递，那么默认值是`False`，意味着会创建一个新的`DataFrame`而不是修改`df`。'
- en: '**Rearranging**: In *step 2*, you use the `reindex()` method to create a new
    `DataFrame` from `df` by rearranging its columns. You pass the `columns` argument
    with a list of column names as strings in the required order.'
  id: totrans-383
  prefs: []
  type: TYPE_NORMAL
  zh: '**重新排列**：在*步骤2*中，您使用`reindex()`方法通过重新排列其列来从`df`创建一个新的`DataFrame`。您传递了`columns`参数，其中包含所需顺序的列名列表。'
- en: '**Revering**: In *step 3*, you create a new `DataFrame` from `df` with its
    rows reversed by using the indexing operator in a special way `- [::-1]`. This
    is similar to the way we reverse regular Python lists.'
  id: totrans-384
  prefs: []
  type: TYPE_NORMAL
  zh: '**反转**：在*步骤3*中，您通过一种特殊的方式使用索引运算符从`df`创建一个新的`DataFrame`，将其行反转为`- [::-1]`。这类似于我们反转常规的Python列表的方式。'
- en: '**Slicing**: In *step 4*, you extract the column `close` by using the indexing
    operator on `df`. You pass the column name, `close`, as the index here. The return
    data is a `pandas.Series` object. You can use the `iloc` property on DataFrame
    objects to extract a row, a column, or a subset DataFrame object. In *step 5*,
    you extract the first-row using `iloc` with `0` as the index. The return data
    is a `pandas.Series` object In *step 6*, you extract a 2x2 subset from df using
    `iloc` with `(:2, :2)` as the index. This implies all data in rows until index
    2 (which are 0 and 1) and columns until index 2 (which again are 0 and 1) would
    be extracted. The return data is a `pandas.DataFrame` object.'
  id: totrans-385
  prefs: []
  type: TYPE_NORMAL
  zh: '**切片**：在*步骤4*中，您使用索引运算符在`df`上提取`close`列。您在这里传递列名`close`作为索引。返回的数据是一个`pandas.Series`对象。您可以在DataFrame对象上使用`iloc`属性来提取行、列或子集DataFrame对象。在*步骤5*中，您使用`iloc`提取第一行，索引为`0`。返回的数据是一个`pandas.Series`对象。在*步骤6*中，您使用`iloc`从df中提取一个2x2的子集，索引为`(:2,
    :2)`。这意味着提取直到索引2的所有行（即0和1），以及直到索引2的所有列（同样是0和1）。返回的数据是一个`pandas.DataFrame`对象。'
- en: For all the operations shown in this recipe where a new `DataFrame` object is
    returned, the original `DataFrame` object remains unchanged.
  id: totrans-386
  prefs: []
  type: TYPE_NORMAL
  zh: 对于本示例中显示的所有返回新的`DataFrame`对象的操作，原始的`DataFrame`对象保持不变。
- en: There's more
  id: totrans-387
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多
- en: The `.iloc()` property can also be used to extract a column from a `DataFrame`.
    This is shown in the following code.
  id: totrans-388
  prefs: []
  type: TYPE_NORMAL
  zh: '`.iloc()`属性也可以用于从`DataFrame`中提取列。下面的代码中展示了这一点。'
- en: 'Extract the 4th column from `df`. Observe the output:'
  id: totrans-389
  prefs: []
  type: TYPE_NORMAL
  zh: 从`df`中提取第4列。观察输出：
- en: '[PRE125]'
  id: totrans-390
  prefs: []
  type: TYPE_PRE
  zh: '[PRE125]'
- en: 'We get the following output:'
  id: totrans-391
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出：
- en: '[PRE126]'
  id: totrans-392
  prefs: []
  type: TYPE_PRE
  zh: '[PRE126]'
- en: Note that this output and the output of *step 4* are identical.
  id: totrans-393
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，这个输出和*步骤4*的输出是相同的。
- en: DataFrame manipulation—applying, sorting, iterating, and concatenating
  id: totrans-394
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DataFrame操作——应用、排序、迭代和连接
- en: 'Adding to the previous recipe, this recipe demonstrates more operations that
    can be performed on `DataFrame` objects: applying a function to all elements in
    a column, sorting based on a column, iterating over the rows, and concatenating
    multiple `DataFrame` objects vertically and horizontally.'
  id: totrans-395
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一个示例的基础上，这个示例演示了可以在`DataFrame`对象上执行的更多操作：对列中的所有元素应用函数，基于列进行排序，对行进行迭代，以及垂直和水平连接多个`DataFrame`对象。
- en: Getting ready
  id: totrans-396
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: Make sure you have followed the previous recipe before trying out this recipe.
    Ensure you have `df` in your Python namespace from the previous recipe.
  id: totrans-397
  prefs: []
  type: TYPE_NORMAL
  zh: 在尝试这个示例之前，请确保您已经按照上一个示例进行了操作。确保您在Python命名空间中有来自上一个示例的`df`。
- en: How to do it…
  id: totrans-398
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做…
- en: 'Execute the following steps for this recipe:'
  id: totrans-399
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤来完成这个示例：
- en: Import the necessary modules
  id: totrans-400
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导入必要的模块
- en: '[PRE127]'
  id: totrans-401
  prefs: []
  type: TYPE_PRE
  zh: '[PRE127]'
- en: 'Modify the values in the timestamp column of `df` with a different date and
    time format `DD-MM-YYYY HH:MM:SS`:'
  id: totrans-402
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用不同的日期和时间格式`DD-MM-YYYY HH:MM:SS`修改`df`的时间戳列中的值：
- en: '[PRE128]'
  id: totrans-403
  prefs: []
  type: TYPE_PRE
  zh: '[PRE128]'
- en: 'We get the following output:'
  id: totrans-404
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出：
- en: '[PRE129]'
  id: totrans-405
  prefs: []
  type: TYPE_PRE
  zh: '[PRE129]'
- en: 'Create a new `DataFrame` object by sorting the `close` column in ascending
    order:'
  id: totrans-406
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过按升序对`close`列进行排序来创建一个新的`DataFrame`对象：
- en: '[PRE130]'
  id: totrans-407
  prefs: []
  type: TYPE_PRE
  zh: '[PRE130]'
- en: 'We get the following output:'
  id: totrans-408
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出：
- en: '[PRE131]'
  id: totrans-409
  prefs: []
  type: TYPE_PRE
  zh: '[PRE131]'
- en: 'Create a new `DataFrame` object by sorting the `open` column in descending
    order:'
  id: totrans-410
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过按降序对`open`列进行排序来创建一个新的`DataFrame`对象：
- en: '[PRE132]'
  id: totrans-411
  prefs: []
  type: TYPE_PRE
  zh: '[PRE132]'
- en: 'We get the following output:'
  id: totrans-412
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出：
- en: '[PRE133]'
  id: totrans-413
  prefs: []
  type: TYPE_PRE
  zh: '[PRE133]'
- en: 'Iterate over `df` to find the average of `open`, `close`, `high`, and `low` values
    for each row:'
  id: totrans-414
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 迭代`df`以找到每行`open`、`close`、`high`和`low`的平均值：
- en: '[PRE134]'
  id: totrans-415
  prefs: []
  type: TYPE_PRE
  zh: '[PRE134]'
- en: 'We get the following output:'
  id: totrans-416
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出：
- en: '[PRE135]'
  id: totrans-417
  prefs: []
  type: TYPE_PRE
  zh: '[PRE135]'
- en: 'Iterate column-wise over all the values of the first row of `df`:'
  id: totrans-418
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按列迭代`df`的第一行的所有值：
- en: '[PRE136]'
  id: totrans-419
  prefs: []
  type: TYPE_PRE
  zh: '[PRE136]'
- en: 'We get the following output:'
  id: totrans-420
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出：
- en: '[PRE137]'
  id: totrans-421
  prefs: []
  type: TYPE_PRE
  zh: '[PRE137]'
- en: 'Create a sample time-series data as a list of dictionary objects. Assign it
    to `df_new`:'
  id: totrans-422
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将样本时间序列数据创建为字典对象的列表。将其分配给`df_new`：
- en: '[PRE138]'
  id: totrans-423
  prefs: []
  type: TYPE_PRE
  zh: '[PRE138]'
- en: 'We get the following output:'
  id: totrans-424
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出：
- en: '[PRE139]'
  id: totrans-425
  prefs: []
  type: TYPE_PRE
  zh: '[PRE139]'
- en: 'Create a new DataFrame by concatenating `df` and `df_new` vertically:'
  id: totrans-426
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过垂直连接`df`和`df_new`创建一个新的DataFrame：
- en: '[PRE140]'
  id: totrans-427
  prefs: []
  type: TYPE_PRE
  zh: '[PRE140]'
- en: 'We get the following output:'
  id: totrans-428
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出：
- en: '[PRE141]'
  id: totrans-429
  prefs: []
  type: TYPE_PRE
  zh: '[PRE141]'
- en: How it works...
  id: totrans-430
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: In *step 1*, you import the `pandas` package.
  id: totrans-431
  prefs: []
  type: TYPE_NORMAL
  zh: 在*步骤1*中，您导入了`pandas`包。
- en: '**Applying**: In *step 2*, you modify all the values in the `timestamp` column
    of `df` by using the `apply` method. This method takes a function as an input
    to be applied. You pass a lambda function here which expects a `datetime` object
    as a single input, and converts it to a string in the required format using `strftime()`.
    (Refer to *Converting a datetime object to a string* recipe for more details on
    `strftime()`). The `apply` method is called on the `timestamp` column of `df`,
    which is a `pandas.Series` object. The lambda function is applied to each value
    in the column. This call returns a new `pandas.Series` object, which you assign
    back to the `timestamp` column of `df`. Note, after this, the `timestamp` column
    of `df` holds timestamps as string objects, and not `datetime` objects as earlier.'
  id: totrans-432
  prefs: []
  type: TYPE_NORMAL
  zh: '**应用**：在*步骤2*中，您使用`apply`方法修改了`df`的`timestamp`列中的所有值。此方法接受一个函数作为输入进行应用。您在这里传递了一个期望`datetime`对象作为单个输入的lambda函数，并使用`strftime()`将其转换为所需格式的字符串（有关`strftime()`的更多详细信息，请参阅*将datetime对象转换为字符串*配方）。`apply`方法被调用在`df`的`timestamp`列上，它是一个`pandas.Series`对象。lambda函数被应用于列中的每个值。此调用返回一个新的`pandas.Series`对象，您将其重新分配给`df`的`timestamp`列。请注意，在此之后，`df`的`timestamp`列保存的是字符串对象，而不是之前的`datetime`对象。'
- en: '**Sorting**: In *step 3*, you create a new `DataFrame` object by sorting the
    `close` column of `df` in ascending order. You use the `sort_values()` method
    to perform the sorting. Similarly, in *step 4*, you create a new `DataFrame` object
    by sorting the `open` column of `df` in descending order.'
  id: totrans-433
  prefs: []
  type: TYPE_NORMAL
  zh: '**排序**：在*步骤3*中，通过对`df`的`close`列进行升序排序，创建一个新的`DataFrame`对象。您可以使用`sort_values()`方法执行排序。同样，在*步骤4*中，通过对`df`的`open`列进行降序排序，创建一个新的`DataFrame`对象。'
- en: '**Iterating**: In *step 5*, you iterate over df using the `iterrows()` method
    to find and print the average of `open`, `close`, `high`, and `low` values for
    each row. The `iterrows()` method iterates over each row as an (`index, pandas.Series`)
    pair. In *step 6*, you iterate over all the values of the first row of `df` using
    `df.iloc[0]`. You get the `timestamp`, `open`, `high`, `low`, `close`, and `volume`
    column values for the first row as the output.'
  id: totrans-434
  prefs: []
  type: TYPE_NORMAL
  zh: '**迭代**：在*步骤5*中，您使用`iterrows()`方法迭代`df`，以找到并打印每行的`open`、`close`、`high`和`low`的平均值。`iterrows()`方法以（索引，pandas.Series）对的形式迭代每一行。在*步骤6*中，您使用`df.iloc[0]`迭代`df`的第一行的所有值。您将第一行的`timestamp`、`open`、`high`、`low`、`close`和`volume`列值作为输出。'
- en: '**Concatenation**: In *step 6*, you create a new `DataFrame` similar to the
    one created in *step 2* of *Creating a pandas.DataFrame object* recipe, and assign
    it to `df_new`. You use the `pandas.concat()` function to create a new `DataFrame`
    by vertically concatenating `dt` and `df_new`. This implies that a new `DataFrame`
    would be created with the rows of `df_new` appended below the rows of `df`. You
    pass a list containing `df` and `df_new` as an argument to the `pandas.concat()`
    function. Also, to create a fresh index starting from `0`, you use the `reset_index()`
    method with the argument drop passed as `True`. If you don''t use `reset_index()`,
    the indices of the concatenated `DataFrame` would look something like this—`0,
    1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4`. (Refer to *Creating a pandas.DataFrame
    object* recipe to know more about the `DataFrame` index.)'
  id: totrans-435
  prefs: []
  type: TYPE_NORMAL
  zh: '**连接**：在*步骤6*中，您创建了一个与*创建pandas.DataFrame对象*配方中*步骤2*中创建的类似的新的`DataFrame`，并将其分配给`df_new`。您使用`pandas.concat()`函数通过垂直连接`dt`和`df_new`来创建一个新的`DataFrame`。这意味着将创建一个新的`DataFrame`，其中`df_new`的行被追加到`df`的行下方。您将包含`df`和`df_new`的列表作为参数传递给`pandas.concat()`函数。此外，为了创建一个从`0`开始的新索引，您使用了带有参数`drop`的`reset_index()`方法，参数设为`True`。如果不使用`reset_index()`，连接的`DataFrame`的索引看起来会像这样——`0,
    1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4`。（有关`DataFrame`索引的更多信息，请参阅*创建pandas.DataFrame对象*配方。）'
- en: There's more
  id: totrans-436
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多
- en: 'You can also use the `pandas.concat()` function to concatenate two `DataFrame`
    objects together horizontally, which is column-wise by, passing the `axis` argument a
    value of `1` to the `pandas.concat()` method. This is shown in the following steps:'
  id: totrans-437
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以使用`pandas.concat()`函数将两个`DataFrame`对象水平连接在一起，即按列连接，通过将`axis`参数的值设为`1`传递给`pandas.concat()`方法。这在以下步骤中显示：
- en: 'Import `random` module from the Python standard library:'
  id: totrans-438
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从Python标准库中导入`random`模块：
- en: '[PRE142]'
  id: totrans-439
  prefs: []
  type: TYPE_PRE
  zh: '[PRE142]'
- en: 'Create a DataFrame object with a single column, `open`, and random values.
    Assign it to `df1` and print it:'
  id: totrans-440
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个只有一列`open`和随机值的DataFrame对象。将其分配给`df1`并打印出来：
- en: '[PRE143]'
  id: totrans-441
  prefs: []
  type: TYPE_PRE
  zh: '[PRE143]'
- en: 'We get the following output. Your output may differ:'
  id: totrans-442
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出。您的输出可能会有所不同：
- en: '[PRE144]'
  id: totrans-443
  prefs: []
  type: TYPE_PRE
  zh: '[PRE144]'
- en: 'Create another `DataFrame` object with a single column, `close`, and random
    values. Assign it to `df2` and print it:'
  id: totrans-444
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建另一个只有一列`close`和随机值的DataFrame对象。将其分配给`df2`并打印出来：
- en: '[PRE145]'
  id: totrans-445
  prefs: []
  type: TYPE_PRE
  zh: '[PRE145]'
- en: 'We get the following output:'
  id: totrans-446
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出：
- en: '[PRE146]'
  id: totrans-447
  prefs: []
  type: TYPE_PRE
  zh: '[PRE146]'
- en: Create a new `DataFrame` by concatenating `df1` and `df2` horizontally
  id: totrans-448
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过水平连接`df1`和`df2`创建一个新的`DataFrame`
- en: '[PRE147]'
  id: totrans-449
  prefs: []
  type: TYPE_PRE
  zh: '[PRE147]'
- en: 'We get the following output. Your output may differ:'
  id: totrans-450
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出。您的输出可能会有所不同：
- en: '[PRE148]'
  id: totrans-451
  prefs: []
  type: TYPE_PRE
  zh: '[PRE148]'
- en: Converting a DataFrame into other formats
  id: totrans-452
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 将DataFrame转换为其他格式
- en: This recipe demonstrates the conversion of `DataFrame` objects into other formats,
    such as `.csv` files, `json` objects, and `pickle` objects. Conversion into a `.csv`
    file makes it easier to further work on the data using a spreadsheet application.
    The `json` format is useful for transmitting `DataFrame` objects over web APIs.
    The `pickle` format is useful for transmitting `DataFrame` objects created in
    one Python session to another Python session over sockets without having to recreate
    them.
  id: totrans-453
  prefs: []
  type: TYPE_NORMAL
  zh: 此配方演示了将`DataFrame`对象转换为其他格式，如`.csv`文件、`json`对象和`pickle`对象。将其转换为`.csv`文件可以更容易地使用电子表格应用程序进一步处理数据。`json`格式对于通过Web
    API传输`DataFrame`对象很有用。`pickle`格式对于在一个Python会话中创建的`DataFrame`对象传输到另一个Python会话中而无需重新创建它们很有用。
- en: Getting ready
  id: totrans-454
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: Make sure the object `df` is available in your Python namespace. Refer to *Creating
    a pandas.DataFrame object* recipe of this chapter to set up this object.
  id: totrans-455
  prefs: []
  type: TYPE_NORMAL
  zh: 确保对象`df`在您的Python命名空间中可用。请参考本章的*创建pandas.DataFrame对象*配方来设置这个对象。
- en: How to do it…
  id: totrans-456
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做…
- en: 'Execute the following steps for this recipe:'
  id: totrans-457
  prefs: []
  type: TYPE_NORMAL
  zh: 执行此配方的以下步骤：
- en: 'Convert and save `df` as a CSV file:'
  id: totrans-458
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将`df`转换并保存为CSV文件：
- en: '[PRE149]'
  id: totrans-459
  prefs: []
  type: TYPE_PRE
  zh: '[PRE149]'
- en: 'Convert `df` to a JSON string:'
  id: totrans-460
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将“df”转换为JSON字符串：
- en: '[PRE150]'
  id: totrans-461
  prefs: []
  type: TYPE_PRE
  zh: '[PRE150]'
- en: 'We get the following output:'
  id: totrans-462
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出：
- en: '[PRE151]'
  id: totrans-463
  prefs: []
  type: TYPE_PRE
  zh: '[PRE151]'
- en: 'Pickle `df` to a file:'
  id: totrans-464
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将`df`保存为pickle文件：
- en: '[PRE152]'
  id: totrans-465
  prefs: []
  type: TYPE_PRE
  zh: '[PRE152]'
- en: How it works...
  id: totrans-466
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的…
- en: In *step 1*, you use the `to_csv()` method to save `df` as a `.csv` file. You
    pass `dataframe.csv`, a file path where the `.csv` file should be generated, as
    the first argument and index as `False` as the second argument. Passing index
    as `False` prevents the index from being dumped to the `.csv` file. If you want
    to save the `DataFrame` along with its index, you can pass the index as `True`
    to the `to_csv()` method.
  id: totrans-467
  prefs: []
  type: TYPE_NORMAL
  zh: 在*步骤1*中，您使用`to_csv()`方法将`df`保存为.csv文件。您将`dataframe.csv`作为第一个参数传递，作为第二个参数传递`False`索引。传递`False`索引可以防止索引被转储到.csv文件中。如果要保存`DataFrame`以及其索引，可以将索引作为`True`传递给`to_csv()`方法。
- en: In *step 2*, you use the `to_json()` method to convert `df` into a JSON string.
    You do not pass any additional arguments to the `to_json()` method.
  id: totrans-468
  prefs: []
  type: TYPE_NORMAL
  zh: 在*步骤2*中，您使用`to_json()`方法将“df”转换为JSON字符串。您不需要向`to_json()`方法传递任何额外的参数。
- en: In *step 3*, you use the `to_pickle()` method to pickle (serialize) the object.
    Again you do not pass any additional arguments to the `to_pickle()` method.
  id: totrans-469
  prefs: []
  type: TYPE_NORMAL
  zh: 在*步骤3*中，您使用`to_pickle()`方法对对象进行pickle（序列化）。同样，您不需要向`to_pickle()`方法传递任何额外的参数。
- en: 'The methods `to_csv()`, `to_json()`, and `to_pickle()` can take more optional
    arguments than the ones shown in this recipe. Refer to the official docs for complete
    information on these methods:'
  id: totrans-470
  prefs: []
  type: TYPE_NORMAL
  zh: '`to_csv()`、`to_json()`和`to_pickle()`方法可以接受比本教程中显示的更多的可选参数。有关这些方法的完整信息，请参考官方文档：'
- en: '`to_csv()`: [https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_csv.html](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_csv.html)'
  id: totrans-471
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`to_csv()`: [https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_csv.html](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_csv.html)'
- en: '`to_json()`: [https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_json.html](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_json.html)'
  id: totrans-472
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`to_json()`: [https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_json.html](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_json.html)'
- en: '`to_pickle()`: [https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_pickle.html](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_pickle.html)'
  id: totrans-473
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`to_pickle()`: [https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_pickle.html](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_pickle.html)'
- en: Creating a DataFrame from other formats
  id: totrans-474
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 从其他格式创建DataFrame
- en: In this recipe, you will create `DataFrame` objects from other formats, such
    as `.csv` files, `.json` strings, and `pickle` files. A `.csv` file created using
    a spreadsheet application, valid JSON data received over web APIs, or valid pickle
    objects received over sockets can all be processed further using Python by converting
    them to `DataFrame` objects.
  id: totrans-475
  prefs: []
  type: TYPE_NORMAL
  zh: 在本教程中，您将从其他格式（如.csv文件、.json字符串和pickle文件）创建“DataFrame”对象。使用电子表格应用程序创建的.csv文件，通过Web
    API接收的有效JSON数据，或通过套接字接收的有效pickle对象都可以通过将它们转换为“DataFrame”对象来进一步使用Python进行处理。
- en: 'Loading pickled data received from untrusted sources can be unsafe. Please
    use `read_pickle()` with caution. You can find more details here: [https://docs.python.org/3/library/pickle.html](https://docs.python.org/3/library/pickle.html).
    If you are using this function on the pickle file created in the previous recipe,
    it is perfectly safe to use `read_pickle()`.'
  id: totrans-476
  prefs: []
  type: TYPE_NORMAL
  zh: 从不受信任的来源加载pickled数据可能是不安全的。请谨慎使用`read_pickle()`。您可以在这里找到更多详细信息：[https://docs.python.org/3/library/pickle.html](https://docs.python.org/3/library/pickle.html)。如果您在上一个教程中创建的pickle文件上使用此函数，使用`read_pickle()`是完全安全的。
- en: Getting ready
  id: totrans-477
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: Make sure you have followed the previous recipe before starting this recipe.
  id: totrans-478
  prefs: []
  type: TYPE_NORMAL
  zh: 在开始本教程之前，请确保您已经按照上一个教程进行了操作。
- en: How to do it…
  id: totrans-479
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做…
- en: 'Execute the following steps for this recipe:'
  id: totrans-480
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤来完成本教程：
- en: 'Create a DataFrame object by reading a CSV file:'
  id: totrans-481
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过读取CSV文件创建DataFrame对象：
- en: '[PRE153]'
  id: totrans-482
  prefs: []
  type: TYPE_PRE
  zh: '[PRE153]'
- en: 'We get the following output:'
  id: totrans-483
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出：
- en: '[PRE154]'
  id: totrans-484
  prefs: []
  type: TYPE_PRE
  zh: '[PRE154]'
- en: 'Create a DataFrame object by reading a JSON string:'
  id: totrans-485
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过读取JSON字符串创建DataFrame对象：
- en: '[PRE155]'
  id: totrans-486
  prefs: []
  type: TYPE_PRE
  zh: '[PRE155]'
- en: 'We get the following output:'
  id: totrans-487
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出：
- en: '[PRE156]'
  id: totrans-488
  prefs: []
  type: TYPE_PRE
  zh: '[PRE156]'
- en: 'Create a `DataFrame` object by unpickling the `df.pickle` file:'
  id: totrans-489
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过取消pickle`df.pickle`文件创建`DataFrame`对象：
- en: '[PRE157]'
  id: totrans-490
  prefs: []
  type: TYPE_PRE
  zh: '[PRE157]'
- en: 'We get the following output:'
  id: totrans-491
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下输出：
- en: '[PRE158]'
  id: totrans-492
  prefs: []
  type: TYPE_PRE
  zh: '[PRE158]'
- en: How it works...
  id: totrans-493
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的…
- en: In *step 1*, you use the `pandas.read_csv()` function to create a DataFrame
    object from a `.csv` file. You pass `dataframe.csv`, the file path from where
    the `.csv` file should be read, as an argument. Recall, you have created `dataframe.csv`
    in *step 1* of the previous recipe.
  id: totrans-494
  prefs: []
  type: TYPE_NORMAL
  zh: 在*步骤1*中，您使用`pandas.read_csv()`函数从.csv文件创建一个DataFrame对象。您将`dataframe.csv`作为参数传递，该文件路径应该是读取.csv文件的路径。回想一下，您已经在上一个教程的*步骤1*中创建了`dataframe.csv`。
- en: In *step 2*, you use the `pandas.read_json()` function to create a `DataFrame`
    object from a valid JSON string. You pass the JSON string from the output of *step
    2* in the previous recipe as an argument to this function.
  id: totrans-495
  prefs: []
  type: TYPE_NORMAL
  zh: 在*步骤2*中，您使用`pandas.read_json()`函数从有效的JSON字符串创建一个“DataFrame”对象。您将上一个教程中*步骤2*的输出的JSON字符串作为参数传递给此函数。
- en: In *step 3*, you use the `pandas.read_pickle()` method to create a `DataFrame`
    object from a `pickle` file. You pass `df.pickle`, the file path from where the
    pickle file should be read, as an argument to this function. Recall, what you
    created `df.pickle` in *step 3* of the previous recipe.
  id: totrans-496
  prefs: []
  type: TYPE_NORMAL
  zh: 在*步骤3*中，您使用`pandas.read_pickle()`方法从pickle文件创建一个“DataFrame”对象。您将`df.pickle`作为参数传递，该文件路径应该是读取pickle文件的路径。回想一下，您已经在上一个教程的*步骤3*中创建了`df.pickle`。
- en: If you have followed the previous recipe, the outputs for all the three steps
    would all be the same `DataFrame` object. And this would be identical to `df`
    from the previous recipe.
  id: totrans-497
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您已经按照上一个教程，所有三个步骤的输出都将是相同的“DataFrame”对象。这将与上一个教程中的“df”完全相同。
- en: The methods `read_csv()`, `read_json()`, and `read_pickle()` can take more optional
    arguments than the ones shown in this recipe. Refer to the official docs for complete
    information on these methods.
  id: totrans-498
  prefs: []
  type: TYPE_NORMAL
  zh: '`read_csv()`、`read_json()`和`read_pickle()`方法可以接受比本教程中显示的更多的可选参数。有关这些方法的完整信息，请参考官方文档。'
- en: '`read_csv()`: [https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html#pandas.read_csv](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html#pandas.read_csv)'
  id: totrans-499
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`read_csv()`: [https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html#pandas.read_csv](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html#pandas.read_csv)'
- en: '`read_json()`: [https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_json.html#pandas.read_json](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_json.html#pandas.read_json)'
  id: totrans-500
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`read_json()`: [https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_json.html#pandas.read_json](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_json.html#pandas.read_json)'
- en: '`read_pickle()`: [https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_pickle.html#pandas.read_pickle](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_pickle.html#pandas.read_pickle)'
  id: totrans-501
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`read_pickle()`: [https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_pickle.html#pandas.read_pickle](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_pickle.html#pandas.read_pickle)'
